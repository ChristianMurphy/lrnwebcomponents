{"version":3,"file":"a11y-gif-player.umd.js","sources":["a11y-gif-player.umd.js"],"sourcesContent":["/**\n * Copyright 2019 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { LitElement, html, css } from \"lit-element/lit-element.js\";\nimport { SchemaBehaviors } from \"@lrnwebcomponents/schema-behaviors/schema-behaviors.js\";\nimport \"@polymer/paper-tooltip/paper-tooltip.js\";\n/**\n * `a11y-gif-player`\n * plays gifs in an accessible way by having the user click to play their animation\n### Styling\n\n`<a11y-gif-player>` provides the following custom properties\nfor styling:\n\nCustom property | Description | Default\n----------------|-------------|----------\n`--a11y-gif-player-border` | border around player/button | none\n`--a11y-gif-player-border-radius` | border-radius for player/button | 0\n`--a11y-gif-player-focus-border` | border-radius for player/button when hovered or focused | none\n`--a11y-gif-player-cursor` | cursor for player/button when hovered or focused | pointer\n`--a11y-gif-player-outline` | outline for player/button when hovered or focused | \n`--a11y-gif-player-disabled-cursor` | cursor for player/button when disabled | not-allowed\n`--a11y-gif-player-arrow-size` | arrow icon size | 30%\n`--a11y-gif-player-arrow-opacity` | default arrow icon opacity | 0.5\n`--a11y-gif-player-button-focus-opacity` | arrow icon opacity when hovered or focused | 0.7\n`--a11y-gif-player-button-color` | arrow icon color | #000000\n`--a11y-gif-player-arrow-border-color` | arrow icon border color | #ffffff\n`--a11y-gif-player-arrow-border-width` | arrow icon border width | 15px\n`--a11y-gif-player-button-text-color` | arrow icon text color | #ffffff\n *\n * @customElement\n * @polymer\n * @demo ./demo/index.html\n */\nclass A11yGifPlayer extends SchemaBehaviors(LitElement) {\n  constructor() {\n    super();\n    this.alt = null;\n    this.disabled = false;\n    this.src = null;\n    this.tooltip = \"Toggle Animation\";\n    this.tooltipPlaying = null;\n    this.srcWithoutAnimation = null;\n    this.__playing = false;\n    import(\"@polymer/iron-image/iron-image.js\");\n  }\n  static get styles() {\n    return [\n      css`\n        :host {\n          display: inline-flex;\n        }\n        :host([hidden]) {\n          display: none;\n        }\n        button {\n          padding: 0;\n          display: flex;\n          align-items: stretch;\n          position: relative;\n          width: auto;\n          border: var(--a11y-gif-player-border, none);\n          border-radius: var(--a11y-gif-player-border-radius, 0);\n        }\n        button:active,\n        button:focus,\n        button:hover {\n          border: var(--a11y-gif-player-focus-border, none);\n          cursor: var(--a11y-gif-player-cursor, pointer);\n          outline: var(--a11y-gif-player-outline, 3px solid);\n        }\n        button[disabled] {\n          cursor: var(--a11y-gif-player-disabled-cursor, not-allowed);\n        }\n        button > * {\n          width: 100%;\n          min-width: 100%;\n          min-height: 100%;\n          flex: 1 1 100%;\n        }\n        div {\n          display: flex;\n          align-items: center;\n          flex-direction: column;\n          position: absolute;\n        }\n        svg {\n          flex: 1 1 100%;\n          width: var(--a11y-gif-player-arrow-size, 30%);\n          height: var(--a11y-gif-player-arrow-size, 30%);\n        }\n        g {\n          opacity: var(--a11y-gif-player-arrow-opacity, 0.5);\n        }\n        button:not([disabled]):active g,\n        button:not([disabled]):hover g,\n        button:not([disabled]):focus g {\n          opacity: var(--a11y-gif-player-button-focus-opacity, 0.7);\n        }\n        polygon {\n          fill: var(--a11y-gif-player-button-color, #000000);\n          stroke: var(--a11y-gif-player-arrow-border-color, #ffffff);\n          stroke-width: var(--a11y-gif-player-arrow-border-width, 15px);\n        }\n        text {\n          fill: var(--a11y-gif-player-button-text-color, #ffffff);\n        }\n        img {\n          position: absolute;\n        }\n        button[aria-pressed=\"true\"] svg,\n        button[aria-pressed=\"true\"] img {\n          opacity: 0;\n        }\n      `\n    ];\n  }\n  render() {\n    return html`\n      <button\n        id=\"button\"\n        aria-controls=\"gif\"\n        aria-pressed=\"${this.__playing ? \"true\" : \"false\"}\"\n        @click=\"${this.toggle}\"\n        ?disabled=\"${this.disabled || !this.src || !this.srcWithoutAnimation}\"\n      >\n        <iron-image id=\"gif\" src=\"${this.src}\" ?hidden=\"${!this.src}\">\n        </iron-image>\n        <img\n          id=\"static\"\n          alt=\"${this.alt}\"\n          src=\"${this.srcWithoutAnimation}\"\n          ?hidden=\"${!this.srcWithoutAnimation}\"\n        />\n        <div ?hidden=\"${!this.src || !this.srcWithoutAnimation}\">\n          <svg\n            id=\"svg\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 200 200\"\n          >\n            <g>\n              <polygon points=\"30,20 30,180 170,100\"></polygon>\n              <text x=\"50\" y=\"115\" font-size=\"40px\">GIF</text>\n            </g>\n          </svg>\n        </div>\n      </button>\n\n      <paper-tooltip for=\"button\">\n        ${this.__playing && this.tooltipPlaying\n          ? this.tooltipPlaying\n          : this.tooltip}\n      </paper-tooltip>\n    `;\n  }\n  static get tag() {\n    return \"a11y-gif-player\";\n  }\n  static get properties() {\n    return {\n      ...super.properties,\n\n      /**\n       * Alt text of gif\n       */\n      alt: {\n        type: String\n      },\n      /**\n       * Whether button is disabled\n       */\n      disabled: {\n        type: Boolean\n      },\n      /**\n       * Source of animated gif\n       */\n      src: {\n        type: String\n      },\n      /**\n       * Source of static version of image\n       */\n      srcWithoutAnimation: {\n        type: String,\n        attribute: \"src-without-animation\"\n      },\n      /**\n       * default tooltip\n       */\n      tooltip: {\n        type: String\n      },\n      /**\n       * tooltip when playing\n       */\n      tooltipPlaying: {\n        type: String,\n        attribute: \"tooltip-playing\"\n      },\n      /**\n       * whether GIF is playing\n       */\n      __playing: {\n        type: Boolean\n      }\n    };\n  }\n  /**\n   * plays the animation regarless of previous state\n   */\n  play() {\n    this.__playing = true;\n  }\n  /**\n   * stops the animation regarless of previous state\n   */\n  stop() {\n    this.__playing = false;\n  }\n  /**\n   * toggles the animation based on current state\n   */\n  toggle() {\n    if (this.__playing) {\n      this.stop();\n    } else {\n      this.play();\n    }\n  }\n  /**\n   * deprecated. toggles the animation based on current state\n   */\n  toggleAnimation() {\n    if (this.__playing) {\n      this.stop();\n    } else {\n      this.play();\n    }\n  }\n\n  static get haxProperties() {\n    return {\n      canScale: true,\n      canPosition: true,\n      canEditSource: false,\n      gizmo: {\n        title: \"Accessible GIF\",\n        description: \"Makes animated GIFs accessible.\",\n        icon: \"gif\",\n        color: \"grey\",\n        groups: [\"Images\", \"Media\"],\n        handles: [\n          {\n            type: \"image\",\n            source: \"src\",\n            source2: \"srcWithoutAnimation\",\n            alt: \"alt\"\n          }\n        ],\n        meta: {\n          author: \"LRNWebComponents\"\n        }\n      },\n      settings: {\n        quick: [\n          {\n            property: \"src\",\n            title: \"Animated GIF\",\n            description: \"The URL to your animated GIF.\",\n            inputMethod: \"textfield\",\n            icon: \"link\",\n            validationType: \"url\",\n            required: true\n          },\n          {\n            property: \"srcWithoutAnimation\",\n            title: \"Still Image\",\n            description: \"The URL to a still image version of your GIF.\",\n            inputMethod: \"textfield\",\n            icon: \"link\",\n            validationType: \"url\",\n            required: true\n          },\n          {\n            property: \"alt\",\n            title: \"Alt Text\",\n            description: \"Alternative text for the image.\",\n            inputMethod: \"textfield\",\n            icon: \"accessibility\",\n            required: true\n          }\n        ],\n        configure: [\n          {\n            property: \"src\",\n            title: \"Animated GIF\",\n            description: \"The URL to your animated GIF.\",\n            inputMethod: \"haxupload\",\n            icon: \"link\",\n            validationType: \"url\",\n            required: true\n          },\n          {\n            property: \"srcWithoutAnimation\",\n            title: \"Still Image\",\n            description: \"The URL to a still image version of your GIF.\",\n            inputMethod: \"haxupload\",\n            icon: \"link\",\n            validationType: \"url\",\n            required: true\n          },\n          {\n            property: \"alt\",\n            title: \"Alt Text\",\n            description: \"Alternative text for the image.\",\n            inputMethod: \"alt\",\n            icon: \"accessibility\",\n            required: true\n          }\n        ],\n        advanced: []\n      }\n    };\n  }\n}\nwindow.customElements.define(A11yGifPlayer.tag, A11yGifPlayer);\nexport { A11yGifPlayer };\n"],"names":["A11yGifPlayer","alt","disabled","src","tooltip","tooltipPlaying","srcWithoutAnimation","__playing","SchemaBehaviors","LitElement","css","type","String","Boolean","attribute","canScale","canPosition","canEditSource","gizmo","title","description","icon","color","groups","handles","source","source2","meta","author","settings","quick","property","inputMethod","validationType","required","configure","advanced","html","this","toggle","stop","play","window","customElements","define","tag"],"mappings":"8gJAmCMA,yKAGGC,IAAM,OACNC,UAAW,IACXC,IAAM,OACNC,QAAU,qBACVC,eAAiB,OACjBC,oBAAsB,OACtBC,WAAY,SACV,6RAViBC,kBAAgBC,yDAajC,CACLC,8CA4GK,6ZASLT,IAAK,CACHU,KAAMC,QAKRV,SAAU,CACRS,KAAME,SAKRV,IAAK,CACHQ,KAAMC,QAKRN,oBAAqB,CACnBK,KAAMC,OACNE,UAAW,yBAKbV,QAAS,CACPO,KAAMC,QAKRP,eAAgB,CACdM,KAAMC,OACNE,UAAW,mBAKbP,UAAW,CACTI,KAAME,uDAsCH,CACLE,UAAU,EACVC,aAAa,EACbC,eAAe,EACfC,MAAO,CACLC,MAAO,iBACPC,YAAa,kCACbC,KAAM,MACNC,MAAO,OACPC,OAAQ,CAAC,SAAU,SACnBC,QAAS,CACP,CACEb,KAAM,QACNc,OAAQ,MACRC,QAAS,sBACTzB,IAAK,QAGT0B,KAAM,CACJC,OAAQ,qBAGZC,SAAU,CACRC,MAAO,CACL,CACEC,SAAU,MACVZ,MAAO,eACPC,YAAa,gCACbY,YAAa,YACbX,KAAM,OACNY,eAAgB,MAChBC,UAAU,GAEZ,CACEH,SAAU,sBACVZ,MAAO,cACPC,YAAa,gDACbY,YAAa,YACbX,KAAM,OACNY,eAAgB,MAChBC,UAAU,GAEZ,CACEH,SAAU,MACVZ,MAAO,WACPC,YAAa,kCACbY,YAAa,YACbX,KAAM,gBACNa,UAAU,IAGdC,UAAW,CACT,CACEJ,SAAU,MACVZ,MAAO,eACPC,YAAa,gCACbY,YAAa,YACbX,KAAM,OACNY,eAAgB,MAChBC,UAAU,GAEZ,CACEH,SAAU,sBACVZ,MAAO,cACPC,YAAa,gDACbY,YAAa,YACbX,KAAM,OACNY,eAAgB,MAChBC,UAAU,GAEZ,CACEH,SAAU,MACVZ,MAAO,WACPC,YAAa,kCACbY,YAAa,MACbX,KAAM,gBACNa,UAAU,IAGdE,SAAU,kDA3MPC,WAIaC,KAAK/B,UAAY,OAAS,QAChC+B,KAAKC,OACFD,KAAKpC,WAAaoC,KAAKnC,MAAQmC,KAAKhC,oBAErBgC,KAAKnC,KAAkBmC,KAAKnC,IAI/CmC,KAAKrC,IACLqC,KAAKhC,qBACAgC,KAAKhC,qBAEFgC,KAAKnC,MAAQmC,KAAKhC,oBAejCgC,KAAK/B,WAAa+B,KAAKjC,eACrBiC,KAAKjC,eACLiC,KAAKlC,6CA6DRG,WAAY,sCAMZA,WAAY,mCAMb+B,KAAK/B,eACFiC,YAEAC,iDAOHH,KAAK/B,eACFiC,YAEAC,4CAyFXC,OAAOC,eAAeC,OAAO5C,EAAc6C,IAAK7C"}