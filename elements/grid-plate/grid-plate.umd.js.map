{"version":3,"file":"grid-plate.umd.js","sources":["grid-plate.umd.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport \"@polymer/iron-a11y-keys/iron-a11y-keys.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js\";\nimport \"@lrnwebcomponents/responsive-utility/responsive-utility.js\";\n/**\n`grid-plate`\nA grid plate based on a layout that manipulates it.\n\n* @demo demo/index.html\n\n@microcopy - the mental model for this element\n -\n\n*/\nlet GridPlate = Polymer({\n  _template: html`\n    <custom-style>\n      <style is=\"custom-style\" include=\"simple-colors\">\n        :host {\n          display: block;\n          --grid-plate-row-margin: 0px;\n          --grid-plate-row-padding: 0px;\n          --grid-plate-item-margin: 15px;\n          --grid-plate-editable-border-color: #ccc;\n          --grid-plate-active-border-color: #6cd;\n        }\n        :host .row {\n          width: 100%;\n          display: flex;\n          flex-wrap: wrap;\n          justify-content: space-between;\n          align-items: stretch;\n          margin: var(--grid-plate-row-margin);\n          padding: var(--grid-plate-row-padding);\n        }\n        :host .column {\n          width: 100%;\n          flex: 0 0 auto;\n          transition: all 0.5s;\n        }\n        :host([edit-mode]) .column {\n          min-height: 150px;\n        }\n\n        :host([edit-mode]) .column {\n          outline: 1px dotted var(--grid-plate-editable-border-color);\n        }\n        :host .column[style=\"min-height: unset\"] {\n          display: none;\n        }\n        :host([edit-mode]) .column[style=\"min-height: unset\"]:not(:empty) {\n          display: block;\n          outline: 1px solid red;\n          width: 20%;\n          margin-top: var(--grid-plate-item-margin);\n        }\n        :host([edit-mode])\n          .column[style=\"min-height: unset\"]:not(:empty):before {\n          content: \"Hidden Column (\" attr(id) \")\";\n          color: red;\n          margin: var(--grid-plate-item-margin);\n          padding: 15px 0;\n          min-height: 150px;\n        }\n        :host ::slotted(*) {\n          margin: var(--grid-plate-item-margin);\n          padding: 0;\n        }\n        :host ::slotted(*.mover) {\n          outline: 2px dashed var(--grid-plate-editable-border-color);\n          outline-offset: 4px;\n        }\n        :host ::slotted(*.active-item) {\n          outline: 2px dashed var(--grid-plate-active-border-color);\n          outline-offset: 4px;\n        }\n        :host ::slotted(*[data-draggable]:focus),\n        :host ::slotted(*[data-draggable]:hover),\n        :host ::slotted(*[data-draggable]:active) {\n          cursor: move;\n        }\n\n        :host([edit-mode]) .column.mover {\n          background-color: yellow;\n        }\n        :host .column[data-draggable].mover {\n          background-color: pink;\n        }\n\n        paper-icon-button {\n          display: none;\n          position: absolute;\n          margin: 0;\n          padding: 0;\n          outline: none;\n          width: 20px;\n          height: 20px;\n          color: black;\n          background-color: #eeeeee;\n          border-radius: 50%;\n          box-sizing: content-box !important;\n          z-index: 1;\n          min-width: unset;\n        }\n\n        paper-icon-button[disabled] {\n          color: #aaa;\n          background-color: #ddd;\n        }\n        paper-icon-button[disabled]:focus,\n        paper-icon-button[disabled]:hover {\n          cursor: not-allowed;\n        }\n        paper-icon-button.active {\n          display: block;\n        }\n\n        .button-holding-pen {\n          position: relative;\n        }\n      </style>\n    </custom-style>\n    <div class=\"button-holding-pen\">\n      <paper-icon-button\n        icon=\"icons:arrow-upward\"\n        title=\"move item up\"\n        id=\"up\"\n        on-tap=\"moveActiveElement\"\n      >\n      </paper-icon-button>\n      <paper-icon-button\n        icon=\"icons:arrow-forward\"\n        title=\"move item right\"\n        id=\"right\"\n        on-tap=\"moveActiveElement\"\n      >\n      </paper-icon-button>\n      <paper-icon-button\n        icon=\"icons:arrow-downward\"\n        title=\"move item down\"\n        id=\"down\"\n        on-tap=\"moveActiveElement\"\n      >\n      </paper-icon-button>\n      <paper-icon-button\n        icon=\"icons:arrow-back\"\n        title=\"move item left\"\n        id=\"left\"\n        on-tap=\"moveActiveElement\"\n      >\n      </paper-icon-button>\n    </div>\n    <div class=\"row\">\n      <div\n        class=\"column\"\n        id=\"col1\"\n        style$=\"[[_getColumnWidth(0,columnWidths)]]\"\n      >\n        <slot name=\"col-1\"></slot>\n      </div>\n      <div\n        class=\"column\"\n        id=\"col2\"\n        style$=\"[[_getColumnWidth(1,columnWidths)]]\"\n      >\n        <slot name=\"col-2\"></slot>\n      </div>\n      <div\n        class=\"column\"\n        id=\"col3\"\n        style$=\"[[_getColumnWidth(2,columnWidths)]]\"\n      >\n        <slot name=\"col-3\"></slot>\n      </div>\n      <div\n        class=\"column\"\n        id=\"col4\"\n        style$=\"[[_getColumnWidth(3,columnWidths)]]\"\n      >\n        <slot name=\"col-4\"></slot>\n      </div>\n      <div\n        class=\"column\"\n        id=\"col5\"\n        style$=\"[[_getColumnWidth(4,columnWidths)]]\"\n      >\n        <slot name=\"col-5\"></slot>\n      </div>\n      <div\n        class=\"column\"\n        id=\"col6\"\n        style$=\"[[_getColumnWidth(5,columnWidths)]]\"\n      >\n        <slot name=\"col-6\"></slot>\n      </div>\n    </div>\n    <iron-a11y-keys\n      stop-keyboard-event-propagation\n      target=\"[[__activeItem]]\"\n      keys=\"enter\"\n      on-keys-pressed=\"setActiveElement\"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target=\"[[__activeItem]]\"\n      keys=\"esc\"\n      on-keys-pressed=\"cancelActive\"\n    ></iron-a11y-keys>\n  `,\n\n  is: \"grid-plate\",\n\n  listeners: {\n    focusin: \"_focusIn\",\n    focusout: \"_focusOut\"\n  },\n\n  behaviors: [HAXBehaviors.PropertiesBehaviors],\n\n  properties: {\n    /**\n     * number of columns at this layout / responsive size\n     */\n    columns: {\n      type: Number,\n      computed: \"_getColumns(columnWidths)\",\n      reflectToAttribute: true\n    },\n    /**\n     * name of selected layout\n     */\n    columnWidths: {\n      type: String,\n      computed: \"_getColumnWidths(responsiveSize,layout,layouts)\"\n    },\n    /**\n     * If the grid plate is in a state where its items\n     * can be modified as far as order or column placement.\n     */\n    editMode: {\n      reflectToAttribute: true,\n      type: Boolean,\n      value: false,\n      observer: \"_editModeChanged\"\n    },\n    /**\n     * an object with a layout's column sizes\n     * at the current responsive width\n     */\n    layout: {\n      type: String,\n      value: \"1-1\",\n      reflectToAttribute: true\n    },\n    /**\n     * Predefined layouts of column sizes and various responsive widths. \n     * For example:```\n{\n  \"1-1-1-1\": {                         //the name of the layout\n    \"xs\": [\"100%\",\"100%\",\"100%\",\"100%] //the responsive width of each column when the grid is extra small\n    \"sm\": [\"50%\",\"50%\",\"50%\",\"50%\"]    //the responsive width of each column when the grid is small\n    \"md\": [\"50%\",\"50%\",\"50%\",\"50%\"]    //the responsive width of each column when the grid is medium\n    \"lg\": [\"25%\",\"25%\",\"25%\",\"25%\"]    //the responsive width of each column when the grid is large\n    \"xl\": [\"25%\",\"25%\",\"25%\",\"25%\"]    //the responsive width of each column when the grid is extra large\n  },\n  {...}\n}\n\n              \"1\": \"1: full width\",\n              \"1-1\": \"2: equal width\",\n              \"2-1\": \"2: wide and narrow\",\n              \"1-2\": \"2: narrow and wide\",\n              \"3-1\": \"2: wider and narrower\",\n              \"1-3\": \"2: narrower and wider\",\n              \"1-1-1\": \"3: equal width\",\n              \"2-1-1\": \"3: wide, narrow, and narrow\",\n              \"1-2-1\": \"3: narrow, wide, and narrow\",\n              \"1-1-2\": \"3: narrow,  narrow, and wide\",\n              \"1-1-1-1\": \"4: equal width\",\n     */\n    layouts: {\n      type: Object,\n      value: {\n        \"1\": {\n          columnLayout: \"1: full width\",\n          xs: [\"100%\"],\n          sm: [\"100%\"],\n          md: [\"100%\"],\n          lg: [\"100%\"],\n          xl: [\"100%\"]\n        },\n        \"1-1\": {\n          columnLayout: \"2: equal width\",\n          xs: [\"100%\", \"100%\"],\n          sm: [\"50%\", \"50%\"],\n          md: [\"50%\", \"50%\"],\n          lg: [\"50%\", \"50%\"],\n          xl: [\"50%\", \"50%\"]\n        },\n        \"2-1\": {\n          columnLayout: \"2: wide & narrow\",\n          xs: [\"100%\", \"100%\"],\n          sm: [\"50%\", \"50%\"],\n          md: [\"66.6666667%\", \"33.3333337%\"],\n          lg: [\"66.6666667%\", \"33.3333337%\"],\n          xl: [\"66.6666667%\", \"33.3333337%\"]\n        },\n        \"1-2\": {\n          columnLayout: \"2: narrow & wide\",\n          xs: [\"100%\", \"100%\"],\n          sm: [\"50%\", \"50%\"],\n          md: [\"33.3333333%\", \"66.6666667%\"],\n          lg: [\"33.3333333%\", \"66.6666667%\"],\n          xl: [\"33.3333333%\", \"66.6666667%\"]\n        },\n        \"3-1\": {\n          columnLayout: \"2: wider & narrower\",\n          xs: [\"100%\", \"100%\"],\n          sm: [\"50%\", \"50%\"],\n          md: [\"75%\", \"25%\"],\n          lg: [\"75%\", \"25%\"],\n          xl: [\"75%\", \"25%\"]\n        },\n        \"1-3\": {\n          columnLayout: \"2: narrower & wider\",\n          xs: [\"100%\", \"100%\"],\n          sm: [\"50%\", \"50%\"],\n          md: [\"25%\", \"75%\"],\n          lg: [\"25%\", \"75%\"],\n          xl: [\"25%\", \"75%\"]\n        },\n        \"1-1-1\": {\n          columnLayout: \"3: equal width\",\n          xs: [\"100%\", \"100%\", \"100%\"],\n          sm: [\"100%\", \"100%\", \"100%\"],\n          md: [\"33.3333333%\", \"33.3333333%\", \"33.3333333%\"],\n          lg: [\"33.3333333%\", \"33.3333333%\", \"33.3333333%\"],\n          xl: [\"33.3333333%\", \"33.3333333%\", \"33.3333333%\"]\n        },\n        \"2-1-1\": {\n          columnLayout: \"3: wide, narrow, and narrow\",\n          xs: [\"100%\", \"100%\", \"100%\"],\n          sm: [\"100%\", \"50%\", \"50%\"],\n          md: [\"50%\", \"25%\", \"25%\"],\n          lg: [\"50%\", \"25%\", \"25%\"],\n          xl: [\"50%\", \"25%\", \"25%\"]\n        },\n        \"1-2-1\": {\n          columnLayout: \"3: narrow, wide, and narrow\",\n          xs: [\"100%\", \"100%\", \"100%\"],\n          sm: [\"100%\", \"100%\", \"100%\"],\n          md: [\"25%\", \"50%\", \"25%\"],\n          lg: [\"25%\", \"50%\", \"25%\"],\n          xl: [\"25%\", \"50%\", \"25%\"]\n        },\n        \"1-1-2\": {\n          columnLayout: \"3: narrow, narrow, and wide\",\n          xs: [\"100%\", \"100%\", \"100%\"],\n          sm: [\"50%\", \"50%\", \"100%\"],\n          md: [\"25%\", \"25%\", \"50%\"],\n          lg: [\"25%\", \"25%\", \"50%\"],\n          xl: [\"25%\", \"25%\", \"50%\"]\n        },\n        \"1-1-1-1\": {\n          columnLayout: \"4: equal width\",\n          xs: [\"100%\", \"100%\", \"100%\", \"100%\"],\n          sm: [\"50%\", \"50%\", \"50%\", \"50%\"],\n          md: [\"25%\", \"25%\", \"25%\", \"25%\"],\n          lg: [\"25%\", \"25%\", \"25%\", \"25%\"],\n          xl: [\"25%\", \"25%\", \"25%\", \"25%\"]\n        },\n        \"1-1-1-1-1\": {\n          columnLayout: \"5: equal width\",\n          xs: [\"100%\", \"100%\", \"100%\", \"100%\", \"100%\"],\n          sm: [\"50%\", \"50%\", \"50%\", \"50%\", \"50%\"],\n          md: [\"20%\", \"20%\", \"20%\", \"20%\", \"20%\"],\n          lg: [\"20%\", \"20%\", \"20%\", \"20%\", \"20%\"],\n          xl: [\"20%\", \"20%\", \"20%\", \"20%\", \"20%\"]\n        },\n        \"1-1-1-1-1-1\": {\n          columnLayout: \"6: equal width\",\n          xs: [\"100%\", \"100%\", \"100%\", \"100%\", \"100%\", \"100%\"],\n          sm: [\"50%\", \"50%\", \"50%\", \"50%\", \"50%\", \"50%\"],\n          md: [\n            \"33.3333333%\",\n            \"33.3333333%\",\n            \"33.3333333%\",\n            \"33.3333333%\",\n            \"33.3333333%\",\n            \"33.3333333%\"\n          ],\n          lg: [\n            \"16.6666667%\",\n            \"16.6666667%\",\n            \"16.6666667%\",\n            \"16.6666667%\",\n            \"16.6666667%\",\n            \"16.6666667%\"\n          ],\n          xl: [\n            \"16.6666667%\",\n            \"16.6666667%\",\n            \"16.6666667%\",\n            \"16.6666667%\",\n            \"16.6666667%\",\n            \"16.6666667%\"\n          ]\n        }\n      }\n    },\n    /**\n     * Responsive size as `xs`, `sm`, `md`, `lg`, or `xl`\n     */\n    responsiveSize: {\n      type: String,\n      value: \"xs\",\n      reflectToAttribute: true\n    },\n    /**\n     * Track active item\n     */\n    __activeItem: {\n      type: Object,\n      observer: \"_activeItemChanged\"\n    }\n  },\n\n  /**\n   * Cancel active element\n   */\n  cancelActive: function(e) {\n    this.__activeItem = null;\n  },\n\n  /**\n   * Determines if the item can move a set number of slots.\n   *\n   * @param {object} the item\n   * @param {number} -1 for left or +1 for right\n   * @returns {boolean} if the item can move a set number of slots\n   */\n  canMoveSlot: function(item, before) {\n    let dir = before ? -1 : 1,\n      max = this.shadowRoot.querySelectorAll(\".column\").length,\n      col = item.getAttribute(\"slot\").split(\"-\"),\n      dest = parseInt(col[1]) + dir;\n    return dest >= 1 && dest <= max;\n  },\n\n  /**\n   * Moves an item a set number of slots.\n   *\n   * @param {object} the item\n   * @param {number} -1 for left or +1 for right\n   */\n  moveSlot: function(item, before) {\n    let dir = before ? -1 : 1,\n      col = item.getAttribute(\"slot\").split(\"-\"),\n      dest = parseInt(col[1]) + dir;\n    if (this.canMoveSlot(item, dir)) {\n      item.setAttribute(\"slot\", \"col-\" + dest);\n    }\n  },\n\n  /**\n   * Determines if the item can move a set number of slots.\n   *\n   * @param {object} the item\n   * @param {boolean} move item before previous? (false for move item after next)\n   * @returns {boolean} if the item can move a set number of slots\n   */\n  canMoveOrder: function(item, before) {\n    let target = before ? item.previousElementSibling : item.nextElementSibling;\n    return (\n      target !== null &&\n      target.getAttribute(\"slot\") === item.getAttribute(\"slot\")\n    );\n  },\n\n  /**\n   * Moves an item's order within a slot.\n   *\n   * @param {object} the item\n   * @param {boolean} move item before previous? (false for move item after next)\n   */\n  moveOrder: function(item, before = true) {\n    let dir = before ? -1 : 1;\n    if (this.canMoveOrder(item, before)) {\n      if (before) {\n        dom(this).insertBefore(\n          this.__activeItem,\n          this.__activeItem.previousElementSibling\n        );\n      } else {\n        dom(this).insertBefore(\n          this.__activeItem.nextElementSibling,\n          this.__activeItem\n        );\n      }\n    }\n  },\n\n  /**\n   * Move the active element based on which button got pressed.\n   */\n  moveActiveElement: function(e) {\n    var normalizedEvent = dom(e);\n    var local = normalizedEvent.localTarget;\n    // see if this was an up down left or right movement\n    switch (local.id) {\n      case \"up\":\n        this.moveOrder(this.__activeItem, true);\n        break;\n      case \"down\":\n        this.moveOrder(this.__activeItem, false);\n        break;\n      case \"left\":\n        this.moveSlot(this.__activeItem, true);\n        break;\n      case \"right\":\n        this.moveSlot(this.__activeItem, false);\n        break;\n    }\n    // ensure arrows are correctly positioned after the move\n    setTimeout(() => {\n      this.positionArrows(this.__activeItem);\n      this.__activeItem.focus();\n    }, 100);\n  },\n\n  /**\n   * Notice changes to what's active and ensure UX associated w/ it is visble\n   */\n  _activeItemChanged: function(newValue, oldValue) {\n    if (typeof newValue !== typeof undefined && newValue != null) {\n      // position arrows\n      newValue.classList.add(\"active-item\");\n      this.positionArrows(newValue);\n    } else if (newValue == null) {\n      this.positionArrows(newValue);\n    }\n    // if we had a previous value then remove the active item class\n    if (typeof oldValue !== typeof undefined && oldValue != null) {\n      oldValue.classList.remove(\"active-item\");\n      oldValue.blur();\n    }\n  },\n\n  /**\n   * Set the target element to active\n   */\n  setActiveElement: function(e) {\n    var normalizedEvent = dom(e);\n    var local = normalizedEvent.localTarget;\n    //this.$.up.focus();\n    this.$.right.focus();\n    e.preventDefault();\n    e.stopPropagation();\n  },\n  /**\n   * gets the column widths based on selected layout and current responsive width\n   *\n   * @param {string} a string that describes the current responsive width\n   * @param {string} the name of selected layout\n   * @param {object} predefined layouts of column sizes and various responsive widths\n   * @returns {object} an object with a layout's column sizes at the current responsive width\n   */\n  _getColumnWidths(responsiveSize = \"sm\", layout = \"1-1\", layouts) {\n    let newl = layouts[layout],\n      //how old layout names map to the new ones\n      oldLayouts = {\n        \"12\": \"1\",\n        \"8/4\": \"2-1\",\n        \"6/6\": \"1-1\",\n        \"4/8\": \"1-2\",\n        \"4/4/4\": \"1-1-1\",\n        \"3/3/3/3\": \"1-1-1-1\"\n      },\n      oldl = oldLayouts[layout];\n\n    if (newl !== undefined && newl[responsiveSize] !== undefined) {\n      //return the layout\n      return layouts[layout][responsiveSize];\n    } else if (\n      layouts[oldl] !== undefined &&\n      layouts[oldl][responsiveSize] !== undefined\n    ) {\n      //return new layout that maps to old one\n      return layouts[oldl][responsiveSize];\n    } else {\n      //return 2-column layout\n      return layouts[\"1-1\"][responsiveSize];\n    }\n  },\n\n  /**\n   * gets a given column's current width based on layout and current responsive width\n   *\n   * @param {number} the index of the column\n   * @param {object} an object with a layout's column sizes at the current responsive width\n   * @returns {string} a given column's current width based on layout and current responsive width\n   */\n  _getColumnWidth(column, columnWidths) {\n    return columnWidths !== undefined && columnWidths[column] !== undefined\n      ? \"width:\" + columnWidths[column]\n      : \"min-height: unset\";\n  },\n  /**\n   * gets a given column's current width based on layout and current responsive width\n   *\n   * @param {string} the name of selected layout\n   * @returns {number} the number of columns in this layout\n   */\n  _getColumns(columnWidths) {\n    return columnWidths.length;\n  },\n  /**\n   * Focus / tab / click event normalization\n   */\n  _focusIn: function(e) {\n    if (this.editMode) {\n      var normalizedEvent = dom(e);\n      var local = normalizedEvent.localTarget;\n      // only activate if we touch something that's in the slot of the grid plate\n      if (dom(local).parentNode === this) {\n        this.__activeItem = local;\n      }\n    }\n  },\n  /**\n   * Focus / tab / click event normalization\n   */\n  _focusOut: function(e) {\n    if (this.editMode) {\n      var normalizedEvent = dom(e);\n      var local = normalizedEvent.localTarget;\n      // @todo need to correctly de-focus when the element loses focus entirely\n      if (\n        local.parentNode === this ||\n        document.activeElement.parentNode === this ||\n        document.activeElement === this\n      ) {\n      } else {\n        //this.__activeItem = null;\n      }\n    }\n  },\n  /**\n   * Position the arrows to change directions around something\n   */\n  positionArrows: function(item) {\n    if (item == null) {\n      this.$.up.classList.remove(\"active\");\n      this.$.down.classList.remove(\"active\");\n      this.$.left.classList.remove(\"active\");\n      this.$.right.classList.remove(\"active\");\n    } else {\n      this.$.up.classList.add(\"active\");\n      this.$.down.classList.add(\"active\");\n      this.$.left.classList.add(\"active\");\n      this.$.right.classList.add(\"active\");\n\n      // ensure we disable invalid options contextually\n      // test for an element above us\n      this.$.up.disabled = !this.canMoveOrder(item, true);\n      // test for an element below us\n      this.$.down.disabled = !this.canMoveOrder(item, false);\n      // test for a column to the left of us\n      this.$.left.disabled = !this.canMoveSlot(item, true);\n      // test for a column to the right of us\n      this.$.right.disabled = !this.canMoveSlot(item, false);\n\n      // get coordinates of the page and active element\n      let bodyRect = this.getBoundingClientRect();\n      let elemRect = item.getBoundingClientRect();\n      let topOffset = elemRect.top - bodyRect.top;\n      let leftOffset = elemRect.left - bodyRect.left;\n\n      // set the arrows to position correctly at all 4 sides\n      this.$.up.style.top = topOffset - 20 + \"px\";\n      this.$.down.style.top = topOffset + elemRect.height + \"px\";\n      this.$.left.style.top = topOffset + elemRect.height / 2 + \"px\";\n      this.$.right.style.top = topOffset + elemRect.height / 2 + \"px\";\n\n      this.$.up.style.left = leftOffset + elemRect.width / 2 - 10 + \"px\";\n      this.$.down.style.left = leftOffset + elemRect.width / 2 - 10 + \"px\";\n      this.$.left.style.left = leftOffset - 20 + \"px\";\n      this.$.right.style.left = leftOffset + elemRect.width + \"px\";\n    }\n  },\n\n  /**\n   * Notice edit state has changed\n   */\n  _editModeChanged: function(newValue, oldValue) {\n    // flipping from false to true\n    let children = dom(this).getEffectiveChildNodes();\n    if (typeof children === \"object\") {\n      if (newValue && !oldValue) {\n        // walk the children and apply the draggable state needed\n        for (var i in children) {\n          if (typeof children[i].tagName !== typeof undefined) {\n            children[i].addEventListener(\"drop\", this.dropEvent.bind(this));\n            children[i].addEventListener(\n              \"dragstart\",\n              this.dragStart.bind(this)\n            );\n            children[i].addEventListener(\"dragend\", this.dragEnd.bind(this));\n            children[i].addEventListener(\"dragover\", function(e) {\n              e.preventDefault();\n            });\n            children[i].setAttribute(\"draggable\", true);\n            children[i].setAttribute(\"data-draggable\", true);\n            // ensure they can be focused\n            children[i].setAttribute(\"tabindex\", 0);\n          }\n        }\n        async.microTask.run(() => {\n          for (var j = 1; j <= this.columns.length; j++) {\n            if (this.shadowRoot.querySelector(\"#col\" + j) !== undefined) {\n              this.shadowRoot\n                .querySelector(\"#col\" + j)\n                .addEventListener(\"drop\", this.dropEvent.bind(this));\n              this.shadowRoot\n                .querySelector(\"#col\" + j)\n                .addEventListener(\"dragstart\", this.dragStart.bind(this));\n              this.shadowRoot\n                .querySelector(\"#col\" + j)\n                .addEventListener(\"dragend\", this.dragEnd.bind(this));\n              this.shadowRoot\n                .querySelector(\"#col\" + j)\n                .addEventListener(\"dragover\", function(e) {\n                  e.preventDefault();\n                });\n              this.shadowRoot\n                .querySelector(\"#col\" + j)\n                .setAttribute(\"data-draggable\", true);\n            }\n          }\n        });\n      }\n      // flipping from true to false\n      else if (!newValue && oldValue) {\n        // walk the children and apply the draggable state needed\n        for (var i in children) {\n          if (typeof children[i].tagName !== typeof undefined) {\n            children[i].removeEventListener(\"drop\", this.dropEvent.bind(this));\n            children[i].removeEventListener(\n              \"dragstart\",\n              this.dragStart.bind(this)\n            );\n            children[i].removeEventListener(\"dragend\", this.dragEnd.bind(this));\n            children[i].removeEventListener(\"dragover\", function(e) {\n              e.preventDefault();\n            });\n            children[i].removeAttribute(\"draggable\");\n            children[i].removeAttribute(\"data-draggable\");\n            children[i].removeAttribute(\"tabindex\");\n          }\n        }\n        async.microTask.run(() => {\n          for (var j = 1; j <= this.columns.length; j++) {\n            if (this.shadowRoot.querySelector(\"#col\" + j) !== undefined) {\n              this.shadowRoot\n                .querySelector(\"#col\" + j)\n                .removeEventListener(\"drop\", this.dropEvent.bind(this));\n              this.shadowRoot\n                .querySelector(\"#col\" + j)\n                .removeEventListener(\"dragstart\", this.dragStart.bind(this));\n              this.shadowRoot\n                .querySelector(\"#col\" + j)\n                .removeEventListener(\"dragend\", this.dragEnd.bind(this));\n              this.shadowRoot\n                .querySelector(\"#col\" + j)\n                .removeEventListener(\"dragover\", function(e) {\n                  e.preventDefault();\n                });\n              this.shadowRoot\n                .querySelector(\"#col\" + j)\n                .removeAttribute(\"data-draggable\");\n            }\n          }\n        });\n      }\n    }\n  },\n\n  /**\n   * Drop an item onto another\n   */\n  dropEvent: function(e) {\n    var normalizedEvent = dom(e);\n    var local = normalizedEvent.localTarget;\n    // if we have a slot on what we dropped into then we need to mirror that item\n    // and place ourselves below it in the DOM\n    if (\n      typeof this.__activeItem !== typeof undefined &&\n      typeof local !== typeof undefined &&\n      local.getAttribute(\"slot\") != null &&\n      this.__activeItem !== local\n    ) {\n      this.__activeItem.setAttribute(\"slot\", local.getAttribute(\"slot\"));\n      dom(this).insertBefore(this.__activeItem, local);\n      // ensure that if we caught this event we process it\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    // special case for dropping on an empty column or between items\n    // which could involve a miss on the column\n    else if (local.tagName === \".column\") {\n      var col = local.id.replace(\"col\", \"\");\n      this.__activeItem.setAttribute(\"slot\", \"col-\" + col);\n      dom(this).appendChild(this.__activeItem);\n      // ensure that if we caught this event we process it\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    let children = dom(this).children;\n    // walk the children and apply the draggable state needed\n    for (var i in children) {\n      if (typeof children[i].classList !== typeof undefined) {\n        children[i].classList.remove(\"mover\");\n      }\n    }\n    for (var j = 1; j <= this.columns.length; j++) {\n      if (this.shadowRoot.querySelector(\"#col\" + j) !== undefined) {\n        this.shadowRoot.querySelector(\"#col\" + j).classList.remove(\"mover\");\n      }\n    }\n    // position arrows / set focus in case the DOM got updated above\n    setTimeout(() => {\n      this.positionArrows(this.__activeItem);\n      this.__activeItem.focus();\n    }, 100);\n  },\n\n  /**\n   * Start a drag event, this is an element being dragged\n   */\n  dragStart: function(e) {\n    let children = dom(this).children;\n    // walk the children and apply the draggable state needed\n    for (var i in children) {\n      if (typeof children[i].classList !== typeof undefined) {\n        children[i].classList.add(\"mover\");\n      }\n    }\n    for (var j = 1; j <= this.columns.length; j++) {\n      if (this.shadowRoot.querySelector(\"#col\" + j) !== undefined) {\n        this.shadowRoot.querySelector(\"#col\" + j).classList.add(\"mover\");\n      }\n    }\n  },\n\n  /**\n   * When we end dragging ensure we remove the mover class.\n   */\n  dragEnd: function(e) {\n    let children = dom(this).children;\n    // walk the children and apply the draggable state needed\n    for (var i in children) {\n      if (typeof children[i].classList !== typeof undefined) {\n        children[i].classList.remove(\"mover\");\n      }\n    }\n    for (var j = 1; j <= this.columns.length; j++) {\n      if (this.shadowRoot.querySelector(\"#col\" + j) !== undefined) {\n        this.shadowRoot.querySelector(\"#col\" + j).classList.remove(\"mover\");\n      }\n    }\n  },\n  /**\n   * Attached to the DOM, now fire.\n   */\n  attached: function() {\n    let root = this;\n    // listen for HAX if it's around\n    document.body.addEventListener(\n      \"hax-store-property-updated\",\n      root._haxStorePropertyUpdated.bind(root)\n    );\n    // listen for HAX insert events if it exists\n    document.body.addEventListener(\n      \"hax-insert-content\",\n      root.haxInsertContent.bind(root)\n    );\n    window.ResponsiveUtility.requestAvailability();\n    window.dispatchEvent(\n      new CustomEvent(\"responsive-element\", {\n        detail: {\n          element: root,\n          attribute: \"responsive-size\",\n          relativeToParent: true\n        }\n      })\n    );\n    // Establish hax property binding\n    let options = {},\n      layouts = Object.keys(root.layouts),\n      getOptions = function() {\n        //loop through all the supplied layouts to get the HAX layout options & descriptions\n        for (let i = 0; i < layouts.length; i++) {\n          options[layouts[i]] = root.layouts[layouts[i]].columnLayout;\n        }\n      };\n    getOptions();\n    let props = {\n      canScale: true,\n      canPosition: true,\n      canEditSource: false,\n      settings: {\n        quick: [],\n        configure: [\n          {\n            property: \"layout\",\n            title: \"Column Layout\",\n            description:\n              \"Style to present these items (may change for small screens)\",\n            inputMethod: \"select\",\n            options: options\n          }\n        ],\n        advanced: []\n      },\n      saveOptions: {\n        unsetAttributes: [\"__active-item\", \"edit-mode\"]\n      }\n    };\n    root.setHaxProperties(props);\n  },\n\n  /**\n   * Insert event noticed by HAX\n   */\n  haxInsertContent: function(e) {\n    // see if WE are the thing that's active when insert was fired\n    if (this === window.HaxStore.instance.activeContainerNode) {\n      // trick events into rebinding since this event is only possible\n      // when we are in an edit state\n      this.editMode = false;\n      // delay and then set it back, re-applying all events\n      setTimeout(() => {\n        this.editMode = true;\n        // reposition arrows on what had active status\n        this.positionArrows(this.__activeItem);\n        // focus which then hax will kick in\n        this.__activeItem.focus();\n      }, 250);\n    }\n  },\n\n  /**\n   * Store updated, sync.\n   */\n  _haxStorePropertyUpdated: function(e) {\n    if (\n      e.detail &&\n      typeof e.detail.value !== typeof undefined &&\n      e.detail.property\n    ) {\n      if (typeof e.detail.value === \"object\") {\n        this.set(e.detail.property, null);\n      }\n      this.set(e.detail.property, e.detail.value);\n    }\n  }\n});\nexport { GridPlate };\n"],"names":["GridPlate","Polymer","_template","html","is","listeners","focusin","focusout","behaviors","HAXBehaviors","PropertiesBehaviors","properties","columns","type","Number","computed","reflectToAttribute","columnWidths","String","editMode","Boolean","value","observer","layout","layouts","Object","columnLayout","xs","sm","md","lg","xl","responsiveSize","__activeItem","cancelActive","e","canMoveSlot","item","before","dir","max","this","shadowRoot","querySelectorAll","length","col","getAttribute","split","dest","parseInt","moveSlot","setAttribute","canMoveOrder","target","previousElementSibling","nextElementSibling","moveOrder","dom","insertBefore","moveActiveElement","localTarget","id","setTimeout","_this","positionArrows","focus","_activeItemChanged","newValue","oldValue","_typeof","classList","add","remove","blur","setActiveElement","$","right","preventDefault","stopPropagation","_getColumnWidths","newl","oldl","undefined","_getColumnWidth","column","_getColumns","_focusIn","local","parentNode","_focusOut","document","activeElement","up","down","left","disabled","bodyRect","getBoundingClientRect","elemRect","topOffset","top","leftOffset","style","height","width","_editModeChanged","children","getEffectiveChildNodes","i","tagName","addEventListener","dropEvent","bind","dragStart","dragEnd","async","run","j","_this2","querySelector","removeEventListener","removeAttribute","replace","appendChild","_this3","attached","root","body","_haxStorePropertyUpdated","haxInsertContent","window","ResponsiveUtility","requestAvailability","dispatchEvent","CustomEvent","detail","element","attribute","relativeToParent","options","keys","getOptions","props","canScale","canPosition","canEditSource","settings","quick","configure","property","title","description","inputMethod","advanced","saveOptions","unsetAttributes","setHaxProperties","HaxStore","instance","activeContainerNode","_this4","set"],"mappings":"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"}