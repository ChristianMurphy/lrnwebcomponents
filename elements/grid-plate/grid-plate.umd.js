!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@lrnwebcomponents/hax-iconset/hax-iconset.js"),require("@polymer/iron-icons/hardware-icons.js"),require("@polymer/paper-icon-button/paper-icon-button.js"),require("lit-element/lit-element.js"),require("@lrnwebcomponents/responsive-utility/responsive-utility.js")):"function"==typeof define&&define.amd?define(["exports","@lrnwebcomponents/hax-iconset/hax-iconset.js","@polymer/iron-icons/hardware-icons.js","@polymer/paper-icon-button/paper-icon-button.js","lit-element/lit-element.js","@lrnwebcomponents/responsive-utility/responsive-utility.js"],t):t((e=e||self).GridPlate={},null,null,null,e.litElement_js)}(this,function(e,t,n,o,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o,i,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return o=this,!(i=n)||"object"!=typeof i&&"function"!=typeof i?u(o):i}}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function v(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function m(){var e=v(['\n            <div class="button-holding-pen">\n              <paper-icon-button\n                class="direction"\n                icon="hax:arrow-all"\n                title="Drag"\n                draggable="true"\n                id="drag"\n                @dragstart="','"\n                @dragend="','"\n              >\n              </paper-icon-button>\n              <paper-icon-button\n                class="direction"\n                icon="hardware:keyboard-arrow-up"\n                title="Move up"\n                id="up"\n                @click="','"\n              >\n              </paper-icon-button>\n              <paper-icon-button\n                class="direction"\n                icon="hardware:keyboard-arrow-right"\n                title="Move right"\n                id="right"\n                @click="','"\n              >\n              </paper-icon-button>\n              <paper-icon-button\n                class="direction"\n                icon="hardware:keyboard-arrow-down"\n                title="Move down"\n                id="down"\n                @click="','"\n              >\n              </paper-icon-button>\n              <paper-icon-button\n                class="direction"\n                icon="hardware:keyboard-arrow-left"\n                title="Move left"\n                id="left"\n                @click="','"\n              >\n              </paper-icon-button>\n            </div>\n          ']);return m=function(){return e},e}function g(){var e=v(["\n      ",'\n      <div class="row">\n        <div\n          class="column"\n          id="col1"\n          data-label="column 1"\n          .style="','"\n        >\n          <slot name="col-1"></slot>\n        </div>\n        <div\n          class="column"\n          id="col2"\n          data-label="column 2"\n          .style="','"\n        >\n          <slot name="col-2"></slot>\n        </div>\n        <div\n          class="column"\n          id="col3"\n          data-label="column 3"\n          .style="','"\n        >\n          <slot name="col-3"></slot>\n        </div>\n        <div\n          class="column"\n          id="col4"\n          data-label="column 4"\n          .style="','"\n        >\n          <slot name="col-4"></slot>\n        </div>\n        <div\n          class="column"\n          id="col5"\n          data-label="column 5"\n          .style="','"\n        >\n          <slot name="col-5"></slot>\n        </div>\n        <div\n          class="column"\n          id="col6"\n          data-label="column 6"\n          .style="','"\n        >\n          <slot name="col-6"></slot>\n        </div>\n      </div>\n    ']);return g=function(){return e},e}function f(){var e=v(['\n        :host {\n          display: block;\n          --grid-plate-row-margin: 0px;\n          --grid-plate-row-padding: 0px;\n          --grid-plate-item-margin: 15px;\n          --grid-plate-editable-border-color: var(\n            --simple-colors-default-theme-grey-4,\n            #dddddd\n          );\n          --grid-plate-active-border-color: var(\n            --simple-colors-default-theme-cyan-7,\n            #3b97e3\n          );\n          --grid-plate-target-background-color: var(\n            --simple-colors-default-theme-cyan-2,\n            #9beaff\n          );\n          --grid-plate-possible-target-background-color: transparent;\n          --grid-plate-selected-background-color: #ffffff;\n          --grid-plate-arrow-color: #ffffff;\n          --grid-plate-arrow-color-hover: #000000;\n          --grid-plate-arrow-bg: var(\n            --simple-colors-default-theme-cyan-7,\n            #3b97e3\n          );\n        }\n        :host .row {\n          width: 100%;\n          display: flex;\n          flex-wrap: wrap;\n          justify-content: space-between;\n          align-items: stretch;\n          margin: var(--grid-plate-row-margin);\n          padding: var(--grid-plate-row-padding);\n        }\n        :host .column {\n          width: 100%;\n          flex: 0 0 auto;\n        }\n        :host([edit-mode]) .column {\n          min-height: 150px;\n          transition: 0.2s color linear, 0.2s background-color linear;\n        }\n        :host([edit-mode]) {\n          min-height: 150px;\n        }\n        :host([edit-mode]) .column {\n          outline: 1px dashed var(--grid-plate-editable-border-color);\n        }\n        :host .column:empty[style="min-height: unset;"] {\n          display: none;\n          outline: none;\n        }\n        :host([edit-mode]) .column[style="min-height: unset;"]:not(:empty) {\n          display: block;\n          opacity: 0.4;\n        }\n        :host([edit-mode])\n          .column[style="min-height: unset;"]:not(:empty):hover {\n          opacity: 1;\n        }\n        :host([edit-mode])\n          .column[style="min-height: unset;"]:not(:empty):before {\n          margin: var(--grid-plate-item-margin);\n          color: red;\n          font-size: 14px;\n          font-weight: bold;\n          padding: 0px;\n        }\n        :host .column ::slotted(*) {\n          margin: var(--grid-plate-item-margin);\n          padding: var(--grid-plate-item-margin);\n          max-width: calc(100% - 60px);\n          max-width: -webkit-fill-available;\n          transition: 0.2s color linear, 0.2s background-color linear;\n        }\n        :host([edit-mode]) .column ::slotted(img) {\n          display: block;\n        }\n        :host([edit-mode]) .column ::slotted(.grid-plate-active-item) {\n          outline: 1px solid var(--grid-plate-active-border-color);\n          background-color: var(--grid-plate-selected-background-color);\n        }\n        :host([edit-mode]) .column ::slotted(ol.grid-plate-active-item),\n        :host([edit-mode]) .column ::slotted(ul.grid-plate-active-item) {\n          outline-offset: 8px;\n        }\n        :host([edit-mode]) .column ::slotted(*:focus),\n        :host([edit-mode]) .column ::slotted(*:hover),\n        :host([edit-mode]) .column ::slotted(*:active) {\n          outline: 1px solid var(--grid-plate-editable-border-color);\n        }\n        :host([edit-mode]) .column ::slotted(ol:focus),\n        :host([edit-mode]) .column ::slotted(ol:hover),\n        :host([edit-mode]) .column ::slotted(ol:active),\n        :host([edit-mode]) .column ::slotted(ul:focus),\n        :host([edit-mode]) .column ::slotted(ul:hover),\n        :host([edit-mode]) .column ::slotted(ul:active) {\n          outline-offset: 8px;\n        }\n        :host([edit-mode]) #bodycontainer ::slotted(*.hax-moving) {\n          outline: 1px solid var(--hax-body-active-outline);\n        }\n        :host([edit-mode]) .column ::slotted(img.hax-hovered),\n        :host([edit-mode]) .column ::slotted(*.hax-hovered):before {\n          background-color: var(\n            --grid-plate-target-background-color\n          ) !important;\n          outline: solid 2px var(--grid-plate-active-border-color);\n        }\n        :host([edit-mode]) .column.hax-hovered {\n          background-color: var(\n            --grid-plate-target-background-color\n          ) !important;\n          outline: solid 2px var(--grid-plate-active-border-color);\n          z-index: 2;\n        }\n        paper-icon-button {\n          display: none;\n          position: absolute;\n          margin: 0;\n          padding: 0;\n          outline: none;\n          width: 20px;\n          height: 20px;\n          color: var(--grid-plate-arrow-color);\n          opacity: 1;\n          background-color: var(--grid-plate-arrow-bg);\n          border-radius: none;\n          box-sizing: content-box !important;\n          z-index: 2;\n          min-width: unset;\n          transition: 0.2s color linear, 0.2s background-color linear;\n        }\n        paper-icon-button:hover {\n          opacity: 1;\n          visibility: visible;\n          color: var(--grid-plate-arrow-color-hover);\n        }\n        #drag {\n          cursor: move;\n        }\n        paper-icon-button[disabled] {\n          opacity: 0.5;\n        }\n        paper-icon-button[disabled]:focus,\n        paper-icon-button[disabled]:hover {\n          cursor: not-allowed;\n        }\n        paper-icon-button.active {\n          display: block;\n        }\n\n        .button-holding-pen {\n          position: relative;\n        }\n        .button-holding-pen[hidden] {\n          display: none;\n        }\n      ']);return f=function(){return e},e}var b=function e(){a(this,e),this.resizeTimer=null,this.activeItem=null,this.layouts={1:{columnLayout:"1: full width",xs:["100%"],sm:["100%"],md:["100%"],lg:["100%"],xl:["100%"]},"1-1":{columnLayout:"2: equal width",xs:["100%","100%"],sm:["50%","50%"],md:["50%","50%"],lg:["50%","50%"],xl:["50%","50%"]},"2-1":{columnLayout:"2: wide & narrow",xs:["100%","100%"],sm:["50%","50%"],md:["66.6666667%","33.3333337%"],lg:["66.6666667%","33.3333337%"],xl:["66.6666667%","33.3333337%"]},"1-2":{columnLayout:"2: narrow & wide",xs:["100%","100%"],sm:["50%","50%"],md:["33.3333333%","66.6666667%"],lg:["33.3333333%","66.6666667%"],xl:["33.3333333%","66.6666667%"]},"3-1":{columnLayout:"2: wider & narrower",xs:["100%","100%"],sm:["50%","50%"],md:["75%","25%"],lg:["75%","25%"],xl:["75%","25%"]},"1-3":{columnLayout:"2: narrower & wider",xs:["100%","100%"],sm:["50%","50%"],md:["25%","75%"],lg:["25%","75%"],xl:["25%","75%"]},"1-1-1":{columnLayout:"3: equal width",xs:["100%","100%","100%"],sm:["100%","100%","100%"],md:["33.3333333%","33.3333333%","33.3333333%"],lg:["33.3333333%","33.3333333%","33.3333333%"],xl:["33.3333333%","33.3333333%","33.3333333%"]},"2-1-1":{columnLayout:"3: wide, narrow, and narrow",xs:["100%","100%","100%"],sm:["100%","50%","50%"],md:["50%","25%","25%"],lg:["50%","25%","25%"],xl:["50%","25%","25%"]},"1-2-1":{columnLayout:"3: narrow, wide, and narrow",xs:["100%","100%","100%"],sm:["100%","100%","100%"],md:["25%","50%","25%"],lg:["25%","50%","25%"],xl:["25%","50%","25%"]},"1-1-2":{columnLayout:"3: narrow, narrow, and wide",xs:["100%","100%","100%"],sm:["50%","50%","100%"],md:["25%","25%","50%"],lg:["25%","25%","50%"],xl:["25%","25%","50%"]},"1-1-1-1":{columnLayout:"4: equal width",xs:["100%","100%","100%","100%"],sm:["50%","50%","50%","50%"],md:["25%","25%","25%","25%"],lg:["25%","25%","25%","25%"],xl:["25%","25%","25%","25%"]},"1-1-1-1-1":{columnLayout:"5: equal width",xs:["100%","100%","100%","100%","100%"],sm:["50%","50%","50%","50%","50%"],md:["20%","20%","20%","20%","20%"],lg:["20%","20%","20%","20%","20%"],xl:["20%","20%","20%","20%","20%"]},"1-1-1-1-1-1":{columnLayout:"6: equal width",xs:["100%","100%","100%","100%","100%","100%"],sm:["50%","50%","50%","50%","50%","50%"],md:["33.3333333%","33.3333333%","33.3333333%","33.3333333%","33.3333333%","33.3333333%"],lg:["16.6666667%","16.6666667%","16.6666667%","16.6666667%","16.6666667%","16.6666667%"],xl:["16.6666667%","16.6666667%","16.6666667%","16.6666667%","16.6666667%","16.6666667%"]}},this.options={};for(var t=Object.keys(this.layouts),n=1;n<t.length;n++)this.options[t[n]]=this.layouts[t[n]].columnLayout},y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,i.LitElement);var t=h(n);function n(){var e;return a(this,n),(e=t.call(this)).droppable=!1,e.ignoreHax=!1,e.hideOps=!1,e.breakpointSm=900,e.breakpointMd=1200,e.breakpointLg=1500,e.breakpointXl=1800,e.columns=6,e.disableResponsive=!1,e.editMode=!1,window.HaxStore&&window.HaxStore.instance&&(e.editMode=window.HaxStore.instance.editMode),e.layout="1-1",e.layouts=(new b).layouts,e.responsiveSize="xs",setTimeout(function(){e.addEventListener("focusin",e._focusIn.bind(u(e)))},0),window.ResponsiveUtility.requestAvailability(),e}return l(n,null,[{key:"styles",get:function(){return[i.css(f())]}}]),l(n,[{key:"render",value:function(){return i.html(g(),this.hideOps?"":i.html(m(),this.dragStart,this.dragEnd,this.moveActiveElement,this.moveActiveElement,this.moveActiveElement,this.moveActiveElement),this._getColumnWidth(0,this.__columnWidths),this._getColumnWidth(1,this.__columnWidths),this._getColumnWidth(2,this.__columnWidths),this._getColumnWidth(3,this.__columnWidths),this._getColumnWidth(4,this.__columnWidths),this._getColumnWidth(5,this.__columnWidths))}},{key:"validateElementSlot",value:function(e){return["col-1","col-2","col-3","col-4","col-5","col-6"].includes(e.getAttribute("slot"))}},{key:"connectedCallback",value:function(){var e=this;p(d(n.prototype),"connectedCallback",this).call(this),this.observer=new MutationObserver(function(t){t.forEach(function(t){e.editMode&&(t.addedNodes.forEach(function(t){t.tagName&&(null!=t.getAttribute("slot")&&e.validateElementSlot(t)||(e.__slot?(t.setAttribute("slot",e.__slot),e.__slot=null):t.setAttribute("slot","col-1")),setTimeout(function(){t.addEventListener("drop",e.dropEvent.bind(e)),t.addEventListener("dragenter",e.dragEnter.bind(e)),t.addEventListener("dragleave",e.dragLeave.bind(e)),t.addEventListener("dragend",e.dragEnd.bind(e)),t.addEventListener("dragover",function(e){e.preventDefault()}),"IMG"===t.tagName&&t.setAttribute("draggable",!1),t.setAttribute("tabindex",0)},50))}),t.removedNodes.forEach(function(t){t.tagName&&(t.removeEventListener("drop",e.dropEvent.bind(e)),t.removeEventListener("dragenter",e.dragEnter.bind(e)),t.removeEventListener("dragleave",e.dragLeave.bind(e)),t.removeEventListener("dragover",function(e){e.preventDefault()}),"IMG"===t.tagName&&t.removeAttribute("draggable"),t.removeAttribute("tabindex"))}))})}),this.observer.observe(this,{childList:!0}),window.addEventListener("keydown",this._onKeyDown.bind(this)),window.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this)),window.addEventListener("load",this.resize.bind(this)),window.addEventListener("resize",this.resizeListener.bind(this))}},{key:"resizeListener",value:function(e){var t=this;this.activeItem&&(clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){t.positionArrows(t.activeItem)},50))}},{key:"_onKeyDown",value:function(e){if(this.editMode&&this.getAttribute("contenteditable"))switch(e.key){case"Enter":if(window.HaxStore&&window.HaxStore.instance&&window.HaxStore.instance.isTextElement(this.activeItem))return this.__slot=this.activeItem.getAttribute("slot"),!0;this.hideOps||this.shadowRoot.querySelector("#right").focus();break;case"Escape":this.activeItem=null}}},{key:"firstUpdated",value:function(e){window.dispatchEvent(new CustomEvent("responsive-element",{detail:{element:this,attribute:"responsive-size",relativeToParent:!1,sm:this.breakpointSm,md:this.breakpointMd,lg:this.breakpointLg,xl:this.breakpointXl}}));for(var t=1;t<=this.columns;t++)if(void 0!==this.shadowRoot.querySelector("#col"+t)){var n=this.shadowRoot.querySelector("#col"+t);n.addEventListener("drop",this.dropEvent.bind(this)),n.addEventListener("dragenter",this.dragEnter.bind(this)),n.addEventListener("dragleave",this.dragLeave.bind(this)),n.addEventListener("dragover",function(e){e.preventDefault()})}this.__columnWidths=this._getColumnWidths(this.responsiveSize,this.layout,this.layouts,this.disableResponsive)}},{key:"disconnectedCallback",value:function(){window.removeEventListener("keydown",this._onKeyDown.bind(this)),window.removeEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this)),window.removeEventListener("load",this.resize.bind(this)),window.removeEventListener("resize",this.resizeListener.bind(this)),this.observer.disconnect(),p(d(n.prototype),"disconnectedCallback",this).call(this)}},{key:"updated",value:function(e){var t=this;e.forEach(function(e,n){switch(["responsiveSize","layout","layouts","disableResponsive"].includes(n)&&(t.__columnWidths=t._getColumnWidths(t.responsiveSize,t.layout,t.layouts,t.disableResponsive)),n){case"droppable":t._droppableChanged(t[n],e);break;case"editMode":t._editModeChanged(t[n],e),t.resize();break;case"activeItem":t._activeItemChanged(t[n],e);break;case"__columnWidths":t.resize();break;case"disableResponsive":t.dispatchEvent(new CustomEvent("disable-responsive-changed",{detail:t[n]}))}})}},{key:"resize",value:function(){window.dispatchEvent(new Event("resize"))}},{key:"preProcessHaxInsertContent",value:function(e){return delete e.properties.activeItem,e}},{key:"_droppableChanged",value:function(e){e&&(this.editMode=!0)}},{key:"canMoveSlot",value:function(e,t){var n=t?-1:1,o=this.shadowRoot.querySelectorAll(".column").length,i=e.getAttribute("slot").split("-"),r=parseInt(i[1])+n;return r>=1&&r<=o}},{key:"moveSlot",value:function(e,t){var n=t?-1:1,o=e.getAttribute("slot").split("-"),i=parseInt(o[1])+n;e.setAttribute("slot","col-"+i)}},{key:"canMoveOrder",value:function(e,t){var n=e.getAttribute("slot"),o=this.shadowRoot.querySelector("slot[name='".concat(n,"']")).assignedNodes({flatten:!0}),i=null,a=0;for(var s in o)e===o[s]&&(a=s);return t&&parseInt(a)-1>=0?i=o[parseInt(a)-1]:!t&&parseInt(a)+1<=o.length-1&&(i=o[parseInt(a)+1]),null!==i&&"undefined"!==r(i)}},{key:"moveOrder",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.getAttribute("slot"),o=this.shadowRoot.querySelector("slot[name='".concat(n,"']")).assignedNodes({flatten:!0}),i=null,r=0;for(var a in o)e===o[a]&&(r=a);t?(i=o[parseInt(r)-1],this.insertBefore(this.activeItem,i)):(i=o[parseInt(r)+1],this.insertBefore(i,this.activeItem))}},{key:"moveActiveElement",value:function(e){switch(e.target.id){case"up":this.moveOrder(this.activeItem,!0);break;case"down":this.moveOrder(this.activeItem,!1);break;case"left":this.moveSlot(this.activeItem,!0);break;case"right":this.moveSlot(this.activeItem,!1)}this.activeItem&&"function"==typeof this.activeItem.focus&&(this.positionArrows(this.activeItem),this.activeItem.focus()),this.__sortChildren()}},{key:"_activeItemChanged",value:function(e,t){this.querySelectorAll(".grid-plate-active-item").forEach(function(e){e.classList.remove("grid-plate-active-item")}),"undefined"!==r(e)&&null!=e?(e.classList.add("grid-plate-active-item"),this.positionArrows(e)):null==e&&this.positionArrows(e),"undefined"!==r(t)&&null!=t&&t.blur()}},{key:"_getColumnWidths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sm",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1-1",n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(n){var i=n[t],a=!1!==o?"xl":e,s={12:"1","8/4":"2-1","6/6":"1-1","4/8":"1-2","4/4/4":"1-1-1","3/3/3/3":"1-1-1-1"}[t];if(void 0!==i&&void 0!==i[a])return n[t][a];if(void 0!==n[s]&&void 0!==n[s][a])return n[s][a];if("undefined"!==r(n["1-1"]))return n["1-1"][a]}}},{key:"_getColumnWidth",value:function(e,t){return void 0!==t&&void 0!==t[e]?"width:"+t[e]:"min-height: unset"}},{key:"_getColumns",value:function(e){return e.length}},{key:"_focusIn",value:function(e){if(this.editMode){var t=e.target;t.parentNode===this&&(this.activeItem=t)}}},{key:"positionArrows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hideOps)if(null==e)this.shadowRoot.querySelectorAll(".direction").forEach(function(e){t?"drag"!=e.id&&e.classList.remove("active"):e.classList.remove("active")});else{this.shadowRoot.querySelectorAll(".direction").forEach(function(e){e.classList.add("active")}),this.shadowRoot.querySelector("#up").disabled=!this.canMoveOrder(e,!0),this.shadowRoot.querySelector("#down").disabled=!this.canMoveOrder(e,!1),this.shadowRoot.querySelector("#left").disabled=!this.canMoveSlot(e,!0),this.shadowRoot.querySelector("#right").disabled=!this.canMoveSlot(e,!1);var n=this.getBoundingClientRect(),o=e.getBoundingClientRect(),i=o.top-n.top,r=o.left-n.left;this.shadowRoot.querySelector("#up").style.top=i-10+"px",this.shadowRoot.querySelector("#down").style.top=i+o.height-10+"px",this.shadowRoot.querySelector("#left").style.top=i+o.height/2-10+"px",this.shadowRoot.querySelector("#right").style.top=i+o.height/2-10+"px",this.shadowRoot.querySelector("#drag").style.top=i-10+"px",this.shadowRoot.querySelector("#drag").style.left=r-10+"px",this.shadowRoot.querySelector("#up").style.left=r+o.width/2-10+"px",this.shadowRoot.querySelector("#down").style.left=r+o.width/2-10+"px",this.shadowRoot.querySelector("#left").style.left=r-10+"px",this.shadowRoot.querySelector("#right").style.left=r+o.width-10+"px"}}},{key:"_editModeChanged",value:function(e,t){if(e&&!t){var n=this.children;for(var o in n)n[o].tagName&&(n[o].addEventListener("drop",this.dropEvent.bind(this)),n[o].addEventListener("dragenter",this.dragEnter.bind(this)),n[o].addEventListener("dragleave",this.dragLeave.bind(this)),n[o].addEventListener("dragover",function(e){e.preventDefault()}),"IMG"===n[o].tagName&&n[o].setAttribute("draggable",!1),n[o].setAttribute("tabindex",0))}else if(!e&&t){this.activeItem=null;var i=this.children;for(var o in i)"undefined"!==r(i[o].tagName)&&(i[o].removeEventListener("drop",this.dropEvent.bind(this)),i[o].removeEventListener("dragenter",this.dragEnter.bind(this)),i[o].removeEventListener("dragleave",this.dragLeave.bind(this)),i[o].removeEventListener("dragover",function(e){e.preventDefault()}),"IMG"===i[o].tagName&&i[o].removeAttribute("draggable"),i[o].removeAttribute("tabindex"))}}},{key:"dragEnter",value:function(e){this.editMode&&(e.preventDefault(),e.target&&e.target.classList&&e.target.classList.add("hax-hovered"))}},{key:"dragLeave",value:function(e){this.editMode&&e.target&&e.target.classList&&e.target.classList.remove("hax-hovered")}},{key:"__sortChildren",value:function(){var e=this;try{var t=Array.prototype.reduce.call(this.children,function(e,t){return t.slot&&e.push(t),e},[]);(t=t.sort(function(e,t){return parseInt(e.getAttribute("slot").split("-")[1])<parseInt(t.getAttribute("slot").split("-")[1])?-1:1})).forEach(function(t){t.parentNode===e&&e.appendChild(t)})}catch(e){console.warn(e)}}},{key:"dropEvent",value:function(e){var t=this;if(this.editMode){var n=this.activeItem;if(this.__dragTarget&&(n=this.__dragTarget),window.HaxStore&&window.HaxStore.ready&&window.HaxStore.instance.__dragTarget&&(n=window.HaxStore.instance.__dragTarget,window.HaxStore.instance.__dragTarget=null),setTimeout(function(){var e=t.querySelectorAll(".hax-hovered, .hax-moving, .grid-plate-active-item");for(var n in e)"undefined"!==r(e[n].classList)&&e[n].classList.remove("hax-hovered","hax-moving");for(var o=1;o<=t.columns;o++)void 0!==t.shadowRoot.querySelector("#col"+o)&&t.shadowRoot.querySelector("#col"+o).classList.remove("hax-hovered","hax-moving");if(window.HaxStore&&window.HaxStore.ready){var i=window.HaxStore.instance.activeHaxBody.children;for(var n in window.HaxStore.instance.activeHaxBody.haxMover=!1,i)i[n].classList&&i[n].classList.remove("hax-hovered","hax-moving")}t.__sortChildren()},100),n===this)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1;var o=e.target;if(n&&"undefined"!==r(o)&&null!=o.getAttribute("slot")&&o.parentNode&&n!==o)n.setAttribute("slot",o.getAttribute("slot")),o.parentNode.insertBefore(n,o),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();else if(n&&"DIV"===o.tagName&&o.classList.contains("column")){var i=o.id.replace("col","");n.setAttribute("slot","col-"+i),this.appendChild(n),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}setTimeout(function(){window.HaxStore&&window.HaxStore.ready&&window.HaxStore.instance&&n&&n.parentNode&&"GRID-PLATE"===n.parentNode.tagName&&(window.HaxStore.write("activeNode",n,t),window.HaxStore.write("activeContainerNode",n.parentNode,t),setTimeout(function(){window.HaxStore.instance.activeHaxBody.positionContextMenus(n,n.parentNode)},10)),t.positionArrows(null),t.activeItem=null},0)}}},{key:"dragStart",value:function(e){this.editMode&&(window.HaxStore&&window.HaxStore.ready?window.HaxStore.instance.__dragTarget=this.activeItem:this.__dragTarget=this.activeItem,this.activeItem.classList.add("hax-moving"),e.dataTransfer.dropEffect="move",e.dataTransfer.setDragImage(this.activeItem,0,0),e.stopPropagation(),e.stopImmediatePropagation())}},{key:"dragEnd",value:function(e){var t=this;this.editMode&&setTimeout(function(){var e=t.querySelectorAll(".hax-hovered, .hax-moving, .grid-plate-active-item");for(var n in e)"undefined"!==r(e[n].classList)&&e[n].classList.remove("hax-hovered","hax-moving");for(var n in t.children)"undefined"!==r(t.children[n].classList)&&t.children[n].classList.remove("hax-hovered","hax-moving");for(var o=1;o<=t.columns;o++)void 0!==t.shadowRoot.querySelector("#col"+o)&&t.shadowRoot.querySelector("#col"+o).classList.remove("hax-hovered","hax-moving")},100)}},{key:"_haxStorePropertyUpdated",value:function(e){e.detail&&"undefined"!==r(e.detail.value)&&e.detail.property&&("object"===r(e.detail.value)&&(this[e.detail.property]=null),"editMode"===e.detail.property&&this.ignoreHax||(this.hideOps=!0,this[e.detail.property]=e.detail.value))}}],[{key:"tag",get:function(){return"grid-plate"}},{key:"haxProperties",get:function(){return{canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Grid layout",description:"Simple card in a cool retro design",icon:"hax:3/3/3/3",color:"grey",groups:["Layout"],handles:[],meta:{author:"ELMS:LN",owner:"The Pennsylvania State University"}},settings:{quick:[],configure:[{property:"layout",title:"Column Layout",description:"Style to present these items (may change for small screens)",inputMethod:"select",options:(new b).options},{property:"disableResponsive",title:"Disable responsive",description:"Check box to force layout to stick regardless of screen breakpoins",inputMethod:"boolean"}],advanced:[{property:"breakpointSm",title:"Small Breakpoint",description:"Anything less than this number (in pixels) will render with the smallest version of this layout",inputMethod:"textfield",validationType:"number"},{property:"breakpointMd",title:"Medium Breakpoint",description:"Anything less than this number (in pixels) will render with the small version of this layout",inputMethod:"textfield",validationType:"number"},{property:"breakpointLg",title:"Large Breakpoint",description:"Anything less than this number (in pixels) will render with the medium version of this layout.",inputMethod:"textfield",validationType:"number"},{property:"breakpointXl",title:"Extra-Large Breakpoint",description:"Anything less than this number (in pixels) will render with the large version of this layout. Anything greater than or equal to this number will display with the maximum number of columns for this layout.",inputMethod:"textfield",validationType:"number"}]},saveOptions:{unsetAttributes:["grid-plate-active-item","edit-mode","active-item","layouts","columns","options","droppable","ignorehax","hideops","activeitem","responsive-width","hide-ops"]}}}},{key:"properties",get:function(){return{hideOps:{type:Boolean,attribute:"hide-ops"},droppable:{type:Boolean,reflect:!0},ignoreHax:{type:Boolean,attribute:"ignore-hax"},breakpointSm:{type:Number,attribute:"breakpoint-sm"},breakpointMd:{type:Number,attribute:"breakpoint-md"},breakpointLg:{type:Number,attribute:"breakpoint-lg"},breakpointXl:{type:Number,attribute:"breakpoint-xl"},columns:{type:Number,reflect:!0},disableResponsive:{type:Boolean,attribute:"disable-responsive"},editMode:{reflect:!0,type:Boolean,attribute:"edit-mode"},layout:{type:String,reflect:!0},layouts:{type:Object},responsiveSize:{type:String,reflect:!0,attribute:"responsive-size"},activeItem:{type:Object,attribute:"active-item"},__columnWidths:{type:String}}}}]),n}();window.customElements.define(y.tag,y),e.GridPlate=y,Object.defineProperty(e,"__esModule",{value:!0})});
