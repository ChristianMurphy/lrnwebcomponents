{"version":3,"file":"parallax-image.umd.js","sources":["parallax-image.umd.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js\";\nimport \"@lrnwebcomponents/schema-behaviors/schema-behaviors.js\";\n/**\n`parallax-image`\nA LRN element\n\n* @demo demo/index.html\n\n@microcopy - the mental model for this element\n -\n -\n\n*/\nlet ParallaxImage = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        --parallax-image-background: \"\";\n        --parallax-title-background: rgba(0, 0, 0, 0.3);\n        --parallax-title-font: #fff;\n      }\n\n      .parallax_container {\n        height: 400px;\n        width: 100%;\n        overflow: hidden;\n        display: flex;\n        justify-content: center;\n      }\n\n      .parallax {\n        background-image: var(--parallax-image-background);\n        background-attachment: fixed;\n        background-position: top center;\n        background-repeat: no-repeat;\n        background-size: cover;\n        width: 100%;\n        height: 100%;\n        justify-content: center;\n      }\n\n      #bgParallax {\n        display: flex;\n        align-items: center;\n      }\n\n      .title {\n        background: var(--parallax-title-background);\n        display: block;\n        padding: 20px 15px;\n        text-align: center;\n        width: 40%;\n        color: var(--parallax-title-font);\n        font-size: 32px;\n        position: absolute;\n        margin-top: 120px;\n      }\n\n      @media screen and (max-width: 900px) {\n        .title {\n          font-size: 16px;\n        }\n      }\n    </style>\n\n    <a href=\"[[url]]\" target$=\"[[_urlTarget(url)]]\">\n      <div class=\"parallax_container\">\n        <div id=\"bgParallax\" class=\"parallax\">\n          <div class=\"title\" id=\"titleParallax\">\n            <slot name=\"parallax_heading\"></slot>\n          </div>\n        </div>\n      </div>\n    </a>\n  `,\n\n  is: \"parallax-image\",\n\n  behaviors: [HAXBehaviors.PropertiesBehaviors, SchemaBehaviors.Schema],\n\n  properties: {\n    /**\n     * Image\n     */\n    imageBg: {\n      type: String,\n      value: \"\",\n      reflectToAttribute: true\n    },\n    /**\n     * Url\n     */\n    url: {\n      type: String,\n      value: \"\",\n      reflectToAttribute: true\n    }\n  },\n\n  observers: [\"__updateStyles(imageBg)\"],\n\n  _urlTarget: function(url) {\n    if (url) {\n      const external = this._outsideLink(url);\n      if (external) {\n        return \"_blank\";\n      }\n    }\n    return false;\n  },\n\n  /**\n   * Internal function to check if a url is external\n   */\n  _outsideLink: function(url) {\n    if (url.indexOf(\"http\") != 0) return false;\n    var loc = location.href,\n      path = location.pathname,\n      root = loc.substring(0, loc.indexOf(path));\n    return url.indexOf(root) != 0;\n  },\n\n  /**\n   * Attached to the DOM, now fire.\n   */\n  attached: function() {\n    // Establish hax property binding\n    let props = {\n      canScale: true,\n      canPosition: true,\n      canEditSource: false,\n      gizmo: {\n        title: \"Sample gizmo\",\n        description: \"The user will be able to see this for selection in a UI.\",\n        icon: \"av:play-circle-filled\",\n        color: \"grey\",\n        groups: [\"Video\", \"Media\"],\n        handles: [\n          {\n            type: \"video\",\n            url: \"source\"\n          }\n        ],\n        meta: {\n          author: \"Your organization on github\"\n        }\n      },\n      settings: {\n        quick: [\n          {\n            property: \"title\",\n            title: \"Title\",\n            description: \"The title of the element\",\n            inputMethod: \"textfield\",\n            icon: \"editor:title\"\n          }\n        ],\n        configure: [\n          {\n            property: \"title\",\n            title: \"Title\",\n            description: \"The title of the element\",\n            inputMethod: \"textfield\",\n            icon: \"editor:title\"\n          }\n        ],\n        advanced: []\n      }\n    };\n    this.setHaxProperties(props);\n  },\n\n  __updateStyles: function(imageBg) {\n    this.updateStyles({ \"--parallax-image-background\": `url(${imageBg})` });\n  },\n\n  ready: function() {\n    const bgParallax = this.$.bgParallax;\n    const titleParallax = this.$.titleParallax;\n    window.addEventListener(\"scroll\", e => {\n      const yParallaxPosition = window.scrollY * -0.2;\n      const yParallaxPositionTitle = yParallaxPosition * 1.4;\n      bgParallax.style.backgroundPosition = `center ${yParallaxPosition}px`;\n      titleParallax.style.transform = `translate3D(0, ${yParallaxPositionTitle}px, 0)`;\n    });\n  }\n});\nexport { ParallaxImage };\n"],"names":["ParallaxImage","Polymer","_template","html","is","behaviors","HAXBehaviors","PropertiesBehaviors","SchemaBehaviors","Schema","properties","imageBg","type","String","value","reflectToAttribute","url","observers","_urlTarget","this","_outsideLink","indexOf","loc","location","href","path","pathname","root","substring","attached","setHaxProperties","canScale","canPosition","canEditSource","gizmo","title","description","icon","color","groups","handles","meta","author","settings","quick","property","inputMethod","configure","advanced","__updateStyles","updateStyles","ready","bgParallax","$","titleParallax","window","addEventListener","e","yParallaxPosition","scrollY","yParallaxPositionTitle","style","backgroundPosition","transform"],"mappings":"6rEAcIA,EAAgBC,UAAQ,CAC1BC,UAAWC,YA+DXC,GAAI,iBAEJC,UAAW,CAACC,aAAaC,oBAAqBC,gBAAgBC,QAE9DC,WAAY,CAIVC,QAAS,CACPC,KAAMC,OACNC,MAAO,GACPC,oBAAoB,GAKtBC,IAAK,CACHJ,KAAMC,OACNC,MAAO,GACPC,oBAAoB,IAIxBE,UAAW,CAAC,2BAEZC,WAAY,SAASF,MACfA,GACeG,KAAKC,aAAaJ,SAE1B,gBAGJ,GAMTI,aAAc,SAASJ,MACM,GAAvBA,EAAIK,QAAQ,QAAc,OAAO,MACjCC,EAAMC,SAASC,KACjBC,EAAOF,SAASG,SAChBC,EAAOL,EAAIM,UAAU,EAAGN,EAAID,QAAQI,WACV,GAArBT,EAAIK,QAAQM,IAMrBE,SAAU,gBA4CHC,iBA1CO,CACVC,UAAU,EACVC,aAAa,EACbC,eAAe,EACfC,MAAO,CACLC,MAAO,eACPC,YAAa,2DACbC,KAAM,wBACNC,MAAO,OACPC,OAAQ,CAAC,QAAS,SAClBC,QAAS,CACP,CACE5B,KAAM,QACNI,IAAK,WAGTyB,KAAM,CACJC,OAAQ,gCAGZC,SAAU,CACRC,MAAO,CACL,CACEC,SAAU,QACVV,MAAO,QACPC,YAAa,2BACbU,YAAa,YACbT,KAAM,iBAGVU,UAAW,CACT,CACEF,SAAU,QACVV,MAAO,QACPC,YAAa,2BACbU,YAAa,YACbT,KAAM,iBAGVW,SAAU,OAMhBC,eAAgB,SAAStC,QAClBuC,aAAa,6CAAwCvC,UAG5DwC,MAAO,eACCC,EAAajC,KAAKkC,EAAED,WACpBE,EAAgBnC,KAAKkC,EAAEC,cAC7BC,OAAOC,iBAAiB,SAAU,SAAAC,OAC1BC,GAAsC,GAAlBH,OAAOI,QAC3BC,EAA6C,IAApBF,EAC/BN,EAAWS,MAAMC,oCAA+BJ,QAChDJ,EAAcO,MAAME,mCAA8BH"}