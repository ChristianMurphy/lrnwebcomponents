{"version":3,"file":"aframe-player.umd.js","sources":["aframe-player.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { pathFromUrl } from \"@polymer/polymer/lib/utils/resolve-url.js\";\nimport \"@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js\";\nimport \"@lrnwebcomponents/schema-behaviors/schema-behaviors.js\";\nimport \"@lrnwebcomponents/es-global-bridge/es-global-bridge.js\";\n/**\n * `aframe-player`\n * `A wrapper to do data binding into aframe`\n *\n * @demo demo/index.html\n */\nlet AframePlayer = Polymer({\n  _template: html`\n    <custom-style>\n      <style is=\"custom-style\">\n        :host {\n          display: block;\n          position: relative;\n        }\n        .a-hidden {\n          display: hidden;\n        }\n      </style>\n    </custom-style>\n    <a-scene\n      id=\"scene\"\n      class=\"embedded\"\n      embedded\n      arjs$=\"[[ar]]\"\n      style$=\"height:[[height]];width:[[width]];\"\n    >\n      <a-sky color\\$=\"[[skyColor]]\"></a-sky>\n      <a-marker-camera preset=\"hiro\"></a-marker-camera>\n    </a-scene>\n  `,\n\n  is: \"aframe-player\",\n  behaviors: [HAXBehaviors.PropertiesBehaviors, SchemaBehaviors.Schema],\n\n  properties: {\n    /**\n     * Source to reference for the 3D object\n     */\n    source: {\n      type: String,\n      value: \"\"\n    },\n    /**\n     * height of the element\n     */\n    height: {\n      type: String,\n      value: \"480px\"\n    },\n    /**\n     * width of the element\n     */\n    width: {\n      type: String,\n      value: \"640px\"\n    },\n    /**\n     * Color of the sky / background.\n     */\n    skyColor: {\n      type: String,\n      value: \"#DCDCDC\"\n    },\n    /**\n     * If this is for augmented reality or not.\n     */\n    ar: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * x position for the AR element.\n     */\n    x: {\n      type: String,\n      value: \"0\"\n    },\n    /**\n     * y position for the AR element.\n     */\n    y: {\n      type: String,\n      value: \"0\"\n    },\n    /**\n     * z position for the AR element.\n     */\n    z: {\n      type: String,\n      value: \"0\"\n    },\n    /**\n     * Generate a position object when coordinates change.\n     */\n    position: {\n      type: Object,\n      computed: \"_computePosition(x, y, z, width, height)\",\n      observer: \"_positionChanged\"\n    }\n  },\n  /**\n   * highjack shadowDom\n   */\n  _attachDom(dom) {\n    this.appendChild(dom);\n  },\n  /**\n   * Attached.\n   */\n  attached: function() {\n    const name = \"aframePlayer\";\n    const basePath = pathFromUrl(decodeURIComponent(import.meta.url));\n    let location = `${basePath}lib/aframe/dist/aframe-master.js`;\n    if (typeof TWEEN === \"object\") this._aframeLoaded.bind(this);\n    window.addEventListener(\n      `es-bridge-${name}-loaded`,\n      this._aframeLoaded.bind(this)\n    );\n    window.ESGlobalBridge.requestAvailability();\n    window.ESGlobalBridge.instance.load(name, location);\n    let props = {\n      canScale: false,\n      canPosition: false,\n      canEditSource: false,\n      gizmo: {\n        title: \"3D player\",\n        description: \"A 3D file / augmented reality player.\",\n        icon: \"av:play-circle-filled\",\n        color: \"amber\",\n        groups: [\"3D\", \"Augmented reality\"],\n        handles: [\n          {\n            type: \"3d\",\n            source: \"source\"\n          }\n        ],\n        meta: {\n          author: \"LRNWebComponents\"\n        }\n      },\n      settings: {\n        quick: [\n          {\n            property: \"height\",\n            title: \"height\",\n            description: \"height of the object\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"image:photo-size-select-small\",\n            required: true\n          },\n          {\n            property: \"width\",\n            title: \"Width\",\n            description: \"Width of the object\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"image:straighten\",\n            required: true\n          }\n        ],\n        configure: [\n          {\n            property: \"source\",\n            title: \"Source\",\n            description: \"The URL for this AR file.\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"link\",\n            required: true\n          },\n          {\n            property: \"x\",\n            title: \"X\",\n            description: \"X position of the element in AR.\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"communication:location-on\",\n            required: true\n          },\n          {\n            property: \"y\",\n            title: \"Y\",\n            description: \"Y position of the element in AR.\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"communication:location-on\",\n            required: true\n          },\n          {\n            property: \"z\",\n            title: \"Z\",\n            description: \"Z position of the element in AR.\",\n            inputMethod: \"textfield\",\n            type: \"bar\",\n            icon: \"communication:location-on\",\n            required: true\n          },\n          {\n            property: \"skyColor\",\n            title: \"Sky color\",\n            description: \"Select the color of the sky in the scene.\",\n            inputMethod: \"colorpicker\",\n            type: \"bar\",\n            icon: \"editor:format-color-fill\"\n          }\n        ],\n        advanced: []\n      }\n    };\n    this.setHaxProperties(props);\n  },\n\n  _aframeLoaded(el) {\n    // ensure that this doesn't put full screen styles on the page!\n    this.$.scene.removeFullScreenStyles();\n    this.__entity = document.createElement(\"a-entity\");\n    this.__entity.setAttribute(\"gltf-model\", \"url(\" + this.source + \")\");\n    this._positionChanged();\n    this.$.scene.appendChild(this.__entity);\n  },\n\n  /**\n   * Generate position object based on format a-frame expects.\n   */\n  _computePosition: function(x, y, z, width, height) {\n    return {\n      x: x,\n      y: y,\n      z: z\n    };\n  },\n\n  /**\n   * When position is updated, inject this into a-frame tag.\n   */\n  _positionChanged: function(position) {\n    if (this.__entity !== undefined)\n      this.__entity.setAttribute(\"position\", position);\n  }\n});\nexport { AframePlayer };\n"],"names":["AframePlayer","Polymer","_template","html","is","behaviors","HAXBehaviors","PropertiesBehaviors","SchemaBehaviors","Schema","properties","source","type","String","value","height","width","skyColor","ar","Boolean","x","y","z","position","Object","computed","observer","_attachDom","dom","appendChild","attached","basePath","pathFromUrl","decodeURIComponent","location","TWEEN","this","_aframeLoaded","bind","window","addEventListener","ESGlobalBridge","requestAvailability","instance","load","setHaxProperties","canScale","canPosition","canEditSource","gizmo","title","description","icon","color","groups","handles","meta","author","settings","quick","property","inputMethod","required","configure","advanced","el","$","scene","removeFullScreenStyles","__entity","document","createElement","setAttribute","_positionChanged","_computePosition","undefined"],"mappings":"4pEAeIA,EAAeC,UAAQ,CACzBC,UAAWC,YAwBXC,GAAI,gBACJC,UAAW,CAACC,aAAaC,oBAAqBC,gBAAgBC,QAE9DC,WAAY,CAIVC,OAAQ,CACNC,KAAMC,OACNC,MAAO,IAKTC,OAAQ,CACNH,KAAMC,OACNC,MAAO,SAKTE,MAAO,CACLJ,KAAMC,OACNC,MAAO,SAKTG,SAAU,CACRL,KAAMC,OACNC,MAAO,WAKTI,GAAI,CACFN,KAAMO,QACNL,OAAO,GAKTM,EAAG,CACDR,KAAMC,OACNC,MAAO,KAKTO,EAAG,CACDT,KAAMC,OACNC,MAAO,KAKTQ,EAAG,CACDV,KAAMC,OACNC,MAAO,KAKTS,SAAU,CACRX,KAAMY,OACNC,SAAU,2CACVC,SAAU,qBAMdC,oBAAWC,QACJC,YAAYD,IAKnBE,SAAU,eAEFC,EAAWC,cAAYC,oMACzBC,YAAcH,sCACG,gCAAVI,oBAAAA,SAAoBC,KAAKC,cAAcC,KAAKF,MACvDG,OAAOC,qCAJM,0BAMXJ,KAAKC,cAAcC,KAAKF,OAE1BG,OAAOE,eAAeC,sBACtBH,OAAOE,eAAeE,SAASC,KATlB,eAS6BV,QA2FrCW,iBA1FO,CACVC,UAAU,EACVC,aAAa,EACbC,eAAe,EACfC,MAAO,CACLC,MAAO,YACPC,YAAa,wCACbC,KAAM,wBACNC,MAAO,QACPC,OAAQ,CAAC,KAAM,qBACfC,QAAS,CACP,CACE3C,KAAM,KACND,OAAQ,WAGZ6C,KAAM,CACJC,OAAQ,qBAGZC,SAAU,CACRC,MAAO,CACL,CACEC,SAAU,SACVV,MAAO,SACPC,YAAa,uBACbU,YAAa,YACbjD,KAAM,MACNwC,KAAM,gCACNU,UAAU,GAEZ,CACEF,SAAU,QACVV,MAAO,QACPC,YAAa,sBACbU,YAAa,YACbjD,KAAM,MACNwC,KAAM,mBACNU,UAAU,IAGdC,UAAW,CACT,CACEH,SAAU,SACVV,MAAO,SACPC,YAAa,4BACbU,YAAa,YACbjD,KAAM,MACNwC,KAAM,OACNU,UAAU,GAEZ,CACEF,SAAU,IACVV,MAAO,IACPC,YAAa,mCACbU,YAAa,YACbjD,KAAM,MACNwC,KAAM,4BACNU,UAAU,GAEZ,CACEF,SAAU,IACVV,MAAO,IACPC,YAAa,mCACbU,YAAa,YACbjD,KAAM,MACNwC,KAAM,4BACNU,UAAU,GAEZ,CACEF,SAAU,IACVV,MAAO,IACPC,YAAa,mCACbU,YAAa,YACbjD,KAAM,MACNwC,KAAM,4BACNU,UAAU,GAEZ,CACEF,SAAU,WACVV,MAAO,YACPC,YAAa,4CACbU,YAAa,cACbjD,KAAM,MACNwC,KAAM,6BAGVY,SAAU,OAMhB3B,uBAAc4B,QAEPC,EAAEC,MAAMC,8BACRC,SAAWC,SAASC,cAAc,iBAClCF,SAASG,aAAa,aAAc,OAASpC,KAAKzB,OAAS,UAC3D8D,wBACAP,EAAEC,MAAMtC,YAAYO,KAAKiC,WAMhCK,iBAAkB,SAAStD,EAAGC,EAAGC,EAAGN,EAAOD,SAClC,CACLK,EAAGA,EACHC,EAAGA,EACHC,EAAGA,IAOPmD,iBAAkB,SAASlD,QACHoD,IAAlBvC,KAAKiC,UACPjC,KAAKiC,SAASG,aAAa,WAAYjD"}