{"version":3,"file":"responsive-utility.umd.js","sources":["responsive-utility.umd.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport { IronResizableBehavior } from \"@polymer/iron-resizable-behavior/iron-resizable-behavior.js\";\n\nwindow.ResponsiveUtility = {};\nwindow.ResponsiveUtility.instance = null;\nlet ResponsiveUtility = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline;\n      }\n    </style>\n    <slot></slot>\n  `,\n\n  is: \"responsive-utility\",\n\n  behaviors: [IronResizableBehavior],\n\n  listeners: {\n    \"iron-resize\": \"_onIronResize\"\n  },\n\n  properties: {\n    /**\n     * Stores\n     */\n    details: {\n      type: Array,\n      value: []\n    }\n  },\n\n  /**\n   * An array of objects. Each object is contains data about an element\n   * that will be updated with responsive values.\n   *\n   * To add an element to this array, fire a 'responsive-element' event\n   * with the following data:\n   *\n   * {\n   *   \"element\": (the element itself),\n   *   \"attribute\": (the attribute that will be set with the size),\n   *   \"relativeToParent\": (true for @element query instead of @media query),\n   *   \"sm\": (optional custom sm breakpoint, default is 600),\n   *   \"md\": (optional custom md breakpoint, default is 900),\n   *   \"lg\": (optional custom lg breakpoint, default is 1200),\n   *   \"xl\": (optional custom xl breakpoint, default is 1500),\n   * }\n   *\n   */\n  /**\n   * Makes sure there is a utility ready and listening for elements.\n   */\n  created: function() {\n    let root = this;\n    if (window.ResponsiveUtility.instance == null) {\n      window.ResponsiveUtility.instance = root;\n    }\n    /* handle element registration */\n    window.addEventListener(\"responsive-element\", function(e) {\n      let detail = {\n        element: e.detail.element,\n        attribute:\n          e.detail.attribute !== undefined && e.detail.attribute !== null\n            ? e.detail.attribute\n            : \"responsive-size\",\n        relativeToParent:\n          e.detail.relativeToParent !== undefined &&\n          e.detail.relativeToParent !== null\n            ? e.detail.relativeToParent\n            : true,\n        sm:\n          e.detail.sm !== undefined && e.detail.sm !== null ? e.detail.sm : 900,\n        md:\n          e.detail.md !== undefined && e.detail.md !== null\n            ? e.detail.md\n            : 1200,\n        lg:\n          e.detail.lg !== undefined && e.detail.lg !== null\n            ? e.detail.lg\n            : 1500,\n        xl:\n          e.detail.xl !== undefined && e.detail.xl !== null ? e.detail.lg : 1800\n      };\n      if (\"ResizeObserver\" in window && detail.relativeToParent === true) {\n        let resize = new ResizeObserver(function() {\n            window.ResponsiveUtility.setSize(detail);\n          }),\n          observable =\n            e.detail.parentNode !== undefined && e.detail.parentNode !== null\n              ? e.detail.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE\n                ? e.detail.element.parentNode.host\n                : e.detail.element.parentNode\n              : e.detail.element;\n        resize.observe(observable);\n      }\n      root.push(\"details\", detail);\n      window.ResponsiveUtility.setSize(detail);\n    });\n    /* handle element deregistration */\n    window.addEventListener(\"delete-responsive-element\", function(e) {\n      for (let i = 0; i < this.details.length; i++) {\n        if (e.detail === detail[i]) root.splice(\"details\", i, 1);\n      }\n    });\n  },\n\n  /**\n   * On resize, sets sizes of any detail element that has changed.\n   */\n  _onIronResize: function() {\n    for (let i = 0; i < this.details.length; i++) {\n      window.ResponsiveUtility.setSize(this.details[i]);\n    }\n  }\n});\n\n/**\n * Checks to see if there is an instance available, and if not appends one\n */\nwindow.ResponsiveUtility.requestAvailability = function() {\n  if (window.ResponsiveUtility.instance == null) {\n    window.ResponsiveUtility.instance = document.createElement(\n      \"responsive-utility\"\n    );\n  }\n  document.body.appendChild(window.ResponsiveUtility.instance);\n};\n/**\n * Sets responsive size of detail.\n */\nwindow.ResponsiveUtility.setSize = function(detail) {\n  let size,\n    width = window.ResponsiveUtility._getWidth(detail);\n  if (width < detail.sm) {\n    size = \"xs\";\n  } else if (width < detail.md) {\n    size = \"sm\";\n  } else if (width < detail.lg) {\n    size = \"md\";\n  } else if (width < detail.xl) {\n    size = \"lg\";\n  } else {\n    size = \"xl\";\n  }\n  if (\n    detail.element.getAttribute(detail.attribute) === undefined ||\n    size !== detail.element.getAttribute(detail.attribute)\n  ) {\n    detail.element.setAttribute(detail.attribute, size);\n  }\n};\n/**\n * Returns width of detail.\n *\n * @param {object} the HTML element to check\n * @returns {number} the width of the element or its parent node\n */\nwindow.ResponsiveUtility._getWidth = function(detail) {\n  let el = detail.element;\n  if (detail.relativeToParent === true) {\n    if (\n      el.offsetWidth !== undefined &&\n      el.offsetWidth !== null &&\n      el.offsetWidth > 0\n    ) {\n      return el.offsetWidth;\n    } else if (el.parentNode !== null) {\n      return el.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE\n        ? el.parentNode.host.offsetWidth\n        : el.parentNode.offsetWidth;\n    }\n  }\n  return window.outerWidth;\n};\nexport { ResponsiveUtility };\n"],"names":["window","ResponsiveUtility","instance","Polymer","_template","html","is","behaviors","IronResizableBehavior","listeners","properties","details","type","Array","value","created","root","this","addEventListener","e","detail","element","attribute","undefined","relativeToParent","sm","md","lg","xl","resize","ResizeObserver","setSize","observable","parentNode","nodeType","Node","DOCUMENT_FRAGMENT_NODE","host","observe","push","i","length","splice","_onIronResize","requestAvailability","document","createElement","body","appendChild","size","width","_getWidth","getAttribute","setAttribute","el","offsetWidth","outerWidth"],"mappings":"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"}