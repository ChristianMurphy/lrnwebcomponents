!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@polymer/polymer/polymer-legacy.js"),require("@lrnwebcomponents/smooth-scroll/smooth-scroll.js"),require("@polymer/iron-icons/iron-icons.js"),require("@polymer/iron-icon/iron-icon.js"),require("@polymer/paper-button/paper-button.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js"),require("@lrnwebcomponents/lrndesign-avatar/lrndesign-avatar.js"),require("@polymer/iron-collapse/iron-collapse.js"),require("@polymer/iron-behaviors/iron-button-state.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-legacy.js","@lrnwebcomponents/smooth-scroll/smooth-scroll.js","@polymer/iron-icons/iron-icons.js","@polymer/iron-icon/iron-icon.js","@polymer/paper-button/paper-button.js","@polymer/polymer/lib/legacy/polymer.dom.js","@lrnwebcomponents/lrndesign-avatar/lrndesign-avatar.js","@polymer/iron-collapse/iron-collapse.js","@polymer/iron-behaviors/iron-button-state.js"],n):n((e=e||self).MapMenu={},e.polymerLegacy_js,null,null,null,null,e.polymer_dom_js)}(this,function(e,n,t,i,a,o,r){"use strict";function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function d(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var c;function s(){var e=d(['\n    <style>\n      :host {\n        display: block;\n        --map-menu-item-height: 16px;\n      }\n\n      :host([active]) {\n        background: var(--map-menu-active-color);\n      }\n\n      iron-icon {\n        display: inline-block;\n        --iron-icon-height: var(--map-menu-item-height);\n      }\n\n      #title {\n        text-transform: none;\n      }\n\n      a,\n      a:hover,\n      a:visited,\n      a:focus {\n        color: inherit;\n      }\n    </style>\n    <a href$="[[url]]">\n      <paper-button id="wrapper" role="link" noink>\n        <template is="dom-if" if="[[__hasIcon(icon)]]">\n          <iron-icon icon="[[icon]]"></iron-icon>\n        </template>\n        <span id="title">[[title]]</span>\n      </paper-button>\n    </a>\n  ']);return s=function(){return e},e}function p(){var e=d(['\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([active]) {\n        background: var(--map-menu-active-color);\n      }\n\n      #container {\n        display: flex;\n        align-items: center;\n      }\n\n      #avatarLabel {\n        margin-right: 10px;\n      }\n\n      #center {\n        flex: 1 1 auto;\n      }\n\n      a,\n      a:hover,\n      a:visited,\n      a:focus {\n        color: inherit;\n      }\n\n      lrndesign-avatar {\n        display: inline-block;\n        background: #fff;\n        border-radius: 50%;\n        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);\n        padding: 2px;\n        position: relative;\n        margin-top: -2px;\n        transform: translateY(2px);\n      }\n\n      #link {\n        display: flex;\n        justify-content: flex-start;\n        align-items: flex-start;\n        flex-direction: column;\n      }\n\n      #title {\n        font-size: 16px;\n      }\n\n      #right iron-icon {\n        display: inline-block;\n        color: gray;\n      }\n\n      /* @todo this is a hack */\n      #icon iron-icon {\n        display: inline-block;\n        --iron-icon-height: 16px;\n        transform: translateX(10px);\n      }\n\n      paper-button {\n        text-transform: none;\n      }\n    </style>\n    <div id="container">\n      <template is="dom-if" if="[[avatarLabel]]">\n        <div id="avatarLabel">\n          <lrndesign-avatar label="[[avatarLabel]]"></lrndesign-avatar>\n        </div>\n      </template>\n      <template is="dom-if" if="[[icon]]">\n        <div id="icon"><iron-icon icon="[[icon]]"></iron-icon></div>\n      </template>\n      <div id="center">\n        <a href$="[[url]]">\n          <paper-button id="title" noink="" role$="[[__titleRole()]]">\n            <div id="label">[[label]]</div>\n            <div id="title">[[title]]</div>\n          </paper-button>\n        </a>\n      </div>\n      <div id="right">\n        <template is="dom-if" if="[[!opened]]">\n          <iron-icon\n            id="toggle"\n            icon="arrow-drop-down"\n            aria-role="button"\n            aria-label="expand menu"\n            tabindex="0"\n          ></iron-icon>\n        </template>\n        <template is="dom-if" if="[[opened]]">\n          <iron-icon\n            id="toggle"\n            icon="arrow-drop-up"\n            aria-role="button"\n            aria-label="collapse menu"\n            tabindex="0"\n          ></iron-icon>\n        </template>\n      </div>\n    </div>\n  '],['\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([active]) {\n        background: var(--map-menu-active-color);\n      }\n\n      #container {\n        display: flex;\n        align-items: center;\n      }\n\n      #avatarLabel {\n        margin-right: 10px;\n      }\n\n      #center {\n        flex: 1 1 auto;\n      }\n\n      a,\n      a:hover,\n      a:visited,\n      a:focus {\n        color: inherit;\n      }\n\n      lrndesign-avatar {\n        display: inline-block;\n        background: #fff;\n        border-radius: 50%;\n        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);\n        padding: 2px;\n        position: relative;\n        margin-top: -2px;\n        transform: translateY(2px);\n      }\n\n      #link {\n        display: flex;\n        justify-content: flex-start;\n        align-items: flex-start;\n        flex-direction: column;\n      }\n\n      #title {\n        font-size: 16px;\n      }\n\n      #right iron-icon {\n        display: inline-block;\n        color: gray;\n      }\n\n      /* @todo this is a hack */\n      #icon iron-icon {\n        display: inline-block;\n        --iron-icon-height: 16px;\n        transform: translateX(10px);\n      }\n\n      paper-button {\n        text-transform: none;\n      }\n    </style>\n    <div id="container">\n      <template is="dom-if" if="[[avatarLabel]]">\n        <div id="avatarLabel">\n          <lrndesign-avatar label="[[avatarLabel]]"></lrndesign-avatar>\n        </div>\n      </template>\n      <template is="dom-if" if="[[icon]]">\n        <div id="icon"><iron-icon icon="[[icon]]"></iron-icon></div>\n      </template>\n      <div id="center">\n        <a href$="[[url]]">\n          <paper-button id="title" noink="" role\\$="[[__titleRole()]]">\n            <div id="label">[[label]]</div>\n            <div id="title">[[title]]</div>\n          </paper-button>\n        </a>\n      </div>\n      <div id="right">\n        <template is="dom-if" if="[[!opened]]">\n          <iron-icon\n            id="toggle"\n            icon="arrow-drop-down"\n            aria-role="button"\n            aria-label="expand menu"\n            tabindex="0"\n          ></iron-icon>\n        </template>\n        <template is="dom-if" if="[[opened]]">\n          <iron-icon\n            id="toggle"\n            icon="arrow-drop-up"\n            aria-role="button"\n            aria-label="collapse menu"\n            tabindex="0"\n          ></iron-icon>\n        </template>\n      </div>\n    </div>\n  ']);return p=function(){return e},e}function m(){var e=d(['\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([collapsable]) > map-menu-header {\n        cursor: pointer;\n        display: block;\n      }\n\n      #container {\n        margin-left: 16px;\n      }\n\n      #container ::slotted(map-menu-item) {\n        margin-top: 0.4em;\n      }\n    </style>\n    <map-menu-header\n      avatar-label="[[avatarLabel]]"\n      id="[[id]]"\n      title="[[title]]"\n      label="[[label]]"\n      opened="[[opened]]"\n      url="[[url]]"\n      icon="[[icon]]"\n      selected="[[selected]]"\n    ></map-menu-header>\n    <iron-collapse id="container"> <slot></slot> </iron-collapse>\n  ']);return m=function(){return e},e}function u(){var e=d(["\n    <style>\n      :host {\n        display: block;\n      }\n      #container {\n        padding: 16px 32px;\n      }\n      :host > ::slotted(map-menu-submenu + map-menu-submenu) {\n        margin-top: 16px;\n      }\n    </style>\n    <slot></slot>\n  "]);return u=function(){return e},e}function h(){var e=d(['\n    <style>\n      :host {\n        display: block;\n      }\n    </style>\n\n    <template id="domRepeat" is="dom-repeat" items="[[items]]" as="item">\n      <template is="dom-if" if="[[__hasChildren(item)]]">\n        <map-menu-submenu\n          title="[[item.title]]"\n          id="[[item.id]]"\n          url="[[item.location]]"\n          icon="[[item.metadata.icon]]"\n          open="[[item.metadata.active]]"\n          avatar-label="[[item.metadata.avatarLabel]]"\n          selected="[[selected]]"\n        >\n          <map-menu-builder\n            items="[[item.children]]"\n            selected="[[selected]]"\n          ></map-menu-builder>\n        </map-menu-submenu>\n      </template>\n      <template is="dom-if" if="[[!__hasChildren(item)]]">\n        <map-menu-item\n          title="[[item.title]]"\n          id="[[item.id]]"\n          url="[[item.location]]"\n          icon="[[item.metadata.icon]]"\n          active-path="[[activePath]]"\n          selected="[[selected]]"\n        ></map-menu-item>\n      </template>\n    </template>\n  ']);return h=function(){return e},e}function v(){var e=d(['\n    <style>\n      :host {\n        --map-menu-active-color: rgba(0, 0, 0, 0.1);\n        display: block;\n        overflow-y: scroll;\n        position: relative;\n        height: 100%;\n      }\n\n      #activeIndicator {\n        background: var(--map-menu-active-color);\n        transition: all 0.3s ease-in-out;\n        position: absolute;\n      }\n\n      map-menu-container {\n        padding: 32px;\n        @apply --map-menu-container;\n      }\n\n      /* turn default active color if indicator is on */\n      :host([active-indicator]) map-menu-builder {\n        --map-menu-active-color: transparent;\n      }\n    </style>\n    <div id="itemslist">\n      <map-menu-container>\n        <div id="activeIndicator"></div>\n        <map-menu-builder\n          id="builder"\n          items="[[items]]"\n          selected="[[selected]]"\n        ></map-menu-builder>\n      </map-menu-container>\n    </div>\n    <smooth-scroll id="smoothScroll"></smooth-scroll>\n  ']);return v=function(){return e},e}n.Polymer({_template:n.html(s()),is:"map-menu-item",properties:(c={icon:{type:String,value:""},title:{type:String,value:""},url:{type:String,value:""}},l(c,"icon",{type:String}),l(c,"id",{type:String,reflectToAttribute:!0}),l(c,"active",{type:Boolean,value:!1}),l(c,"selected",{type:String}),c),observers:["__selectedChanged(selected, id)"],ready:function(){},__selectedChanged:function(e,n){e===n&&this.fire("active-item",this)},_click:function(){this.fire("link-clicked",{id:this.id})},attached:function(){this.fire("child-attached",{id:this.id})},__hasIcon:function(e){return!(!e&&""!==e)}}),n.Polymer({_template:n.html(p()),is:"map-menu-header",properties:{title:{type:String},label:{type:String},avatarLabel:{type:String,value:""},opened:{type:Boolean},url:{type:String,value:""},id:{type:String,reflectToAttribute:!0},icon:{type:String},active:{type:Boolean,value:!1},selected:{type:String}},listeners:{tap:"__tap",keypress:"__keypress"},observers:["__selectedChanged(selected, id)"],__selectedChanged:function(e,n){e===n&&this.fire("active-item",this)},attached:function(){this.fire("child-attached",{id:this.id})},__tap:function(e){this.__toggleEventHandler(e)},__keypress:function(e){"Enter"===e.code&&this.__toggleEventHandler(e)},__toggleEventHandler:function(e){var n=r.dom(e).rootTarget;void 0!==n&&void 0!==n.id&&"toggle"===n.id&&this.fire("toggle-header")}}),n.Polymer({_template:n.html(m()),is:"map-menu-submenu",properties:{id:{type:String},title:{type:String},avatarLabel:{type:String},label:{type:String},icon:{type:String},opened:{type:Boolean,value:!1},collapsable:{type:Boolean,value:!0},expandChildren:{type:Boolean,value:!1},selected:{type:String}},observers:["_openChanged(opened)"],listeners:{"child-deactivated":"__childDeactivated","child-activated":"__childActivated","active-item":"__activeChanged","toggle-header":"__toggleHeader","link-clicked":"_headerClickHandler","map-menu-active-item-changed":"_mapMenuActiveItemChangedHandler","map-menu-item-hidden-check":"_mapMenuItemHiddenCheckHandler"},_openChanged:function(e){var n=this.$.container;e&&n.show(),e||n.hide()},_headerClickHandler:function(e){this.opened||(this.opened=!this.opened)},_mapMenuItemHiddenCheckHandler:function(e){e.detail.action,e.detail.target;var n=e.detail.hiddenChild,t=Object.assign({},e.detail);t=!0!==n&&!1===this.opened?Object.assign({},t,{hiddenChild:!0}):Object.assign({},t,{hiddenChild:!1}),this.fire("map-meu-item-hidden-check",t)},__toggleHeader:function(e){e.stopPropagation(),this.opened=!this.opened,this.fire("toggle-updated",{opened:this.opened})},__activeChanged:function(e){this.opened=!0}}),n.Polymer({_template:n.html(u()),is:"map-menu-container",properties:{}}),n.Polymer({_template:n.html(h()),is:"map-menu-builder",properties:{items:{type:Array,value:[]},selected:{type:String}},__hasChildren:function(e){return e.children.length>0},_hasActiveChildren:function(){}});var f=n.Polymer({_template:n.html(v()),is:"map-menu",properties:{title:{type:String,value:"Content Outline"},data:{type:Array,value:null},manifest:{type:Object,notify:!0,observer:"_manifestChanged"},items:{type:Array,value:null,notify:!0},selected:{type:String,notify:!0},autoScroll:{type:Boolean,value:!1},activeIndicator:{type:Boolean,value:!1}},observers:["_dataChanged(data)"],listeners:{"link-clicked":"__linkClickedHandler","toggle-updated":"__toggleUpdated","active-item":"__activeItemHandler","map-meu-item-hidden-check":"_mapMeuItemHiddenCheckHandler"},ready:function(){},__activeItemHandler:function(e){var n=e.detail;this.refreshActiveChildren(n)},_mapMeuItemHiddenCheckHandler:function(e){var n=e.detail.action,t=(e.detail.target,e.detail.hiddenChild);"closed"===n&&!0===t?this.__updateActiveIndicator(this._activeItem,100,!0):this.__updateActiveIndicator(this._activeItem,100,!1)},refreshActiveChildren:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,t=this._activeItem,i=e;i&&""!==i&&(i.setAttribute("active",!0),this.activeIndicator&&this.__updateActiveIndicator(i,n),this.autoScroll&&this.$.smoothScroll.scroll(i,{duration:300,scrollElement:this})),t&&(t.removeAttribute("active"),this.__updateActiveIndicator(i,n)),this._activeItem=i},_manifestChanged:function(e,n){e&&this.set("data",e.items)},setData:function(e){this.set("data",[]),this.set("data",e)},_dataChanged:function(e){var n=this,t=[];e&&(e.forEach(function(e){e.parent||t.push(e)}),t.forEach(function(t,i){n._setChildren(t,e)}),this.set("items",[]),this.set("items",t))},_setChildren:function(e,n){var t=this,i=n.filter(function(n){return e.id===n.parent});e.children=i,e.children.length>0&&e.children.forEach(function(e){t._setChildren(e,n)})},__hasChildren:function(e){return e.children.length>0},__linkClickedHandler:function(e){this.selected=e.detail.id,this.fire("selected",e.detail.id)},__toggleUpdated:function(e){var n=e.detail.opened?"opened":"closed",t=e.path[0];void 0!==this._activeItem&&this._activeItem.fire("map-menu-item-hidden-check",Object.assign({},{action:n,target:t}))},__isInViewport:function(e){var n=this.__getScrollParent(e);if(!n)return!1;var t=e.offsetTop,i=t+e.offsetHeight,a=n.offsetTop,o=a+n.offsetHeight;return i>a&&t<o},__getScrollParent:function(e){return null==e?null:e.scrollHeight>e.clientHeight?e:this.__getScrollParent(e.parentNode)},__updateActiveIndicator:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];setTimeout(function(){var a=n.$.activeIndicator,o=e.offsetLeft,r=(e.offsetBottom,e.offsetTop),l=e.offsetWidth,d=i?0:e.offsetHeight;t=d>0?t:10,a.setAttribute("style","width:".concat(l,"px;height:").concat(d,"px;top:").concat(r,"px;left:").concat(o,"px"))},t)},__parentsHidden:function(e){var n=e.parentNode;return null==n?null:"MAP-MENU-SUBMENU"===n.tagName&&!n.opened||"MAP-MENU"!==n.tagName&&this.__parentsHidden(n)}});e.MapMenu=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=map-menu.umd.js.map
