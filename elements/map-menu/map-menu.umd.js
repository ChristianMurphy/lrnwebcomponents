!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@polymer/polymer/polymer-legacy.js"),require("@lrnwebcomponents/smooth-scroll/smooth-scroll.js"),require("@polymer/iron-icons/iron-icons.js"),require("@polymer/iron-icon/iron-icon.js"),require("@polymer/paper-button/paper-button.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js"),require("@lrnwebcomponents/lrndesign-avatar/lrndesign-avatar.js"),require("@polymer/iron-collapse/iron-collapse.js"),require("@polymer/iron-behaviors/iron-button-state.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-legacy.js","@lrnwebcomponents/smooth-scroll/smooth-scroll.js","@polymer/iron-icons/iron-icons.js","@polymer/iron-icon/iron-icon.js","@polymer/paper-button/paper-button.js","@polymer/polymer/lib/legacy/polymer.dom.js","@lrnwebcomponents/lrndesign-avatar/lrndesign-avatar.js","@polymer/iron-collapse/iron-collapse.js","@polymer/iron-behaviors/iron-button-state.js"],e):e((n=n||self).MapMenu={},n.polymerLegacy_js,null,null,null,null,n.polymer_dom_js)}(this,function(n,e,t,i,a,o,r){"use strict";function l(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function c(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var s;function d(){var n=c(['\n    <style>\n      :host {\n        display: block;\n        transition: 0.2s all ease-in-out;\n        transition-delay: 0.2s;\n        --map-menu-item-height: 16px;\n      }\n      :host([active]) {\n        background: var(--map-menu-active-color);\n        @apply --map-menu-item-active-item;\n      }\n      paper-button {\n        width: 100%;\n        justify-content: left;\n        margin: 0;\n      }\n      iron-icon {\n        display: inline-block;\n        --iron-icon-height: var(--map-menu-item-height);\n      }\n      .title {\n        text-transform: none;\n      }\n      a,\n      a:hover,\n      a:visited,\n      a:focus {\n        color: inherit;\n      }\n      #track {\n        transition: 0.2s all ease-in-out;\n        transition-delay: 0.5s;\n        position: absolute;\n        right: 0;\n\n        margin-right: 0px;\n        width: 0px;\n        height: 0px;\n        visibility: hidden;\n        opacity: 0;\n      }\n      #track.show-icon {\n        margin-right: 5px;\n        width: 18px;\n        height: 18px;\n        visibility: visible;\n        opacity: 1;\n      }\n    </style>\n    <a tabindex="-1" href$="[[url]]">\n      <paper-button id="wrapper" role="link" noink>\n        <iron-icon hidden$="[[__hasIcon(icon)]]" icon="[[icon]]"></iron-icon>\n        <span class="title">[[title]]</span>\n        <iron-icon\n          id="track"\n          hidden$="[[__hasIcon(trackIcon)]]"\n          icon="[[trackIcon]]"\n        ></iron-icon>\n      </paper-button>\n    </a>\n  ']);return d=function(){return n},n}function p(){var n=c(['\n    <style>\n      :host {\n        display: block;\n        transition: 0.2s all ease-in-out;\n        transition-delay: 0.2s;\n        --map-menu-item-height: 16px;\n      }\n\n      :host([active]) {\n        background: var(--map-menu-active-color);\n        @apply --map-menu-item-active-item;\n      }\n\n      #container {\n        display: flex;\n        align-items: center;\n      }\n\n      #avatarLabel {\n        margin-right: 10px;\n      }\n\n      #center {\n        flex: 1 1 auto;\n      }\n\n      a,\n      a:hover,\n      a:visited,\n      a:focus {\n        color: inherit;\n      }\n\n      lrndesign-avatar {\n        display: inline-block;\n        background: #fff;\n        border-radius: 50%;\n        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);\n        padding: 2px;\n        position: relative;\n        margin-top: -2px;\n        transform: translateY(2px);\n      }\n\n      #link {\n        display: flex;\n        justify-content: flex-start;\n        align-items: flex-start;\n        flex-direction: column;\n      }\n\n      #title {\n        font-size: 16px;\n      }\n\n      #right iron-icon {\n        display: inline-block;\n        color: gray;\n      }\n\n      /* @todo this is a hack */\n      #icon iron-icon {\n        display: inline-block;\n        --iron-icon-height: var(--map-menu-item-height);\n        transform: translateX(10px);\n      }\n\n      paper-button {\n        text-transform: none;\n      }\n    </style>\n    <div id="container">\n      <div hidden$="[[!avatarLabel]]" id="avatarLabel">\n        <lrndesign-avatar label="[[avatarLabel]]"></lrndesign-avatar>\n      </div>\n      <div hidden$="[[!icon]]" id="icon">\n        <iron-icon icon="[[icon]]"></iron-icon>\n      </div>\n      <div id="center">\n        <a tabindex="-1" href$="[[url]]">\n          <paper-button id="title" noink="" role$="[[__titleRole()]]">\n            <div id="label">[[label]]</div>\n            <div id="title">[[title]]</div>\n          </paper-button>\n        </a>\n      </div>\n      <div id="right">\n        <iron-icon\n          id="toggle"\n          icon="[[__collapseIcon]]"\n          aria-role="button"\n          aria-label$="[[__collapseAria]]"\n          tabindex="0"\n        ></iron-icon>\n      </div>\n    </div>\n  '],['\n    <style>\n      :host {\n        display: block;\n        transition: 0.2s all ease-in-out;\n        transition-delay: 0.2s;\n        --map-menu-item-height: 16px;\n      }\n\n      :host([active]) {\n        background: var(--map-menu-active-color);\n        @apply --map-menu-item-active-item;\n      }\n\n      #container {\n        display: flex;\n        align-items: center;\n      }\n\n      #avatarLabel {\n        margin-right: 10px;\n      }\n\n      #center {\n        flex: 1 1 auto;\n      }\n\n      a,\n      a:hover,\n      a:visited,\n      a:focus {\n        color: inherit;\n      }\n\n      lrndesign-avatar {\n        display: inline-block;\n        background: #fff;\n        border-radius: 50%;\n        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);\n        padding: 2px;\n        position: relative;\n        margin-top: -2px;\n        transform: translateY(2px);\n      }\n\n      #link {\n        display: flex;\n        justify-content: flex-start;\n        align-items: flex-start;\n        flex-direction: column;\n      }\n\n      #title {\n        font-size: 16px;\n      }\n\n      #right iron-icon {\n        display: inline-block;\n        color: gray;\n      }\n\n      /* @todo this is a hack */\n      #icon iron-icon {\n        display: inline-block;\n        --iron-icon-height: var(--map-menu-item-height);\n        transform: translateX(10px);\n      }\n\n      paper-button {\n        text-transform: none;\n      }\n    </style>\n    <div id="container">\n      <div hidden$="[[!avatarLabel]]" id="avatarLabel">\n        <lrndesign-avatar label="[[avatarLabel]]"></lrndesign-avatar>\n      </div>\n      <div hidden$="[[!icon]]" id="icon">\n        <iron-icon icon="[[icon]]"></iron-icon>\n      </div>\n      <div id="center">\n        <a tabindex="-1" href$="[[url]]">\n          <paper-button id="title" noink="" role\\$="[[__titleRole()]]">\n            <div id="label">[[label]]</div>\n            <div id="title">[[title]]</div>\n          </paper-button>\n        </a>\n      </div>\n      <div id="right">\n        <iron-icon\n          id="toggle"\n          icon="[[__collapseIcon]]"\n          aria-role="button"\n          aria-label$="[[__collapseAria]]"\n          tabindex="0"\n        ></iron-icon>\n      </div>\n    </div>\n  ']);return p=function(){return n},n}function m(){var n=c(['\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([collapsable]) > map-menu-header {\n        cursor: pointer;\n        display: block;\n      }\n\n      #container {\n        margin-left: 16px;\n      }\n\n      #container ::slotted(map-menu-item) {\n        margin-top: 0.4em;\n      }\n    </style>\n    <map-menu-header\n      avatar-label="[[avatarLabel]]"\n      id="[[id]]"\n      title="[[title]]"\n      label="[[label]]"\n      opened="[[opened]]"\n      url="[[url]]"\n      icon="[[icon]]"\n      selected="[[selected]]"\n    ></map-menu-header>\n    <iron-collapse id="container"> <slot></slot> </iron-collapse>\n  ']);return m=function(){return n},n}function u(){var n=c(["\n    <style>\n      :host {\n        display: block;\n      }\n      #container {\n        padding: 16px 32px;\n      }\n      :host > ::slotted(map-menu-submenu + map-menu-submenu) {\n        margin-top: 16px;\n      }\n    </style>\n    <slot></slot>\n  "]);return u=function(){return n},n}function h(){var n=c(['\n    <style>\n      :host {\n        display: block;\n      }\n    </style>\n\n    <template id="domRepeat" is="dom-repeat" items="[[items]]" as="item">\n      <template is="dom-if" if="[[__hasChildren(item)]]">\n        <map-menu-submenu\n          title="[[item.title]]"\n          id="[[item.id]]"\n          url="[[item.location]]"\n          icon="[[item.metadata.icon]]"\n          open="[[item.metadata.active]]"\n          avatar-label="[[item.metadata.avatarLabel]]"\n          selected="[[selected]]"\n        >\n          <map-menu-builder\n            items="[[item.children]]"\n            selected="[[selected]]"\n          ></map-menu-builder>\n        </map-menu-submenu>\n      </template>\n      <template is="dom-if" if="[[!__hasChildren(item)]]">\n        <map-menu-item\n          title="[[item.title]]"\n          id="[[item.id]]"\n          url="[[item.location]]"\n          icon="[[item.metadata.icon]]"\n          track-icon="[[item.metadata.accessData.trackIcon]]"\n          active-path="[[activePath]]"\n          selected="[[selected]]"\n        ></map-menu-item>\n      </template>\n    </template>\n  ']);return h=function(){return n},n}function v(){var n=c(['\n    <style>\n      :host {\n        --map-menu-active-color: rgba(0, 0, 0, 0.1);\n        display: block;\n        overflow-y: scroll;\n        position: relative;\n        height: 100%;\n      }\n\n      #activeIndicator {\n        background: var(--map-menu-active-color);\n        transition: all 0.3s ease-in-out;\n        position: absolute;\n        @apply --map-menu-active-indicator;\n      }\n\n      map-menu-container {\n        padding: 32px;\n        @apply --map-menu-container;\n      }\n\n      /* turn default active color if indicator is on */\n      :host([active-indicator]) map-menu-builder {\n        --map-menu-active-color: transparent;\n      }\n    </style>\n    <div id="itemslist">\n      <map-menu-container>\n        <div id="activeIndicator"></div>\n        <map-menu-builder\n          id="builder"\n          items="[[items]]"\n          selected="[[selected]]"\n        ></map-menu-builder>\n      </map-menu-container>\n    </div>\n    <smooth-scroll id="smoothScroll"></smooth-scroll>\n  ']);return v=function(){return n},n}e.Polymer({_template:e.html(d()),is:"map-menu-item",properties:(s={icon:{type:String,value:""},trackIcon:{stype:String,value:"",observer:"_trackIconChanged"},title:{type:String,value:""},url:{type:String,value:""}},l(s,"icon",{type:String}),l(s,"id",{type:String,reflectToAttribute:!0}),l(s,"active",{type:Boolean,value:!1}),l(s,"selected",{type:String}),s),observers:["__selectedChanged(selected, id)"],_trackIconChanged:function(n,e){n?this.$.track.classList.add("show-icon"):this.$.track.classList.remove("show-icon")},__selectedChanged:function(n,e){n===e&&this.fire("active-item",this)},_click:function(){this.fire("link-clicked",{id:this.id})},attached:function(){this.fire("child-attached",{id:this.id})},__hasIcon:function(n){return!(!n&&""!==n)}}),e.Polymer({_template:e.html(p()),is:"map-menu-header",properties:{title:{type:String},label:{type:String},avatarLabel:{type:String,value:""},opened:{type:Boolean,observer:"_openedChanged"},url:{type:String,value:""},id:{type:String,reflectToAttribute:!0},icon:{type:String},active:{type:Boolean,reflectToAttribute:!0,value:!1},selected:{type:String,reflectToAttribute:!0}},listeners:{tap:"__tap",keypress:"__keypress"},observers:["__selectedChanged(selected, id)"],_openedChanged:function(n,e){n?(this.__collapseIcon="arrow-drop-down",this.__collapseAria="collapse menu"):(this.__collapseIcon="arrow-drop-up",this.__collapseAria="expand menu")},__selectedChanged:function(n,e){n===e&&this.fire("active-item",this)},attached:function(){this.fire("child-attached",{id:this.id})},__tap:function(n){this.__toggleEventHandler(n)},__keypress:function(n){"Enter"===n.code&&this.__toggleEventHandler(n)},__toggleEventHandler:function(n){var e=r.dom(n).rootTarget;void 0!==e&&void 0!==e.id&&"toggle"===e.id&&this.fire("toggle-header")}}),e.Polymer({_template:e.html(m()),is:"map-menu-submenu",properties:{id:{type:String},title:{type:String},avatarLabel:{type:String},label:{type:String},icon:{type:String},opened:{type:Boolean,value:!1},collapsable:{type:Boolean,value:!0},expandChildren:{type:Boolean,value:!1},selected:{type:String}},observers:["_openChanged(opened)"],listeners:{"child-deactivated":"__childDeactivated","child-activated":"__childActivated","active-item":"__activeChanged","toggle-header":"__toggleHeader","link-clicked":"_headerClickHandler","map-menu-active-item-changed":"_mapMenuActiveItemChangedHandler","map-menu-item-hidden-check":"_mapMenuItemHiddenCheckHandler"},_openChanged:function(n){var e=this.$.container;n&&e.show(),n||e.hide()},_headerClickHandler:function(n){this.opened||(this.opened=!this.opened)},_mapMenuItemHiddenCheckHandler:function(n){n.detail.action,n.detail.target;var e=n.detail.hiddenChild,t=Object.assign({},n.detail);t=!0!==e&&!1===this.opened?Object.assign({},t,{hiddenChild:!0}):Object.assign({},t,{hiddenChild:!1}),this.fire("map-meu-item-hidden-check",t)},__toggleHeader:function(n){n.stopPropagation(),this.opened=!this.opened,this.fire("toggle-updated",{opened:this.opened})},__activeChanged:function(n){this.opened=!0}}),e.Polymer({_template:e.html(u()),is:"map-menu-container",properties:{}}),e.Polymer({_template:e.html(h()),is:"map-menu-builder",properties:{items:{type:Array,value:[]},selected:{type:String}},__hasChildren:function(n){return n.children.length>0},_hasActiveChildren:function(){}});var g=e.Polymer({_template:e.html(v()),is:"map-menu",properties:{title:{type:String,value:"Content Outline"},data:{type:Array,value:null},manifest:{type:Object,notify:!0,observer:"_manifestChanged"},items:{type:Array,value:null,notify:!0},selected:{type:String,notify:!0},autoScroll:{type:Boolean,value:!1},activeIndicator:{type:Boolean,value:!1}},observers:["_dataChanged(data)"],listeners:{"link-clicked":"__linkClickedHandler","toggle-updated":"__toggleUpdated","active-item":"__activeItemHandler","map-meu-item-hidden-check":"_mapMeuItemHiddenCheckHandler"},__activeItemHandler:function(n){var e=n.detail;this.refreshActiveChildren(e)},_mapMeuItemHiddenCheckHandler:function(n){var e=n.detail.action,t=(n.detail.target,n.detail.hiddenChild);"closed"===e&&!0===t?this.__updateActiveIndicator(this._activeItem,200,!0):this.__updateActiveIndicator(this._activeItem,200,!1)},refreshActiveChildren:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,t=this._activeItem,i=n;i&&""!==i&&(i.setAttribute("active",!0),this.activeIndicator&&this.__updateActiveIndicator(i,e),this.autoScroll&&this.$.smoothScroll.scroll(i,{duration:300,scrollElement:this})),t&&(t.removeAttribute("active"),this.__updateActiveIndicator(i,e)),this._activeItem=i},_manifestChanged:function(n,e){n&&this.set("data",n.items)},setData:function(n){this.set("data",[]),this.set("data",n)},_dataChanged:function(n){var e=this,t=[];n&&(n.forEach(function(n){n.parent||t.push(n)}),t.forEach(function(t,i){e._setChildren(t,n)}),this.set("items",[]),this.set("items",t))},_setChildren:function(n,e){var t=this,i=e.filter(function(e){return n.id===e.parent});n.children=i,n.children.length>0&&n.children.forEach(function(n){t._setChildren(n,e)})},__hasChildren:function(n){return n.children.length>0},__linkClickedHandler:function(n){this.selected=n.detail.id,this.fire("selected",n.detail.id)},__toggleUpdated:function(n){var e=n.detail.opened?"opened":"closed",t=n.path[0];void 0!==this._activeItem&&this._activeItem.fire("map-menu-item-hidden-check",Object.assign({},{action:e,target:t}))},__isInViewport:function(n){var e=this.__getScrollParent(n);if(!e)return!1;var t=n.offsetTop,i=t+n.offsetHeight,a=e.offsetTop,o=a+e.offsetHeight;return i>a&&t<o},__getScrollParent:function(n){return null==n?null:n.scrollHeight>n.clientHeight?n:this.__getScrollParent(n.parentNode)},__updateActiveIndicator:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];setTimeout(function(){var a=e.$.activeIndicator,o=n.offsetLeft,r=(n.offsetBottom,n.offsetTop),l=n.offsetWidth,c=i?0:n.offsetHeight;t=c>0?t:10,a.setAttribute("style","width:".concat(l,"px;height:").concat(c,"px;top:").concat(r,"px;left:").concat(o,"px"))},t)},__parentsHidden:function(n){var e=n.parentNode;return null==e?null:"MAP-MENU-SUBMENU"===e.tagName&&!e.opened||"MAP-MENU"!==e.tagName&&this.__parentsHidden(e)}});n.MapMenu=g,Object.defineProperty(n,"__esModule",{value:!0})});
//# sourceMappingURL=map-menu.umd.js.map
