!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@polymer/polymer/polymer-legacy.js"),require("@polymer/polymer/lib/utils/async.js"),require("@polymer/paper-input/paper-input.js"),require("@polymer/paper-dialog/paper-dialog.js"),require("@lrnwebcomponents/simple-modal/simple-modal.js"),require("@polymer/paper-icon-button/paper-icon-button.js"),require("@polymer/paper-button/paper-button.js"),require("@polymer/polymer/polymer-element.js"),require("@polymer/polymer/lib/utils/render-status.js"),require("@polymer/iron-list/iron-list.js"),require("@polymer/iron-a11y-keys/iron-a11y-keys.js"),require("@polymer/iron-icons/iron-icons.js"),require("@lrnwebcomponents/drawing-icons/drawing-icons.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-legacy.js","@polymer/polymer/lib/utils/async.js","@polymer/paper-input/paper-input.js","@polymer/paper-dialog/paper-dialog.js","@lrnwebcomponents/simple-modal/simple-modal.js","@polymer/paper-icon-button/paper-icon-button.js","@polymer/paper-button/paper-button.js","@polymer/polymer/polymer-element.js","@polymer/polymer/lib/utils/render-status.js","@polymer/iron-list/iron-list.js","@polymer/iron-a11y-keys/iron-a11y-keys.js","@polymer/iron-icons/iron-icons.js","@lrnwebcomponents/drawing-icons/drawing-icons.js"],t):t((e=e||self).LrnsysOutline={},e.polymerLegacy_js,e.async,null,null,null,null,null,e.polymerElement_js,e.renderStatus_js)}(this,function(e,t,n,i,o,s,a,r,l,d){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function v(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function y(){var e=v(['\n    <style>\n      :host {\n        display: block;\n        --indent-multiplier: 36px;\n      }\n      :host(.collapse-to-remove) #wrapper {\n        height: 0px;\n        background-color: var(--lrnsys-outline-gap-color, #eeeeee);\n        border: 1px solid #999999;\n        overflow: hidden;\n      }\n      :host #wrapper[data-indent="0"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 0);\n      }\n      :host #wrapper[data-indent="1"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 1);\n      }\n      :host #wrapper[data-indent="2"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 2);\n      }\n      :host #wrapper[data-indent="3"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 3);\n      }\n      :host #wrapper[data-indent="4"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 4);\n      }\n      :host #wrapper[data-indent="5"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 5);\n      }\n      :host #wrapper[data-indent="6"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 6);\n      }\n      :host #wrapper[data-indent="7"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 7);\n      }\n      :host #wrapper[data-indent="8"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 8);\n      }\n      :host #wrapper[data-indent="9"] #gap {\n        margin-right: calc(var(--indent-multiplier) * 9);\n      }\n      :host #input {\n        flex-grow: 1;\n        margin-right: 10px;\n      }\n      :host #wrapper {\n        display: flex;\n        height: 40px;\n        border-radius: 16px;\n        transition: 0.1s all ease;\n        background-color: transparent;\n        border: 1px solid transparent;\n        padding: 8px;\n        transition: 0.3s all linear;\n      }\n      :host([focus-state]) #wrapper,\n      :host(:focus) #wrapper,\n      :host(:hover) #wrapper {\n        cursor: pointer;\n        background-color: var(--lrnsys-outline-gap-color, #eeeeee);\n        border: 1px solid #999999;\n      }\n      #gap {\n        padding: 2px;\n        transition: 0.3s all ease;\n        border-left: solid 4px transparent;\n      }\n      :host([focus-state]) #gap,\n      :host(:focus) #gap,\n      :host(:hover) #gap {\n        border-left: solid 4px var(--lrnsys-outline-gap-color, #aaaaaa);\n      }\n      paper-icon-button {\n        font-size: 16px;\n        height: 36px;\n        padding: 10px;\n        margin: 4px;\n        display: none;\n        border-radius: 0.16px;\n      }\n      :host([focus-state]) paper-icon-button,\n      :host(:focus) paper-icon-button,\n      :host(:hover) paper-icon-button {\n        width: 36px;\n        display: inline-flex;\n      }\n      paper-icon-button#add {\n        width: 36px;\n        margin-right: 2px;\n        color: white;\n        background-color: var(--lrnsys-outline-add-button-color, #018dff);\n      }\n      paper-icon-button#delete {\n        color: white;\n        background-color: var(--lrnsys-outline-delete-button-color, #cc0000);\n      }\n    </style>\n    <div id="wrapper" data-indent$="[[indentLevel]]">\n      <div id="gap"></div>\n      <paper-input\n        id="input"\n        label="Enter a page title"\n        value="{{title}}"\n        no-label-float=""\n      >\n      </paper-input>\n      <paper-icon-button\n        id="down"\n        title="Move downwards"\n        icon="icons:arrow-downward"\n        on-tap="moveDown"\n      ></paper-icon-button>\n      <paper-icon-button\n        id="left"\n        title="Outdent"\n        icon="icons:arrow-back"\n        on-tap="moveOut"\n      ></paper-icon-button>\n      <paper-icon-button\n        id="right"\n        title="Indent"\n        icon="icons:arrow-forward"\n        on-tap="moveIn"\n      ></paper-icon-button>\n      <paper-icon-button\n        id="up"\n        title="Move upwards"\n        icon="icons:arrow-upward"\n        on-tap="moveUp"\n      ></paper-icon-button>\n      <paper-icon-button\n        id="add"\n        title="Add Item"\n        icon="icons:add"\n        on-tap="add"\n      ></paper-icon-button>\n      <paper-icon-button\n        id="delete"\n        title="Delete"\n        icon="icons:delete"\n        on-tap="delete"\n      ></paper-icon-button>\n    </div>\n    <iron-a11y-keys\n      target="[[__inputTarget]]"\n      keys="esc"\n      on-keys-pressed="_onEsc"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target="[[__inputTarget]]"\n      keys="enter"\n      on-keys-pressed="_onEnter"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target="[[__inputTarget]]"\n      keys="backspace"\n      on-keys-pressed="_onBackspace"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target="[[__inputTarget]]"\n      keys="up"\n      on-keys-pressed="_onArrowUp"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target="[[__inputTarget]]"\n      keys="down"\n      on-keys-pressed="_onArrowDown"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target="[[__inputTarget]]"\n      keys="tab"\n      on-keys-pressed="_onTab"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target="[[__inputTarget]]"\n      keys="shift+tab"\n      on-keys-pressed="_onShiftTab"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target="[[__inputTarget]]"\n      keys="shift+up"\n      on-keys-pressed="_onShiftArrowUp"\n    ></iron-a11y-keys>\n    <iron-a11y-keys\n      target="[[__inputTarget]]"\n      keys="shift+down"\n      on-keys-pressed="_onShiftArrowDown"\n    ></iron-a11y-keys>']);return y=function(){return e},e}var g,_,k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,m(t).apply(this,arguments))}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,l.PolymerElement),n=t,o=[{key:"template",get:function(){return l.html(y())}},{key:"tag",get:function(){return"lrnsys-outline-item"}},{key:"properties",get:function(){return{indentLevel:{type:Number,value:0},index:{type:Number,value:0},parent:{type:String,value:null},title:{type:String,value:null,notify:!0,reflectToAttribute:!0},focusState:{type:Boolean,value:!1,reflectToAttribute:!0}}}}],(i=[{key:"_focusin",value:function(e){this.focusState=!0}},{key:"_focusout",value:function(e){this.focusState=!1}},{key:"connectedCallback",value:function(){f(m(t.prototype),"connectedCallback",this).call(this),this.dispatchEvent(new CustomEvent("attached-item",{bubbles:!0,cancelable:!0,composed:!0,detail:{item:this}}))}},{key:"ready",value:function(){f(m(t.prototype),"ready",this).call(this),this.__inputTarget=this.$.input,this.dispatchEvent(new CustomEvent("focus-item",{bubbles:!0,cancelable:!0,composed:!0,detail:this})),d.afterNextRender(this,function(){var e=this;this.addEventListener("change",this._onChange.bind(this)),this.addEventListener("focus",function(t){e.dispatchEvent(new CustomEvent("focus-item",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}),this.addEventListener("mouseover",function(t){e.dispatchEvent(new CustomEvent("focus-item",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}),this.addEventListener("blur",function(t){e.dispatchEvent(new CustomEvent("blur-item",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}),this.addEventListener("mouseout",function(t){e.dispatchEvent(new CustomEvent("blur-item",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}),this.$.input.addEventListener("focused-changed",this._focusin.bind(this)),this.addEventListener("focusin",this._focusin.bind(this)),this.addEventListener("focusout",this._focusout.bind(this))})}},{key:"disconnectedCallback",value:function(){var e=this;this.removeEventListener("change",this._onChange.bind(this)),this.removeEventListener("focus",function(t){e.dispatchEvent(new CustomEvent("focus-item",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}),this.removeEventListener("mouseover",function(t){e.dispatchEvent(new CustomEvent("focus-item",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}),this.removeEventListener("blur",function(t){e.dispatchEvent(new CustomEvent("blur-item",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}),this.removeEventListener("mouseout",function(t){e.dispatchEvent(new CustomEvent("blur-item",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}),this.$.input.removeEventListener("focused-changed",this._focusin.bind(this)),this.removeEventListener("focusin",this._focusin.bind(this)),this.removeEventListener("focusout",this._focusout.bind(this)),f(m(t.prototype),"disconnectedCallback",this).call(this)}},{key:"focus",value:function(){return this.$.input.focus(),this}},{key:"value",value:function(){return this.title=this.$.input.value,this.title}},{key:"delete",value:function(){this.dispatchEvent(new CustomEvent("delete-item",{bubbles:!0,cancelable:!0,composed:!0,detail:{item:this}}))}},{key:"setIndent",value:function(e){this.dispatchEvent(new CustomEvent("indent-item",{bubbles:!0,cancelable:!0,composed:!0,detail:{item:this,increase:e>0}}))}},{key:"add",value:function(){var e=this.$.input.shadowRoot.querySelector("#"+this.$.input._inputId).inputElement.selectionStart,t=this.title;this.dispatchEvent(new CustomEvent("add-item",{bubbles:!0,cancelable:!0,composed:!0,detail:{item:this,value:t.slice(0,e),new:t.slice(e,t.length)}})),this.title=t.slice(0,e)}},{key:"move",value:function(e){this.dispatchEvent(new CustomEvent("move-item",{bubbles:!0,cancelable:!0,composed:!0,detail:{item:this,moveUp:e<0}}))}},{key:"moveUp",value:function(e){this.move(-1)}},{key:"moveDown",value:function(e){this.move(1)}},{key:"moveOut",value:function(e){this.setIndent(-1)}},{key:"moveIn",value:function(e){this.setIndent(1)}},{key:"setSelection",value:function(e,t){var n=void 0!==e?e:0,i=void 0!==t?t:n;try{this.$.input.querySelector("input").setSelectionRange(n,i)}catch(e){console.log(e)}this.focus()}},{key:"_onChange",value:function(){this.dispatchEvent(new CustomEvent("change-item",{bubbles:!0,cancelable:!0,composed:!0,detail:{item:this,value:this.title}}))}},{key:"_onEsc",value:function(){this.focus(),this._focusout()}},{key:"_onEnter",value:function(){var e=this.$.input.shadowRoot.querySelector("#"+this.$.input._inputId).inputElement.selectionStart,t=this.title;this.dispatchEvent(new CustomEvent("add-item",{bubbles:!0,cancelable:!0,composed:!0,detail:{item:this,value:t.slice(0,e),new:t.slice(e,t.length)}})),this.title=t.slice(0,e),this._focusout()}},{key:"_onBackspace",value:function(e){this._getSelection().toString()==this.title?(e.detail.keyboardEvent.preventDefault(),this.dispatchEvent(new CustomEvent("delete-item",{bubbles:!0,cancelable:!0,composed:!0,detail:{item:this}}))):0==this.$.input.shadowRoot.querySelector("#"+this.$.input._inputId).inputElement.selectionStart&&this.dispatchEvent(new CustomEvent("indent-item",{bubbles:!0,cancelable:!0,composed:!0,detail:{item:this,increase:!1}}))}},{key:"_getSelection",value:function(){return this.parentNode&&this.parentNode.parentNode&&this.parentNode.parentNode.getSelection?this.parentNode.parentNode.getSelection():window.getSelection()}},{key:"_onArrowUp",value:function(){0==this.$.input.shadowRoot.querySelector("#"+this.$.input._inputId).inputElement.selectionStart&&this.dispatchEvent(new CustomEvent("focus-item",{bubbles:!0,cancelable:!0,composed:!0,detail:{item:this,moveUp:!0}}))}},{key:"_onArrowDown",value:function(){this.$.input.shadowRoot.querySelector("#"+this.$.input._inputId).inputElement.selectionStart==this.title.length&&this.dispatchEvent(new CustomEvent("focus-item",{bubbles:!0,cancelable:!0,composed:!0,detail:{item:this,moveUp:!1}}))}},{key:"_onShiftTab",value:function(){this.setIndent(-1)}},{key:"_onTab",value:function(e){0==this.$.input.shadowRoot.querySelector("#"+this.$.input._inputId).inputElement.selectionStart&&(e.preventDefault(),this.setIndent(1))}},{key:"_onShiftArrowUp",value:function(){this.move(-1)}},{key:"_onShiftArrowDown",value:function(){this.move(1)}}])&&c(n.prototype,i),o&&c(n,o),t}();function w(){var e=v(['\n    <style>\n      :host {\n        display: block;\n      }\n      :host kbd {\n        display: inline-block;\n        background: #333;\n        color: white;\n        border-radius: 4px;\n        margin: 4px 4px 4px 0;\n        padding: 8px;\n        font-family: Verdana, Geneva, Tahoma, sans-serif;\n        font-size: 85%;\n      }\n    </style>\n    <paper-icon-button\n      title="Keyboard directions"\n      id="dialogtrigger"\n      icon="icons:help"\n      on-tap="openDirections"\n    ></paper-icon-button>\n    <paper-dialog id="modal" with-backdrop="">\n      <h2>Keyboard shortcuts</h2>\n      <div>\n        <paper-icon-button\n          title="close directions"\n          style="position: absolute;top: 0; right:0;"\n          icon="icons:cancel"\n          on-tap="closeDirections"\n        ></paper-icon-button>\n        <ul>\n          <li><kbd>Enter</kbd> to <strong>add</strong> an item</li>\n          <li>\n            <kbd>Backspace</kbd> <em>with entire item selected</em> to\n            <strong>delete</strong> an item.\n          </li>\n          <li>\n            <kbd>↑</kbd> / <kbd>↓</kbd> / <kbd>←</kbd> / <kbd>→</kbd> to\n            <strong>navigate</strong> through items\n          </li>\n          <li>\n            <kbd>Tab</kbd> / <kbd>Shift+Tab</kbd>\n            <em>at the beginning of a line</em> to\n            <strong>indent/outdent</strong>\n          </li>\n          <li><kbd>Shift+↑</kbd> / <kbd>Shift+↓</kbd> to items up/down</li>\n        </ul>\n      </div>\n    </paper-dialog>\n    <div id="itemslist">\n      <template is="dom-repeat" items="{{items}}" as="item">\n        <lrnsys-outline-item\n          disable-down="[[item.disableDown]]"\n          disable-left="[[item.disableLeft]]"\n          disable-right="[[item.disableRight]]"\n          disable-up="[[item.disableUp]]"\n          id$="[[item.id]]"\n          index$="[[item.index]]"\n          indent-level="{{item.indent}}"\n          parent="{{item.parent}}"\n          title="{{item.title}}"\n        >\n        </lrnsys-outline-item>\n      </template>\n    </div>\n  ']);return w=function(){return e},e}window.customElements.define(k.tag,k);var I=t.Polymer((_={_template:t.html(w()),is:"lrnsys-outline",listeners:(g={"delete-item":"_handleRemoveItem","indent-item":"_handleIndentItem","focus-item":"_handleFocusItem","add-item":"_handleAddItem","move-item":"_handleMoveItem","change-item":"_handleChangeItem"},p(g,"focus-item","_handleFocusItem"),p(g,"blur-item","_handleBlurItem"),g),properties:{data:{type:Array,value:null},items:{type:Array,value:null,notify:!0},activeItem:{type:Object,notify:!0}},openDirections:function(e){this.$.modal.opened=!0},closeDirections:function(e){var t=this;this.$.modal.opened=!1,n.microTask.run(function(){setTimeout(function(){t.$.dialogtrigger.focus()},50)})},attached:function(){window.SimpleModal.requestAvailability(),this.__modal=this.$.modal,document.body.addEventListener("iron-overlay-canceled",this._accessibleFocus.bind(this)),document.body.appendChild(this.$.modal)},_accessibleFocus:function(e){var t=this;e.detail===this.__modal&&n.microTask.run(function(){setTimeout(function(){t.$.dialogtrigger.focus()},50)})},ready:function(){(null===this.data||this.data.length<1)&&(this.__tempid=void 0===this.__tempid?0:this.__tempid+1,this.data=[{id:"outline-item-"+this.__tempid,title:"",order:0,parent:null}]),this.setData(this.data)},setData:function(e){if(void 0!==e&&e.length>0){var t=-1;for(var n in e){var i=parseInt(this._getIndent(e,n));this.__tempid=void 0===this.__tempid?0:this.__tempid+1,e[n].index=parseInt(n),e[n].indent=i,e[n].prevSibling=this._getSibling(parseInt(n),i,!0),e[n].nextSibling=this._getSibling(parseInt(n),i,!1),e[n].disableUp=null===e[n].prevSibling,e[n].disableDown=null===e[n].nextSibling,e[n].disableLeft=0===i,e[n].disableRight=i>t,e[n].id=void 0===e[n].id?"outline-item-"+this.__tempid:e[n].id,t=i}}this.set("items",[]),this.set("items",e)},getData:function(){for(var e in this.items)this.items[e].order=this._getOrder(this.items[e]),this.notifyPath("items.".concat(e,".order"));return this.items},addItem:function(e){var t=this,i=e.item,o=e.new,s=this.items.findIndex(function(e){return e.id===i.id})+1;this.__tempid=this.__tempid+1,this.splice("items",s,0,{id:"outline-item-"+this.__tempid,title:o,indent:i.indent,parent:i.parent}),this.items[s].indentLevel=i.indent,this.notifyPath("items.".concat(s,".indentLevel")),this.setData(this.items),void 0!==this.__focusedItem&&null!==this.__focusedItem&&n.microTask.run(function(){setTimeout(function(){t.__focusedItem=i.nextElementSibling,t.__focusedItem.focus()},50)})},removeItem:function(e){var t=this.items.findIndex(function(t){return t.id===e.id}),n=document.createElement("paper-button");n.raised=!0,n.addEventListener("click",this._deleteItemConfirm.bind(this)),n.appendChild(document.createTextNode("Yes, delete"));var i=new CustomEvent("simple-modal-show",{bubbles:!0,cancelable:!0,detail:{title:"Do you really want to delete ".concat(this.items[t].title,"?"),elements:{buttons:n},invokedBy:e.$.delete,clone:!1}});this.dispatchEvent(i)},_deleteItemConfirm:function(e){var t=this,i=this.items.findIndex(function(e){return e.id===t.activeItem.id});this.activeItem.classList.add("collapse-to-remove");var o=new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}});this.dispatchEvent(o),setTimeout(function(){for(var e in t.__focusedItem=t.activeItem.previousElementSibling,t.items)t.items[e].parent==t.items[i].id&&(t.items[e].parent=t.items[i].parent);t.activeItem.classList.remove("collapse-to-remove"),t.splice("items",i,1),void 0!==t.__focusedItem&&null!==t.__focusedItem&&n.microTask.run(function(){setTimeout(function(){t.__focusedItem.focus()},50)})},300)},moveItem:function(e,t){var i=this,o=e.index,s=this._getLastChild(e),a=s-o+1,r=t?this.items[o].prevSibling:this._getLastChild(this.items[s+1])-a+1;if(r>-1&&r<this.items.length&&(t&&!e.disableUp||!t&&!e.disableDown)){var l=this.splice("items",o,a);this.splice("items",r,0,l),this.__focusedItem=this.$.itemslist.querySelectorAll("lrnsys-outline-item")[r],this.setData(this.items),void 0!==this.__focusedItem&&null!==this.__focusedItem&&n.microTask.run(function(){setTimeout(function(){i.__focusedItem.focus()},50)})}},_adjustIndent:function(e,t){if(t>0&&!e.disableRight||t<0&&!e.disableLeft){var n=parseInt(e.index),i=e.indent,o=e.indent+t,s=n+1,a=null!==e.prevSibling&&"undefined"!==u(e.prevSibling)?e.prevSibling.id:null,r=this._getItemById(e.parent)&&this._getItemById(e.parent).parent?this._getItemById(e.parent).parent.id:null;for(e.indent=o,e.parent=t>0?a:r,e.prevSibling=this._getSibling(n,o,!0),e.nextSibling=this._getSibling(n,o,!1),e.disableUp=null===e.prevSibling,e.disableDown=null===e.nextSibling,e.disableLeft=0===o,e.disableRight=null===this.items[n-1]||"undefined"===u(this.items[n-1])||o>this.items[n-1].indentLevel,this.set("items.".concat(n),e),this.notifyPath("items.".concat(n,".*"));null!==this.items[s]&&void 0!==this.items[s]&&i<this.items[s].indentLevel;)this.items[s].indentLevel=this.items[s].indentLevel+t,this.notifyPath("items.".concat(s,".indentLevel")),s++,next=this.items[s]}},_getLastChild:function(e){var t=null!=e?this._getSibling(e.index,e.indent,!1):null;return null!=t?t-1:"undefined"!==u(e)&&null!==e.parent&&null!==e.parent&&null!==this._getItemById(e.parent)?this._getLastChild(this._getItemById(e.parent)):this.items.length-1},_getIndent:function(e,t){if("undefined"!==u(e[t].parent)){var n=e.findIndex(function(n){return n.id===e[t].parent});if(-1!==n&&"undefined"!==u(e[n])&&void 0!==e[n].indent)return e[n].indent+1}return 0},_getOrder:function(e){var t=0,n=0;for(var i in this.items)this.items[i].parent==e.parent&&this.items[i].id==e.id?n=t:this.items[i].parent==e.parent&&t++;return n},_getSibling:function(e,t,n){var i=n?-1:1,o=e+i,s=null;if(null!==this.items)for(;o<this.items.length&&o>-1;)null===s&&"undefined"!==u(this.items[o])&&"undefined"!==u(this.items[e])&&this.items[o].parent===this.items[e].parent&&(s=o),o+=i;return s},_getItemById:function(e,t){var n=this.items.findIndex(function(t){return t.id===e});return t=void 0===t?0:t,void 0!==this.items[n+t]?this.items[n+t]:null},_handleAddItem:function(e){this.addItem(e.detail)},_handleRemoveItem:function(e){this.activeItem=e.detail.item,this.removeItem(e.detail.item)},_handleMoveItem:function(e){this.activeItem=e.detail.item,this.moveItem(e.detail.item,e.detail.moveUp,e.detail.byGroup)},_handleFocusItem:function(e){(e.detail.moveUp?e.detail.item.previousElementSibling:e.detail.item.nextElementSibling).setSelection()},_handleIndentItem:function(e){var t=e.detail.increase?1:-1;this._adjustIndent(this._getItemById(e.detail.item.id),t),this.setData(this.items)},_handleChangeItem:function(e){if(null!=this._getItemById(e.detail.item.id)){var t=this.items.findIndex(function(t){return t.id===e.detail.item.id});"undefined"!==u(this.items[t])&&(this.items[t].title=e.detail.value,this.notifyPath("items.".concat(t,".title")))}}},p(_,"_handleFocusItem",function(e){this.__focusedItem=e.srcElement}),p(_,"_handleBlurItem",function(e){}),_));e.LrnsysOutline=I,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=lrnsys-outline.umd.js.map
