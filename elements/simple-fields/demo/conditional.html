<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
    <title>simple-fields using JSON Schema Demo</title>
    
    <script src="../../../node_modules/@lrnwebcomponents/deduping-fix/deduping-fix.js"></script>
    <script src="../../../node_modules/web-animations-js/web-animations-next-lite.min.js"></script>
    <script type="module">
      import '@polymer/iron-demo-helpers/demo-pages-shared-styles.js';
      import '@polymer/iron-demo-helpers/demo-snippet.js';
      import '../simple-fields.js';
    </script>
    <style is="custom-style" include="demo-pages-shared-styles"></style>
  </head>
  <body>
    <div class="vertical-section-container centered">
      <h1>simple-fields using JSON Schema demo</h1>
      <demo-snippet>
        <style>#submission {width: 100%;}</style>
        <script>
          window.onload = () => {
            let schema = document.getElementById('schema'),
              usa = [ 'AL', 'AK', 'AS', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'DC', 'FM', 'FL', 'GA', 'GU', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MH', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'MP', 'OH', 'OK', 'OR', 'PW', 'PA', 'PR', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VI', 'VA', 'WA', 'WV', 'WI', 'WY' ],
              can = ['AB', 'BC', 'MB', 'NB', 'NL', 'NT', 'NS', 'NU', 'ON', 'PE', 'QC', 'SK', 'YT'],
              countryChanged = (e) => {
                schema.formElements["province"].element.itemsList = e.value === "USA" ? usa : can;
                schema.formElements["province"].element.value = schema.formElements["province"].element.itemsList[0];
              },
              contactChanged = (e) => {
                schema.formElements["phoneNumbers"].element.value = undefined;
                schema.formElements["phoneNumbers"].element.hidden = !e.value;
              };
            schema.schema = {
              $schema: "http://json-schema.org/schema#",
              title: "Store",
              type: "object",
              properties: {
                country: {
                  title: "Country",
                  type: "string",
                  options: ["USA", "Canada"],
                  onValueChanged: countryChanged
                },
                province: {
                  title: "State/Province",
                  type: "string",
                  itemsList: usa
                },
                contact: {
                  title: "Contact me by phone.",
                  type: "boolean",
                  onValueChanged: contactChanged
                },
                phoneNumbers: {
                  title: "Phone numbers",
                  description: "List phone numbers and type of number.",
                  type: "array",
                  hidden: true,
                  items: {
                    type: "object",
                    previewBy: ["phoneNumber"],
                    properties: {
                      type: {
                        title: "Type",
                        type: "string",
                        options: {
                          "cell": "Cell",
                          "home": "Home",
                          "work": "Work"
                        }
                      },
                      phoneNumber: {
                        title: "Phone Number",
                        type: "string"
                      }
                    }
                  }
                }
              }
            };
          };
        </script>
        <template>
          <form id="form"><simple-fields id="schema"></simple-fields></form>
          </form>
        </template>
      </demo-snippet>
    </div>
  </body>
</html>
