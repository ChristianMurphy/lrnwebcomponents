!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@lrnwebcomponents/simple-icon-picker/simple-icon-picker.js"),require("@lrnwebcomponents/simple-colors/lib/simple-colors-picker.js"),require("@lrnwebcomponents/simple-picker/simple-picker.js"),require("@lrnwebcomponents/voice-recorder/voice-recorder.js"),require("@lrnwebcomponents/simple-login/lib/simple-camera-snap.js"),require("lit-element/lit-element.js"),require("@lrnwebcomponents/simple-colors/simple-colors.js"),require("@lrnwebcomponents/simple-fields/lib/simple-fields-field.js"),require("@vaadin/vaadin-upload/vaadin-upload.js"),require("@lrnwebcomponents/code-editor/code-editor.js"),require("@lrnwebcomponents/a11y-tabs/a11y-tabs.js"),require("@lrnwebcomponents/a11y-tabs/lib/a11y-tab.js"),require("@polymer/paper-icon-button/paper-icon-button.js"),require("@polymer/iron-icons/editor-icons.js"),require("@polymer/iron-icons/iron-icons.js"),require("@polymer/paper-button/paper-button.js"),require("@polymer/iron-icon/iron-icon.js"),require("@lrnwebcomponents/simple-tooltip/simple-tooltip.js")):"function"==typeof define&&define.amd?define(["exports","@lrnwebcomponents/simple-icon-picker/simple-icon-picker.js","@lrnwebcomponents/simple-colors/lib/simple-colors-picker.js","@lrnwebcomponents/simple-picker/simple-picker.js","@lrnwebcomponents/voice-recorder/voice-recorder.js","@lrnwebcomponents/simple-login/lib/simple-camera-snap.js","lit-element/lit-element.js","@lrnwebcomponents/simple-colors/simple-colors.js","@lrnwebcomponents/simple-fields/lib/simple-fields-field.js","@vaadin/vaadin-upload/vaadin-upload.js","@lrnwebcomponents/code-editor/code-editor.js","@lrnwebcomponents/a11y-tabs/a11y-tabs.js","@lrnwebcomponents/a11y-tabs/lib/a11y-tab.js","@polymer/paper-icon-button/paper-icon-button.js","@polymer/iron-icons/editor-icons.js","@polymer/iron-icons/iron-icons.js","@polymer/paper-button/paper-button.js","@polymer/iron-icon/iron-icon.js","@lrnwebcomponents/simple-tooltip/simple-tooltip.js"],t):t((e=e||self).SimpleFields={},null,null,null,null,null,e.litElement_js,e.simpleColors_js,null,null,null,e.a11yTabs_js,e.a11yTab_js)}(this,function(e,t,n,i,r,o,a,l,s,d,u,c,p){"use strict";function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i,r,o=x(e);if(t){var a=x(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return i=this,!(r=n)||"object"!=typeof r&&"function"!=typeof r?_(i):r}}function E(e,t,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function C(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function j(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function O(){var e=C(['\n      <fieldset id="fieldset">\n        <legend id="label" ?hidden="','">','</legend>\n        <div>\n          <simple-picker\n            id="picker"\n            aria-label="Source..."\n            required\n            value="','"\n            @value-changed="','"\n            .options="','"\n          >\n          </simple-picker>\n          <simple-fields-field\n            id="url"\n            ?hidden="','"\n            value="','"\n            @value-changed="','"\n            label="URL"\n            type="url"\n            auto-validate=""\n          ></simple-fields-field>\n          <vaadin-upload\n            capture\n            form-data-name="file-upload"\n            ?hidden="','"\n            id="fileupload"\n            @upload-before="','"\n            @upload-response="','"\n          ></vaadin-upload>\n          <div id="camerahole" ?hidden="','"></div>\n          <div id="voicerecorder" ?hidden="','"></div>\n          <div id="description" ?hidden="','">\n            ',"\n          </div>\n        </div>\n      </fieldset>\n    "]);return O=function(){return e},e}function T(){var e=C(["\n        :host {\n          display: block;\n          visibility: visible;\n          transition: 0.3s all ease;\n          box-sizing: border-box;\n          pointer-events: all;\n          overflow: visible;\n          font-family: var(--simple-fields-font-family, sans-serif);\n          --simple-camera-snap-width: 100px;\n          --simple-camera-snap-height: calc(100px * 9 / 16);\n          --simple-camera-snap-color: var(--simple-fields-color, black);\n          --simple-camera-snap-background: var(\n            --simple-fields-background-color,\n            #fff\n          );\n          --simple-camera-snap-border-radius: 2px;\n          --lumo-font-family: var(--simple-fields-font-family, sans-serif);\n          --lumo-error-color: var(--simple-fields-error-color, #dd2c00);\n          --lumo-primary-font-color: var(--simple-fields-color, black);\n          --lumo-base-color: var(--simple-fields-background-color, #fff);\n          --lumo-primary-contrast-color: var(\n            --simple-fields-background-color,\n            #fff\n          );\n          --lumo-primary-color: var(--simple-fields-color, black);\n          --lumo-dark-primary-color: ar(--simple-fields-color, black);\n          --lumo-light-primary-color: var(--simple-fields-color, black);\n          --lumo-primary-text-color: var(--simple-fields-color, black);\n          --lumo-body-text-color: var(--simple-fields-color, black);\n          --lumo-header-text-color: var(--simple-fields-color, black);\n          --lumo-secondary-text-color: var(--simple-fields-color, black);\n          --lumo-disabled-text-color: var(--simple-fields-border-color, #999);\n          color: var(--simple-fields-color, black);\n          background-color: var(--simple-fields-background-color, #fff);\n        }\n        vaadin-upload[dragover] {\n          border-color: var(--simple-colors-default-theme-accent-3, #77e2ff);\n        }\n        vaadin-upload-file {\n          --disabled-text-color: #var(--simple-fields-border-color, #999);\n        }\n        :host(:last-of-type) {\n          margin-bottom: 0;\n        }\n        #description {\n          font-family: var(--simple-fields-detail-font-family, sans-serif);\n          font-size: var(--simple-fields-detail-font-size, 12px);\n          line-height: var(--simple-fields-detail-line-height, 22px);\n        }\n        fieldset {\n          padding: var(--simple-fields-margin-small, 8px)\n            var(--simple-fields-margin, 16px);\n          margin: var(--simple-fields-margin-small, 8px) 0\n            var(--simple-fields-margin, 16px);\n          border: 1px solid var(--simple-fields-border-color-light, #ccc);\n          border-radius: var(--simple-fields-border-radius, 2px);\n          transition: all 0.3s ease-in-out;\n        }\n        fieldset > div {\n          display: flex;\n          flex-wrap: wrap;\n          align-items: center;\n          justify-content: space-between;\n        }\n        fieldset > div > *:not(#picker) {\n          flex: 1 1 auto;\n        }\n        #label {\n          font-family: var(--simple-fields-font-family, sans-serif);\n          font-size: var(--simple-fields-font-size, 16px);\n          line-height: var(--simple-fields-line-height, 22px);\n        }\n        :host([error]) #label {\n          color: var(--simple-fields-error-color, #dd2c00);\n          transition: all 0.3s ease-in-out;\n        }\n        #picker {\n          margin-bottom: 0;\n          margin-right: 5px;\n        }\n        vaadin-upload {\n          padding: 5px;\n          margin: 0;\n        }\n        simple-camera-snap {\n          position: relative;\n          --simple-camera-snap-button-container-position: absolute;\n          --simple-camera-snap-button-container-bottom: 2px;\n          --simple-camera-snap-button-container-z-index: 5;\n          --simple-camera-snap-button-border-radius: 100%;\n          --simple-camera-snap-button-opacity: 0.7;\n        }\n      "]);return T=function(){return e},e}var q=function(e){k(n,l.SimpleColors);var t=S(n);function n(){var e;return m(this,n),(e=t.call(this)).label=null,e.noCamera=!1,e.options=[],e.noVoiceRecord=!0,e}return y(n,null,[{key:"tag",get:function(){return"simple-fields-upload"}},{key:"styles",get:function(){return[].concat(j(E(x(n),"styles",this)),[a.css(T())])}}]),y(n,[{key:"render",value:function(){return a.html(O(),!this.label,this.label,this.option,this.optionChanged,this.options,"url"!==this.option,this.value||"",this.valueChanged,"fileupload"!==this.option,this._fileAboutToUpload,this._fileUploadResponse,"selfie"!==this.option,"audio"!==this.option,!this.description,this.description)}},{key:"optionChanged",value:function(e){this.option=e.detail.value,null!=e.detail.value&&"null"!=e.detail.value||this.options&&this.options[0]&&this.options[0][0]&&this.options[0][0].value&&(this.option=this.options[0][0].value)}},{key:"valueChanged",value:function(e){this.value=e.detail.value}},{key:"updated",value:function(e){var t=this;E(x(n.prototype),"updated",this)&&E(x(n.prototype),"updated",this).call(this,e),e.forEach(function(e,n){"value"==n&&t.dispatchEvent(new CustomEvent("value-changed",{detail:{value:t[n]}}))})}},{key:"_fileAboutToUpload",value:function(e){this.dispatchEvent(new CustomEvent("upload-before",{bubbles:!0,cancelable:!0,composed:!1,detail:e.detail}))}},{key:"_fileUploadResponse",value:function(e){this.shadowRoot.querySelector("#url").value=item.url,this.dispatchEvent(new CustomEvent("upload-response",{bubbles:!0,cancelable:!0,composed:!1,detail:e.detail}))}},{key:"_setInputOptions",value:function(){var e=[[{alt:"URL",icon:"icons:link",value:"url"}],[{alt:"Upload",icon:"icons:file-upload",value:"fileupload"}]];return!navigator.mediaDevices||this.noCamera?this.shadowRoot.querySelector("#camerahole").style.display="none":e.push([{alt:"Camera",icon:"image:photo-camera",value:"selfie"}]),navigator.mediaDevices&&!this.noVoiceRecord||(this.shadowRoot.querySelector("#voicerecorder").style.display="none"),e}},{key:"firstUpdated",value:function(e){var t=this;E(x(n.prototype),"firstUpdated",this)&&E(x(n.prototype),"firstUpdated",this).call(this,e),this.options=j(this._setInputOptions()),this.value?this.option="url":this.option="fileupload",this.shadowRoot.querySelector("#picker").addEventListener("change",function(e){e&&e.detail&&"selfie"===e.detail.value&&t._takeSelfie(e),e&&e.detail&&"audio"===e.detail.value&&t._voiceRecorder(e)})}},{key:"__newPhotoShowedUp",value:function(e){var t=new File([e.detail.raw],"headshot"+e.timeStamp+".jpg");this.shadowRoot.querySelector("#fileupload")._addFile(t)}},{key:"__newAudioShowedUp",value:function(e){var t=new File([e.detail.value],"voice-memo"+e.timeStamp+".mp3");this.shadowRoot.querySelector("#fileupload")._addFile(t)}},{key:"_takeSelfie",value:function(e){this.camera||(this.camera=document.createElement("simple-camera-snap"),this.camera.autoplay=!0,this.camera.addEventListener("simple-camera-snap-image",this.__newPhotoShowedUp.bind(this)),this.shadowRoot.querySelector("#camerahole").appendChild(this.camera))}},{key:"_voiceRecorder",value:function(e){this.voice||(this.voice=document.createElement("voice-recorder"),this.voice.addEventListener("voice-recorder-recording",this.__newAudioShowedUp.bind(this)),this.shadowRoot.querySelector("#voicerecorder").appendChild(this.voice))}},{key:"_resolveObjectPath",value:function(e,t){return e.split(".").reduce(function(e,t){return e?e[t]:null},t||self)}}],[{key:"properties",get:function(){return{label:{type:String},description:{type:String},value:{type:String},option:{type:String},options:{type:Array},noCamera:{type:Boolean,attribute:"no-camera"},noVoiceRecord:{type:Boolean,attribute:"no-voice-record"}}}}]),n}();function P(){var e=C(['\n      <slot name="suffix"></slot>\n      ',"\n    "]);return P=function(){return e},e}function F(){var e=C(['\n      <slot name="prefix"></slot>\n      ',"\n    "]);return F=function(){return e},e}function L(){var e=C(['\n      <label\n        for="','"\n        class="label-main"\n        ?hidden="','"\n      >\n        <slot name="label"></slot>\n        ',"","\n      </label>\n    "]);return L=function(){return e},e}function z(){var e=C(['\n      <div id="fieldmeta" aria-live="polite">\n        <slot name="field-meta"></slot>\n      </div>\n    ']);return z=function(){return e},e}function R(){var e=C(['\n      <div\n        class="','"\n      >\n        ',"\n        <div>\n          ",'\n          <slot name="field"></slot>\n          ',"\n        </div>\n      </div>\n    "]);return R=function(){return e},e}function M(){var e=C(['\n      <div class="border-bottom blur"></div>\n      <div class="border-bottom focus"></div>\n      <div id="field-bottom">\n        <div id="error-desc">\n          '," ","\n        </div>\n        ","\n      </div>\n    "]);return M=function(){return e},e}function B(){var e=C(['\n      <div id="error-message" ?hidden="','" role="alert">\n        ',"\n      </div>\n    "]);return B=function(){return e},e}function V(){var e=C(['\n      <div id="description">\n        <slot name="description"></slot>\n        ',"\n      </div>\n    "]);return V=function(){return e},e}function I(){var e=C(['\n        :host {\n          display: block;\n          width: 100%;\n          font-size: var(--simple-fields-detail-font-size, 12px);\n          font-family: var(--simple-fields-detail-font-family, sans-serif);\n          line-height: var(--simple-fields-detail-line-height, 22px);\n          transition: color 0.3s ease-in-out;\n          margin: var(--simple-fields-margin, 16px) 0;\n        }\n        :host([hidden]),\n        :host([type="hidden"]) {\n          display: none;\n        }\n        :host([error]) {\n          color: var(--simple-fields-error-color, #dd2c00);\n          transition: color 0.3s ease-in-out;\n        }\n        :host([disabled]) {\n          color: var(--simple-fields-disabled-color, #999);\n        }\n        .field-main.inline,\n        .field-main > div,\n        #field-bottom {\n          display: flex;\n          align-items: stretch;\n          justify-content: flex-start;\n        }\n        * {\n          flex: 1 1 auto;\n        }\n        #fieldmeta {\n          text-align: right;\n        }\n        :host .label-main:after {\n          content: var(--simple-fields-label-flag, "");\n        }\n        :host(:focus-within) .label-main {\n          color: var(--simple-fields-accent-color, #3f51b5);\n          transition: color 0.3s ease-in-out;\n        }\n        .inline {\n          --simple-fields-radio-option-display: flex;\n          --simple-fields-radio-option-flex-wrap: wrap;\n        }\n        .inline label {\n          margin: 0 var(--simple-fields-margin-small, 8px) 0 0;\n          flex: 0 1 auto;\n        }\n        .inline label,\n        .field-main > div,\n        .field,\n        ::slotted([slot="field"]) {\n          font-size: var(--simple-fields-font-size, 16px);\n          font-family: var(--simple-fields-font-family, sans-serif);\n          line-height: var(--simple-fields-line-height, 22px);\n        }\n        .field,\n        ::slotted([slot="field"]) {\n          width: auto;\n          border: none;\n          color: var(--simple-fields-color, black);\n          transition: opacity ease-in-out;\n          flex: 1 0 auto;\n        }\n        ::slotted([slot="field"]:focus) {\n          outline: none;\n        }\n        :host[inline] ::slotted([slot="field"]:focus),\n        ::slotted([type="checkbox"][slot="radio"]:focus),\n        ::slotted([type="checkbox"][slot="field"]:focus) {\n          outline: unset;\n        }\n        .field-main.inline .field,\n        .field-main.inline ::slotted([slot="field"]) {\n          min-width: var(--simple-fields-detail-line-height, 22px);\n          height: var(--simple-fields-detail-line-height, 22px);\n          margin: 0 var(--simple-fields-margin-small, 8px) 0 0;\n        }\n        .field[disabled],\n        :host([readonly]) ::slotted([slot="field"]) {\n          opacity: var(--simple-fields-disabled-opacity, 0.7);\n          transition: opacity ease-in-out;\n        }\n        .field[readonly],\n        .field[disabled],\n        :host([readonly]) ::slotted([slot="field"]),\n        :host([disabled]) ::slotted([slot="field"]) {\n          cursor: not-allowed;\n        }\n        .border-bottom {\n          height: 0;\n        }\n        :host([disabled]) .border-bottom {\n          border-bottom: 1px dashed var(--simple-fields-border-color, #999);\n        }\n        .border-bottom.blur {\n          border-bottom: 1px solid var(--simple-fields-border-color, #999);\n          width: 100%;\n        }\n        .border-bottom.focus {\n          margin: -1px auto 0;\n          width: 0;\n          border-bottom: 2px solid var(--simple-fields-accent-color, #3f51b5);\n          transition: width 0.5s ease-in-out;\n        }\n        :host(:focus-within) .border-bottom.focus {\n          width: 100%;\n          transition: width 0.5s ease-in-out;\n        }\n        :host([type="checkbox"]) .border-bottom,\n        :host([type="color"]) .border-bottom,\n        :host([type="file"]) .border-bottom,\n        :host([type="radio"]) .border-bottom,\n        :host([type="range"]) .border-bottom {\n          display: none;\n        }\n        ::slotted(textarea[slot="field"]) {\n          margin: 0;\n          transition: height 0.5s ease-in-out;\n          box-sizing: border-box;\n          vertical-align: bottom;\n        }\n        ::slotted(fieldset[slot="field"]) {\n          margin: 0;\n          padding: 0;\n          border: none;\n          font-size: var(--simple-fields-font-size, 16px);\n          font-family: var(--simple-fields-font-family, sans-serif);\n          line-height: var(--simple-fields-line-height, 22px);\n          display: var(--simple-fields-radio-option-display, block);\n          flex-wrap: var(--simple-fields-radio-option-flex-wrap, wrap);\n          transition: color 0.3s ease-in-out;\n        }\n      ']);return I=function(){return e},e}function W(){var e=C([" "," "," "]);return W=function(){return e},e}window.customElements.define(q.tag,q);var U=function(e){k(n,a.LitElement);var t=S(n);function n(){var e;return m(this,n),(e=t.call(this)).counter="none",e.autovalidate=!1,e.disabled=!1,e.hidden=!1,e.error=!1,e.id=e._generateUUID(),e.inline=!1,e.validTypes=["checkbox","color","date","datetime-local","email","file","fieldset","hidden","month","number","password","radio","range","search","select","tel","text","textarea","time","url","week"],e._observeAndListen(),e.addEventListener("click",function(t){return e.focus()}),e}return y(n,[{key:"render",value:function(){return a.html(W(),this.fieldMainTemplate,this.fieldBottom)}}],[{key:"tag",get:function(){return"simple-fields-container"}},{key:"styles",get:function(){return[a.css(I())]}},{key:"properties",get:function(){return{autovalidate:{type:Boolean},counter:{type:String},description:{type:String},disabled:{type:Boolean,reflect:!0},defaultErrorMessage:{type:String},defaultRequiredMessage:{type:String},error:{type:Boolean,reflect:!0},errorMessage:{type:String},hidden:{type:Boolean,reflect:!0},field:{type:Object},id:{type:String,reflect:!0},inline:{type:Boolean,reflect:!0},label:{type:String},minchecked:{type:Number},maxchecked:{type:Number},maxwords:{type:Number},name:{type:String,reflect:!0},numberMessage:{type:String},pattern:{type:String},patternMessage:{type:String},prefix:{type:String},readonly:{type:Boolean,reflect:!0},required:{type:Boolean,reflect:!0},requiredMessage:{type:String},suffix:{type:String},type:{type:String},validTypes:{type:Array}}}}]),y(n,[{key:"disconnectedCallback",value:function(){var e=this;this.removeEventListener("click",function(t){return e.focus()}),E(x(n.prototype),"disconnectedCallback",this).call(this)}},{key:"autoGrow",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.field;this.field&&(this.field.style.height="auto",this.field.style.height="".concat(this.field.scrollHeight,"px"),this.field.style.overflowY="hidden")}},{key:"firstUpdated",value:function(e){E(x(n.prototype),"firstUpdated",this)&&E(x(n.prototype),"firstUpdated",this).call(this,e),this._updateField()}},{key:"updated",value:function(e){var t=this,n=!1;e.forEach(function(e,i){"error"===i&&t.error!==e&&(n=!0),"errorMessage"===i&&t.errorMessage!==e&&(n=!0),"error"===i&&t.field&&t.field.setAttribute("aria-invalid",t.error?"true":"false")}),n&&this._fireErrorChanged()}},{key:"focus",value:function(){this.field&&this.field.focus()}},{key:"select",value:function(){!this.field||"text"!==this.type&&"textarea"!==this.type||this.field.select()}},{key:"setRangeText",value:function(e,t,n,i){!this.field||"text"!==this.type&&"textarea"!==this.type||this.field.setRangeText(e,t,n,i)}},{key:"setSelectionRange",value:function(e,t,n){!this.field||"text"!==this.type&&"textarea"!==this.type||this.field.setSelectionRange(e,t,n)}},{key:"stepDown",value:function(){this.field&&this.numeric&&this.field.stepDown()}},{key:"stepUp",value:function(){this.field&&this.numeric&&this.field.stepUp()}},{key:"validate",value:function(){var e=this.field.querySelector("legend");return this.requiredError?(this.error=!0,this.errorMessage=this.requiredMessage||"required"):this.numberError?(this.error=!0,this.errorMessage=this.numberMessage||(this.numberError>0?"select ".concat(this.numberError," more"):"select ".concat(0-this.numberError," fewer"))):this.patternError&&(this.error=!0,this.errorMessage=this.patternMessage||"invalid format"),"fieldset"===this.type&&e&&(e.innerHTML=e.innerHTML.replace(/\**\s*$/,this.error?"*":""),e.style.color=this.error?"var(--simple-fields-error-color, #dd2c00)":""),!this.error}},{key:"_fireErrorChanged",value:function(){this.dispatchEvent(new CustomEvent("error-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_generateUUID",value:function(){return"ss-s-s-s-sss".replace(/s/g,Math.floor(65536*(1+Math.random())).toString(16).substring(1))}},{key:"_getFieldValue",value:function(){var e,t,n=this;return this.field&&("fieldset"===this.type&&this.field.querySelector("input[type=radio]")?(e=this.field.querySelector("input:checked"),t=e?e.value:void 0):"fieldset"===this.type&&this.field.querySelector("input[type=checkbox]")?(t=[],(e=this.field.querySelectorAll("input:checked")).forEach(function(e){return t.push(e.value)})):t="checkbox"===this.type?!!this.field.checked:"radio"===this.type?!!this.field.checked:"select"===this.type?this.multiple?Object.keys(this.field.selectedOptions).map(function(e){return n.field.selectedOptions[e].value}):this.field.selectedOptions[0].value:this.field.value),t}},{key:"_getValidType",value:function(e){return"datetime"===e&&this.validTypes.includes(e)?"datetime-local":this.validTypes.includes(e)?e:"text"}},{key:"_handleFieldChange",value:function(){"text"!==this.type&&"textarea"!==this.type||this._updateCount(),this.autovalidate&&this.validate()}},{key:"_observeAndListen",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(this.slottedFieldObserver.observe(this,{attributeFilter:["disabled","readonly","required","slot"],childlist:!0}),this._updateField(),this.addEventListener("click",this.focus),this.addEventListener("focusout",this._onFocusout),this.addEventListener("focusin",this._onFocusin)):(this.slottedFieldObserver.disconnect(),this.removeEventListener("click",this.focus),this.removeEventListener("focusout",this._onFocusout),this.removeEventListener("focusin",this._onFocusin))}},{key:"_onFocusin",value:function(){this.error=!1}},{key:"_onFocusout",value:function(){this.autovalidate&&this.validate()}},{key:"_updateField",value:function(){var e=this,t=this.field;if(this.field=this.querySelector&&this.querySelector("[slot=field]")?this.querySelector("[slot=field]"):void 0,this.id="".concat(this.fieldId||"","-wrapper"),this.field){var n=this.field.tagName.toLowerCase(),i=this.field.getAttribute("type")||"text";if(this.type=this._getValidType("input"===n?i:n),this.required=this.field.required,this.disabled=this.field.disabled,this.readonly=this.field.readonly,this.field.setAttribute("aria-describedby","field-bottom"),this.field.addEventListener("change",function(t){return e._handleFieldChange()}),this.field.addEventListener("input",function(t){return e._handleFieldChange()}),"select"===this.type&&(this.multiple=this.field.multiple),"textarea"===this.type&&(this.field.getAttribute("rows")||this.field.setAttribute("rows",1),this.field.addEventListener("keydown",function(e){return e.stopPropagation()})),"fieldset"===this.type){var r=this.querySelector("legend");r&&(r.style.fontSize="var(--simple-fields-detail-font-size, 12px)",r.style.fontFamily="var(--simple-fields-detail-font-family, sans-serif)",r.style.lineHeight="var(--simple-fields-detail-line-height, 22px)",r.style.paddingInlineStart=0,r.style.paddingInlineEnd=0),this.querySelectorAll("label, input").forEach(function(e){return e.style.marginRight="var(--simple-fields-margin, 16px)"}),this.querySelectorAll("label input").forEach(function(e){return e.style.marginLeft="calc(0 - var(--simple-fields-margin, 16px))"})}}else this.disabled=!1,this.readonly=!1,this.required=!1,this.type=void 0,t&&("textarea"===t.tagName.toLowerCase()&&t.addEventListener("keydown",function(e){return e.stopPropagation()}),t.removeEventListener("change",function(t){return e._handleFieldChange()}),t.removeEventListener("input",function(t){return e._handleFieldChange()}))}},{key:"_updateCount",value:function(){var e,t=this,n=new RegExp("[\\w\\-\\']+","gim"),i=this.field.getAttribute("maxlength")||this.maxlength||!1,r=this.maxwords||!1,o="word"===this.counter?r:i,a=new RegExp(".{0,".concat(i||1,"}"),"g"),l=new RegExp("(".concat("[\\w\\-\\']+","\\W*){0,").concat(r||1,"}"),"g"),s=function(){return t.field.value?t.field.value.length:0},d=function(){return t.field.value&&t.field.value.match(n)?t.field.value.match(n).length:0},u=function(e,n,i){e&&n&&n<e&&t.field.value.match(i)&&(t.field.value=t.field.value.match(i)[0].trim())};u(s(),i,a),u(d(),r,l),e="word"===this.counter?d():s(),"none"!==this.counter&&this.shadowRoot&&this.shadowRoot.querySelector("#fieldmeta")&&(this.shadowRoot.querySelector("#fieldmeta").innerHTML=o?"".concat(e,"/").concat(o):e)}},{key:"descriptionTemplate",get:function(){return a.html(V(),this.description)}},{key:"errorTemplate",get:function(){return a.html(B(),!this.error,this.errorMessage)}},{key:"fieldBottom",get:function(){return a.html(M(),this.descriptionTemplate,this.errorTemplate,this.fieldMeta)}},{key:"fieldId",get:function(){return"".concat(this.id||"field",".input")}},{key:"fieldMainTemplate",get:function(){return a.html(R(),this.inline||["checkbox","color","radio"].includes(this.type||"text")?"field-main inline":"field-main",this.labelTemplate,this.prefixTemplate,this.suffixTemplate)}},{key:"fieldMeta",get:function(){return a.html(z())}},{key:"labelTemplate",get:function(){return a.html(L(),this.fieldId,"fieldset"===this.type,this.label,this.error||this.required?"*":"")}},{key:"numberError",get:function(){var e="fieldset"===this.type&&this.field.querySelector("input[type=checkbox]"),t=!!this._getFieldValue()&&this._getFieldValue().length,n="select"===this.type?this.min:!!e&&this.minchecked,i="select"===this.type?this.max:!!e&&this.maxchecked;return i&&t&&i<t?i-t:!!(n&&t&&n>t)&&n-t}},{key:"numeric",get:function(){return["date","month","week","time","datetime-local","number","range"].includes(this.type)}},{key:"patternError",get:function(){var e=this;return this.pattern&&""!==this.pattern&&this._getFieldValue()&&(this.field.multiple?this._getFieldValue().filter(function(t){return!t.match(e.pattern)}):!this._getFieldValue().match(this.pattern))}},{key:"prefixTemplate",get:function(){return a.html(F(),this.prefix)}},{key:"requiredError",get:function(){return!this._getFieldValue()&&this.required}},{key:"slottedFieldObserver",get:function(){return new MutationObserver(this._updateField)}},{key:"suffixTemplate",get:function(){return a.html(P(),this.suffix)}}]),n}();function N(){var e=C(['\n      <div class="field-main">\n        <code-editor\n          ?autofocus="','"\n          ?disabled="','"\n          font-size="','"\n          editor-value="','"\n          theme="','"\n          language="','"\n          mode="','"\n          ?read-only="','"\n          @value-changed="','"\n        >\n        </code-editor>\n        <input name="','" type="hidden" value="','" />\n      </div>\n    ']);return N=function(){return e},e}function D(){var e=C(["\n        #options {\n          display: var(--simple-fields-radio-option-display, flex);\n          flex-wrap: var(--simple-fields-radio-option-flex-wrap, wrap);\n        }\n        code-editor {\n          margin: 0;\n          transition: height 0.5s ease-in-out;\n          box-sizing: border-box;\n          vertical-align: bottom;\n        }\n        code-editor:focus {\n          outline: none;\n        }\n      "]);return D=function(){return e},e}window.customElements.define(U.tag,U);var H=function(e){k(n,U);var t=S(n);function n(){var e;return m(this,n),(e=t.call(this)).autofocus=!1,e.fontSize=14,e.id=e._generateUUID(),e.language="html",e.mode="html",e.readonly=!1,e.theme="vs",e}return y(n,[{key:"render",value:function(){return this.hasFieldSet?this.fieldsetTemplate:E(x(n.prototype),"render",this).call(this)}}],[{key:"tag",get:function(){return"simple-fields-code"}},{key:"styles",get:function(){return[].concat(j(E(x(n),"styles",this)),[a.css(D())])}},{key:"properties",get:function(){return g(g({},E(x(n),"properties",this)),{},{autofocus:{type:Boolean},editorValue:{type:String,attribute:"editor-value"},fontSize:{type:Number,attribute:"font-size"},language:{type:String},mode:{type:Number},readonly:{type:Boolean,reflect:!0},requiredMessage:{type:String},theme:{type:Number},value:{reflect:!0}})}}]),y(n,[{key:"disconnectedCallback",value:function(){var e=this;this.removeEventListener("click",function(t){return e.focus()}),E(x(n.prototype),"disconnectedCallback",this).call(this)}},{key:"updated",value:function(e){var t=this;e.forEach(function(e,n){"id"!==n||t.id||(t.id=t._generateUUID()),"field"!==n||t.field||t._updateField(),"value"===n&&t._fireValueChanged()})}},{key:"_onChange",value:function(e){e.path[0]&&this.value!==e.path[0].value&&(this.value=e.path[0].value)}},{key:"validate",value:function(){return!this.value&&this.required&&(this.error=!0,this.errorMessage=this.requiredMessage||"required"),!this.error}},{key:"_fireValueChanged",value:function(){this.dispatchEvent(new CustomEvent("value-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_observeAndListen",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(this.addEventListener("click",this.focus),this.addEventListener("focusout",this._onFocusout),this.addEventListener("focusin",this._onFocusin)):(this.removeEventListener("click",this.focus),this.removeEventListener("focusout",this._onFocusout),this.removeEventListener("focusin",this._onFocusin))}},{key:"_updateField",value:function(){this.field=this.shadowRoot&&this.shadowRoot.querySelector("code-editor")?this.shadowRoot.querySelector("code-editor"):void 0}},{key:"_generateUUID",value:function(){return"ss-s-s-s-sss".replace(/s/g,Math.floor(65536*(1+Math.random())).toString(16).substring(1))}},{key:"fieldMainTemplate",get:function(){return a.html(N(),this.autofocus,this.disabled,this.fontSize,this.__editorValue||"",this.theme,this.language,this.mode,this.readonly||this.disabled,this._onChange,this.id,this.value)}},{key:"slottedFieldObserver",get:function(){}}]),n}();function $(){var e=C(["\n        fieldset {\n          padding: var(--simple-fields-margin-small, 8px)\n            var(--simple-fields-margin, 16px);\n          margin: var(--simple-fields-margin-small, 8px) 0\n            var(--simple-fields-margin, 16px);\n          border: 1px solid var(--simple-fields-border-color-light, #ccc);\n          border-radius: var(--simple-fields-border-radius, 2px);\n          transition: all 0.3s ease-in-out;\n        }\n        :host(:last-of-type) {\n          margin-bottom: 0;\n        }\n        #label {\n          font-family: var(--simple-fields-font-family, sans-serif);\n          font-size: var(--simple-fields-font-size, 16px);\n          line-height: var(--simple-fields-line-height, 22px);\n        }\n        :host([error]) #label {\n          color: var(--simple-fields-error-color, #dd2c00);\n          transition: all 0.3s ease-in-out;\n        }\n        #description {\n          font-family: var(--simple-fields-detail-font-family, sans-serif);\n          font-size: var(--simple-fields-detail-font-size, 12px);\n          line-height: var(--simple-fields-detail-line-height, 22px);\n        }\n      "]);return $=function(){return e},e}function J(){var e=C(['\n      <div id="item-fields">\n        <slot></slot>\n      </div>\n    ']);return J=function(){return e},e}function G(){var e=C(['\n      <div id="description" ?hidden="','">\n        ',"\n      </div>\n    "]);return G=function(){return e},e}function Q(){var e=C(['\n      <legend id="label" ?hidden="','">\n        ',"","\n      </legend>\n    "]);return Q=function(){return e},e}function Y(){var e=C(["\n      <fieldset>"," "," ","</fieldset>\n    "]);return Y=function(){return e},e}window.customElements.define(H.tag,H);var K=function(e){k(n,a.LitElement);var t=S(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"render",value:function(){return a.html(Y(),this.legend,this.desc,this.fields)}},{key:"legend",get:function(){return a.html(Q(),!this.label,this.label,this.error?"*":"")}},{key:"desc",get:function(){return a.html(G(),!this.description,this.description)}},{key:"fields",get:function(){return a.html(J())}}],[{key:"tag",get:function(){return"simple-fields-fieldset"}},{key:"styles",get:function(){return[a.css($())]}},{key:"properties",get:function(){return{disabled:{type:Boolean,reflect:!0},error:{type:Boolean,reflect:!0},hidden:{type:Boolean,reflect:!0},readonly:{type:Boolean,reflect:!0},label:{type:String,reflect:!0},name:{type:String,reflect:!0,attribute:"name"},description:{type:String}}}}]),n}();window.customElements.define(K.tag,K);var X=function(e){k(n,p.A11yTab);var t=S(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,null,[{key:"tag",get:function(){return"simple-fields-tab"}},{key:"styles",get:function(){return[].concat(j(E(x(n),"styles",this)),j(K.styles))}},{key:"properties",get:function(){return g(g({},E(x(n),"properties",this)),K.properties)}}]),n}();function Z(){var e=C(["\n        :host([error]) #tabs .error {\n          color: var(--simple-fields-error-color, #dd2c00);\n          transition: border 0.5s ease;\n        }\n        :host {\n          --a11y-tabs-font-family: var(--simple-fields-font-family, sans-serif);\n          --a11y-tabs-font-size: var(--simple-fields-detail-font-size, 12px);\n          --a11y-tabs-color: var(--simple-fields-color, black);\n          --a11y-tabs-focus-color: var(--simple-fields-color, black);\n          --a11y-tabs-border-color: var(\n            --simple-fields-border-color-light,\n            #ccc\n          );\n          --a11y-tabs-margin: var(--simple-fields-margin, 16px) 0;\n          --a11y-tabs-border-radius: var(--simple-fields-border-radius, 2px);\n          --a11y-tabs-button-padding: var(--simple-fields-margin-small, 8px);\n          --a11y-tabs-content-padding: var(--simple-fields-margin, 16px);\n        }\n      "]);return Z=function(){return e},e}function ee(){var e=C(['\n      <span class="label','"\n        >',"","</span\n      >\n    "]);return ee=function(){return e},e}window.customElements.define(X.tag,X);var te=function(e){k(n,c.A11yTabs);var t=S(n);function n(){return m(this,n),t.apply(this,arguments)}return y(n,[{key:"_tabLabel",value:function(e){return a.html(ee(),e.error?" error":"",e.label,e.error?"*":"")}},{key:"tabQuery",get:function(){return"simple-fields-tab"}}],[{key:"tag",get:function(){return"simple-fields-tabs"}},{key:"styles",get:function(){return[].concat(j(E(x(n),"styles",this)),j(K.styles),[a.css(Z())])}},{key:"properties",get:function(){return g(g({},E(x(n),"properties",this)),K.properties)}}]),n}();function ne(){var e=C(['\n        :host {\n          padding: 0 var(--simple-fields-margin-small, 8px);\n          border-radius: var(--simple-fields-border-radius, 2px);\n          display: block;\n          border: none;\n          transform: rotate(0deg);\n          transition: all 0.5s ease;\n        }\n        :host([disabled]) {\n          opacity: 0.5;\n        }\n        :host([aria-expanded="true"]) {\n          padding: var(--simple-fields-margin, 16px)\n            var(--simple-fields-margin-small, 8px);\n          border: 1px solid var(--simple-fields-border-color-light, #ccc);\n          transition: all 0.5s ease;\n        }\n        :host([error]) {\n          border: 1px solid var(--simple-fields-error-color, #dd2c00);\n          transition: border 0.5s ease;\n        }\n        :host(:focus-within) {\n          border: 1px solid var(--simple-fields-border-color, #999);\n          transition: border 0.5s ease;\n          z-index: 2;\n        }\n        *[aria-controls="content"][disabled] {\n          cursor: not-allowed;\n        }\n        #drag-handle {\n          flex: 0 1 auto;\n        }\n        #preview {\n          flex: 1 0 auto;\n          margin: 0;\n        }\n        #heading,\n        .heading-inner {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        #content {\n          overflow: hidden;\n          max-height: 0;\n        }\n        :host #content-inner {\n          display: flex;\n          align-items: flex-end;\n          justify-content: space-between;\n          overflow: hidden;\n          max-height: 0;\n          transition: max-height 0.75s ease 0.1s;\n        }\n        :host([aria-expanded="true"]) #content {\n          max-height: 20000vh;\n          transition: max-height 0.75s ease 0.1s;\n        }\n        :host([aria-expanded="true"]) #content-inner {\n          max-height: 20000vh;\n        }\n        #content-inner > * {\n          flex: 1 1 auto;\n        }\n        #remove {\n          flex: 0 0 auto;\n          color: var(--simple-fields-error-color, #ac0000);\n        }\n        #expand {\n          padding: var(--simple-fields-margin-small, 8px);\n          transform: rotate(0deg);\n          transition: transform 0.5s ease-in-out;\n        }\n        :host([aria-expanded="true"]) #expand {\n          transform: rotate(-90deg);\n          transition: transform 0.5s ease-in-out;\n        }\n        paper-icon-button,\n        simple-tooltip {\n          font-family: var(--simple-fields-detail-font-family, sans-serif);\n          font-size: var(--simple-fields-detail-font-size, 12px);\n          line-height: var(--simple-fields-detail-line-height, 22px);\n        }\n        ::slotted([slot="preview"]:first-of-type) {\n          margin-top: 0;\n        }\n        ::slotted([slot="preview"]:last-of-type) {\n          margin-bottom: 0;\n        }\n      ']);return ne=function(){return e},e}function ie(){var e=C(['\n      <div id="heading">\n        <paper-icon-button\n          id="drag-handle"\n          controls="','"\n          icon="open-with"\n          label="Reorder this item"\n          ?hidden="','"\n          ?disabled="','"\n        >\n        </paper-icon-button>\n        <div id="preview"><slot name="preview"></slot></div>\n        <paper-icon-button\n          id="expand"\n          controls="','"\n          icon="expand-more"\n          label="Toggle expand"\n          @click="','"\n        >\n        </paper-icon-button>\n      </div>\n      <div id="content">\n        <div id="content-inner">\n          <div><slot></slot></div>\n          </paper-icon-button>\n          <paper-icon-button\n            id="remove"\n            controls="','"\n            icon="delete"\n            label="Remove this item"\n            ?disabled="','"\n            @click="','"\n          >\n          </paper-icon-button>\n          <simple-tooltip for="remove">Remove this item</simple-tooltip>\n        </div>\n      </div>\n    ']);return ie=function(){return e},e}window.customElements.define(te.tag,te);var re=function(e){k(n,K);var t=S(n);function n(){var e;return m(this,n),(e=t.call(this)).disabled=!1,e.sortable=!1,e.previewBy=[],e}return y(n,[{key:"render",value:function(){var e=this;return a.html(ie(),this.id,!this.sortable,this.disabled,this.id,this.toggle,this.id,this.disabled,function(t){return e._handleRemove()})}}],[{key:"styles",get:function(){return[a.css(ne())]}},{key:"tag",get:function(){return"simple-fields-array-item"}},{key:"properties",get:function(){return{expanded:{type:Boolean},disabled:{type:Boolean,reflect:!0,attribute:"disabled"},sortable:{type:Boolean,reflect:!0,attribute:"sortable"},preview:{type:Boolean},previewBy:{type:Array,reflect:!0,attribute:"preview-by"}}}}]),y(n,[{key:"connectedCallback",value:function(){var e=this;E(x(n.prototype),"connectedCallback",this).call(this),setTimeout(function(){e.dispatchEvent(new CustomEvent("added",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))},0)}},{key:"updated",value:function(e){var t=this;e.forEach(function(e,n){var i=t.getAttribute("aria-expanded");"error"===n&&t.setAttribute("aria-expanded",t.error||i)})}},{key:"toggle",value:function(){"true"===this.getAttribute("aria-expanded")?this.setAttribute("aria-expanded","false"):this.setAttribute("aria-expanded","true")}},{key:"_handleCopy",value:function(){this.dispatchEvent(new CustomEvent("copy",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_handleRemove",value:function(){this.dispatchEvent(new CustomEvent("remove",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"disconnectedCallback",value:function(){this.dispatchEvent(new CustomEvent("removed",{bubbles:!0,cancelable:!0,composed:!0,detail:this})),E(x(n.prototype),"disconnectedCallback",this).call(this)}},{key:"slots",get:function(){var e={};return this.previewBy.forEach(function(t){return e[t]="preview"}),e}}]),n}();function oe(){var e=C(["\n        fieldset {\n          padding: 0 var(--simple-fields-margin-small, 8px)\n            var(--simple-fields-margin-small, 8px);\n        }\n        #item-fields {\n          margin: var(--simple-fields-margin-small, 8px) 0;\n          clear: both;\n          z-index: 3;\n        }\n        #top {\n          display: flex;\n          align-items: flex-end;\n          justify-content: flex-end;\n        }\n        #description {\n          flex: 1 1 auto;\n          padding: var(--simple-fields-margin-small, 8px) 0;\n          margin-right: var(--simple-fields-margin, 16px);\n          min-height: 24px;\n        }\n        #add {\n          float: right;\n        }\n        paper-button {\n          font-family: var(--simple-fields-detail-font-family, sans-serif);\n          font-size: var(--simple-fields-detail-font-size, 12px);\n          line-height: var(--simple-fields-detail-line-height, 22px);\n          padding: var(--simple-fields-margin-small, 8px);\n          margin: 0 var(--simple-fields-margin-small, 8px) 0 0;\n          z-index: 1;\n          text-transform: unset;\n        }\n        .expanded {\n          transform: rotate(-90deg);\n          transition: transform 0.5s ease;\n        }\n        .collapsed {\n          transform: rotate(0deg);\n          transition: transform 0.5s ease;\n        }\n      "]);return oe=function(){return e},e}function ae(){var e=C(['\n      <div id="top">\n        ','\n        <paper-button\n          id="expand"\n          controls="item-fields"\n          @click="','"\n        >\n          ','\n          <iron-icon\n            class="','"\n            aria-hidden="true"\n            icon="expand-more"\n          ></iron-icon>\n        </paper-button>\n      </div>\n      <div id="item-fields" aria-live="polite">\n        <slot></slot>\n        <paper-button\n          id="add"\n          controls="item-fields"\n          @click="','"\n        >\n          Add Item\n          <iron-icon aria-hidden="true" icon="add"></iron-icon>\n        </paper-button>\n      </div>\n    ']);return ae=function(){return e},e}function le(){var e=C([" <fieldset>","","</fieldset> "]);return le=function(){return e},e}window.customElements.define(re.tag,re);var se=function(e){k(n,K);var t=S(n);function n(){var e;return m(this,n),(e=t.call(this)).count=0,e.expanded=!1,e.disableAdd=!1,e}return y(n,[{key:"render",value:function(){return a.html(le(),this.legend,this.fields)}},{key:"fields",get:function(){var e=this;return a.html(ae(),this.desc,function(t){return e.toggle()},this.expanded?"Collapse All":"Expand All",this.expanded?"expanded":"collapsed",function(t){return e._handleAdd()})}}],[{key:"tag",get:function(){return"simple-fields-array"}},{key:"styles",get:function(){return[].concat(j(E(x(n),"styles",this)),[a.css(oe())])}},{key:"properties",get:function(){return g(g({},E(x(n),"properties",this)),{},{count:{type:Number},expanded:{type:Boolean}})}}]),y(n,[{key:"updated",value:function(e){var t=this;e.forEach(function(e,n){"expanded"===n&&t.querySelectorAll("simple-fields-array-item").forEach(function(e){return e.setAttribute("aria-expanded",t.expanded)})})}},{key:"buildItem",value:function(e){var t=this,n=document.createElement("simple-fields-array-item");return n.id=e,n.expanded=this.expanded,n.innerHTML='\n      <slot name="sort"></slot>\n      <slot name="preview"></slot>\n      <slot></slot>',this.appendChild(n),n.addEventListener("remove",function(e){return t._handleRemove(e)}),n}},{key:"_handleAdd",value:function(){this.dispatchEvent(new CustomEvent("add",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_handleRemove",value:function(e){e.stopPropagation(),e.stopImmediatePropagation(),this.dispatchEvent(new CustomEvent("remove",{bubbles:!0,cancelable:!0,composed:!0,detail:e.detail}))}},{key:"collapse",value:function(){this.toggle(!1)}},{key:"expand",value:function(){this.toggle(!0)}},{key:"focus",value:function(e){if(this.childNodes&&e)this.childNodes.length<e&&(e=this.childNodes.length-1),this.childNodes[e].focus();else if(this.shadowRoot){var t=this.childNodes?"expand":"add";this.shadowRoot.getElementById(t).focus()}}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.expanded;this.expanded=e,this._handleToggle()}},{key:"_handleToggle",value:function(){this.dispatchEvent(new CustomEvent("toggle",{detail:this})),this.expanded?this.dispatchEvent(new CustomEvent("expand",{bubbles:!0,cancelable:!0,composed:!0,detail:this})):this.dispatchEvent(new CustomEvent("collapse",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}}]),n}();function de(){var e=C(["\n        :host {\n          display: block;\n          font-family: var(--simple-fields-font-family, sans-serif);\n          font-family: var(--simple-fields-detail-font-family, sans-serif);\n          font-size: var(--simple-fields-font-size, 16px);\n          font-size: var(--simple-fields-detail-font-size, 12px);\n          background: var(--simple-fields-background-color, white);\n        }\n        :host([hidden]) {\n          display: none;\n        }\n      "]);return de=function(){return e},e}function ue(){var e=C(['\n      <div id="schema-fields" aria-live="polite">\n        <slot></slot>\n      </div>\n    ']);return ue=function(){return e},e}window.customElements.define(se.tag,se);var ce=function(e){k(n,a.LitElement);var t=S(n);function n(){var e;return m(this,n),(e=t.call(this)).disableAutofocus=!1,e.language="en",e.resources={},e.schemaConversion,e.__formElements={},e.__formElementsArray=[],e.schema={},e.value={},setTimeout(function(){},0),e}return y(n,[{key:"render",value:function(){return a.html(ue())}}],[{key:"styles",get:function(){return[a.css(de())]}},{key:"properties",get:function(){return g(g({},E(x(n),"properties",this)),{},{disableAutofocus:{type:Boolean},error:{type:Object},language:{type:String,attribute:"lang",reflect:!0},resources:{type:Object},schema:{type:Object},elementizer:{type:Object,attribute:"elementizer",reflect:!0},value:{type:Object},__formElements:{type:Object},__formElementsArray:{type:Array}})}},{key:"tag",get:function(){return"simple-fields-lite"}}]),y(n,[{key:"disconnectedCallback",value:function(){this._clearForm(),E(x(n.prototype),"disconnectedCallback",this).call(this)}},{key:"updated",value:function(e){var t=this;e.forEach(function(e,n){"error"===n&&t.error!==e&&t._errorChanged(),["schema","schemaConversion"].includes(n)&&t._schemaChanged(t.schema,e),"value"===n&&t._valueChanged(t.value,e)})}},{key:"updateSchema",value:function(){this._formFieldsChanged()}},{key:"rebuildForm",value:function(){this._clearForm(),this._addToForm();var e=!!(this.__formElementsArray&&this.__formElementsArray[0]&&this.__formElementsArray[0].field)&&this.__formElementsArray[0].field;e&&(e.autofocus=!this.disableAutofocus)}},{key:"_addToForm",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.schema,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0,o=t.properties,a=t.required;Object.keys(o||{}).forEach(function(l){var s=o[l],d=r||e._convertSchema(s);if(d&&d.element){var u="".concat(i).concat(l),c=document.createElement(d.element),p=s.properties||s.items||s.noWrap||d.noWrap?c:document.createElement("simple-fields-container"),m=e._getValue("".concat(i).concat(l)),h=s.label||s.title||s.description||l,y=s.description&&(s.label||s.title)?s.description:void 0,v=(s.onValueChanged,s.onErrorChanged);d.labelSlot=t.labelSlot||d.labelSlot,d.descriptionSlot=t.descriptionSlot||d.descriptionSlot,d.errorMessageSlot=t.errorMessageSlot||d.errorMessageSlot,d.valueSlot=t.valueSlot||d.valueSlot,d.labelProperty=t.labelProperty||d.labelProperty||"label",d.descriptionProperty=t.descriptionProperty||d.descriptionProperty||"description",d.valueProperty=t.valueProperty||d.valueProperty||"value",d.setValueProperty=t.setValueProperty||d.setValueProperty||d.valueProperty,d.valueChangedProperty=t.valueChangedProperty||d.valueChangedProperty||"".concat(d.valueProperty,"-changed"),d.errorProperty=t.errorProperty||d.errorProperty||"error",d.errorChangedProperty=t.errorChangedProperty||d.errorChangedProperty||"".concat(d.errorProperty,"-changed"),d.errorMessageProperty=t.errorMessageProperty||d.errorMessageProperty||"errorMessage",c.resources=e.resources,c.id=u,c.setAttribute("name",u),c.setAttribute("language",e.language),s.options&&(c.options=s.options),s.itemsList&&(c.itemsList=s.itemsList),a&&a.includes(l)&&c.setAttribute("required",!0),s.disabled&&(c.disabled=!0,p.disabled=!0),s.hidden&&(c.hidden=!0,p.hidden=!0),s.readonly&&(c.hidden=!0,p.hidden=!0),e._configElement(p,h,d.labelProperty,d.labelSlot),e._configElement(p,y,d.descriptionProperty,d.descriptionSlot),Object.keys(d.attributes||{}).forEach(function(e){void 0!==f(d.attributes[e])&&null!==d.attributes[e]&&c.setAttribute(e,d.attributes[e])}),Object.keys(d.properties||{}).forEach(function(e){d.properties[e]&&s[e]&&(c[d.properties[e]]=s[e])}),Object.keys(d.slots||{}).forEach(function(e){d.slots[e]&&s[d.slots[e]]&&d.slots[e].split(/[\s,]/).forEach(function(t){var n=document.createElement("span");n.slot=e,n.innerHTML=s[t],c.appendChild(n)})}),n.slots&&n.slots[l]&&(p.slot=n.slots[l]),n.appendChild(p),"array"===s.type?e._addArrayItems(m,d.child,s,c):s.properties?e._addToForm(s,c,"".concat(c.id,"."),d.child):(c!==p&&(c.slot="field",p.appendChild(c)),"undefined"===f(m)&&"boolean"!==s.type||e._configElement(c,m,d.setValueProperty,d.valueSlot),c.addEventListener(d.valueChangedProperty,function(t){return e._handleChange(c,d.valueProperty,t)}),p.addEventListener(d.errorChangedProperty,function(t){var n=e._deepClone(e.error||{});p[d.errorProperty]?n[u]=p[d.errorMessageProperty]||"":n&&n[u]&&delete n[u],e.error=n,v&&v(t)})),e.__formElementsArray.push({id:u,field:p,data:d}),e.__formElements[u]={element:c,field:p}}})}},{key:"_configElement",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(i){var r=document.createElement("span");r.slot=i,t&&(r.innerHTML=t),e&&e.querySelectorAll("[slot=".concat(i,"]")).forEach(function(e){return e.remove()}),e.appendChild(r)}else e[n]=t}},{key:"_insertArrayItem",value:function(e,t,n,i,r,o){var a=this._getValue(i.name),l=a?a.length:0;a||this._setValue(i.name,[]),o=o||0===o?o:l;var s={properties:{}};s.properties[o]=this._addArrayItem(o,e,t),this._setValue("".concat(i.name,".").concat(o),r),this._addToForm(s,i,"".concat(i.id,"."),n)}},{key:"_addArrayItems",value:function(e,t,n,i){var r=this,o=Object.keys(n.items.properties||{}),a=n.previewBy||(o.length>0?[o[0]]:void 0);(e=e||[]).forEach(function(e,o){r._insertArrayItem(n,a,t,i,e,o)}),i.addEventListener("add",function(e){r._insertArrayItem(n,a,t,i,{})}),i.addEventListener("remove",function(e){var o=e.detail.id,l=r._getValue(i.name)||[],s=o.replace("".concat(i.name,"."),"");l.splice(parseInt(s),1),r.__formElementsArray=r.__formElementsArray.filter(function(e){return 0===e.id.indexOf(i.name)}),i.innerHTML="",l.forEach(function(e,o){return r._insertArrayItem(n,a,t,i,e,o)}),r._setValue("".concat(i.name),l),i.focus(parseInt(s)-1)})}},{key:"_addArrayItem",value:function(e,t,n){var i=this._deepClone(t.items);return i.label="".concat(parseInt(e)+1),i.previewBy=n,i}},{key:"_clearForm",value:function(){this.innerHTML="",this.__formElementsArray=[]}},{key:"_convertSchema",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.schemaConversion,i=arguments.length>2?arguments[2]:void 0,r=Object.keys(e||{}),o=Object.keys(n).filter(function(e){return r.includes(e)});return n.defaultSettings&&(i=this._deepClone(n.defaultSettings)),o.forEach(function(r){var o=e[r],a=n?n[r]:void 0,l=a?Array.isArray(o)?a[o[0]]:a[o]:void 0;l&&(i=t._convertSchema(e,l,i))}),i}},{key:"_deepClone",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"_errorChanged",value:function(){var e=this;this.formElementsArray.forEach(function(t){var n=t.data||{},i=t.field;if(t.id&&i&&e.error){var r=e.error[t.id]||!1,o=!!e.error[t.id];o||Object.keys(e.error||{}).forEach(function(e){e.match(t.id)&&(o=!0)}),e._configElement(t.field,r,n.errorMessageProperty,n.errorMessageSlot),t.field[n.errorProperty]=o,t.field.setAttribute("aria-invalid",o)}})}},{key:"_fireValueChanged",value:function(){this.dispatchEvent(new CustomEvent("value-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_formFieldsChanged",value:function(e){this.dispatchEvent(new CustomEvent("fields-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_getValue",value:function(e){var t=e.split("."),n=this.value;return t.forEach(function(e){n=n&&n[e]?n[e]:void 0}),n}},{key:"_handleChange",value:function(e,t,n){n&&n.stopPropagation&&n.stopPropagation();var i=e.id||e.getAttribute("id"),r=e[t];this._setValue(i,r),this.dispatchEvent(new CustomEvent("".concat(i,"-value-changed"),{bubbles:!0,cancelable:!0,composed:!0,detail:{id:i,element:e,value:r}})),this._fireValueChanged()}},{key:"_schemaChanged",value:function(e,t){var n=this;e&&e!==t&&("requestIdleCallback"in window?requestIdleCallback(this.rebuildForm.bind(this),{timeout:10}):setTimeout(function(){n.rebuildForm()},10),this.dispatchEvent(new CustomEvent("schema-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this})))}},{key:"_setValue",value:function(e,t){for(var n=this._deepClone(this.value),i=this.value,r=e?e.split("."):[],o=r.length,a=0;a<o-1;a++){var l=r[a];i[l]||(i[l]={}),i=i[l]}i[r[o-1]]=t,this._valueChanged(this.value,n)}},{key:"_valueChanged",value:function(e,t){e&&e!==t&&this._fireValueChanged()}},{key:"formElements",get:function(){return this.__formElements}},{key:"formElementsArray",get:function(){return this.__formElementsArray}},{key:"schemaConversion",get:function(){return this.elementizer||{defaultSettings:{element:"input",attributes:{type:"text"},properties:{minLength:"minlength",maxLength:"maxlength"}},type:{array:{defaultSettings:{element:"simple-fields-array",invalidProperty:"invalid",noWrap:!0,descriptionProperty:"description",child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy"}}}},boolean:{defaultSettings:{element:"input",valueProperty:"checked",valueChangedProperty:"click",attributes:{type:"checkbox",value:!1}}},file:{defaultSettings:{element:"input",attributes:{type:"url"}}},integer:{defaultSettings:{element:"input",attributes:{autofocus:!0,step:1,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},markup:{defaultSettings:{element:"textarea"}},number:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},object:{defaultSettings:{element:"simple-fields-fieldset",noWrap:!0,descriptionProperty:"description"}},string:{format:{"date-time":{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"datetime-local"}}},time:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"time"}}},date:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"date"}}},email:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"email"}}},uri:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"url"}}}}}}}}},{key:"valid",get:function(){return!this.error||0===Object.keys(this.error==={}).length}}]),n}();function pe(){var e=C(['\n      <textarea\n        aria-invalid="','"\n        ?autofocus="','"\n        class="field box-input"\n        @change="','"\n        @keydown="','"\n        ?disabled="','"\n        ?hidden="','"\n        @input="','"\n        .name="','"\n        ?readonly="','"\n        ?required="','"\n        rows="1"\n      >\n',"</textarea\n      >\n    "]);return pe=function(){return e},e}function fe(){var e=C(['\n            <option\n              .id="',".",'"\n              ?selected="','"\n              .value="','"\n            >\n              ',"\n            </option>\n          "]);return fe=function(){return e},e}function me(){var e=C(['\n      <select\n        ?autofocus="','"\n        aria-descrbedby="','"\n        aria-invalid="','"\n        @change="','"\n        class="field"\n        ?disabled="','"\n        ?hidden="','"\n        ?multiple="','"\n        .name="','"\n        ?readonly="','"\n        ?required="','"\n      >\n        ',"\n      </select>\n    "]);return me=function(){return e},e}function he(){var e=C(['\n      <input\n        aria-descrbedby="','"\n        aria-invalid="','"\n        ?autofocus="','"\n        @change="','"\n        ?checked="','"\n        class="field ','"\n        ?disabled="','"\n        ?hidden="','"\n        @input="','"\n        .name="','"\n        .placeholder="','"\n        ?readonly="','"\n        ?required="','"\n        .type="','"\n      />\n    ']);return he=function(){return e},e}function ye(){var e=C(['\n              <div class="option inline">\n                <label for="',".",'" class="radio-label"\n                  >','</label\n                >\n                <input\n                  .id="','"\n                  .name="','"\n                  ?autofocus="','"\n                  aria-descrbedby="','"\n                  .aria-invalid="','"\n                  ?checked="','"\n                  class="field"\n                  @click="','"\n                  ?disabled="','"\n                  ?hidden="','"\n                  ?readonly="','"\n                  ?required="','"\n                  type="','"\n                  .value="','"\n                />\n              </div>\n            ']);return ye=function(){return e},e}function ve(){var e=C(['\n      <fieldset>\n        <legend class="label-main" ?hidden="','">\n          ',"",'\n        </legend>\n        <div id="options">\n          ',"\n        </div>\n        ","\n      </fieldset>\n    "]);return ve=function(){return e},e}function be(){var e=C([' <div id="fieldmeta" aria-live="polite"></div> ']);return be=function(){return e},e}function ge(){var e=C(['\n      <div\n        class="','"\n      >\n        ',"\n        <div>\n          ","\n          ","\n          ","\n        </div>\n      </div>\n    "]);return ge=function(){return e},e}function ke(){var e=C(['\n        fieldset {\n          margin: 0;\n          padding: 0;\n          border: none;\n        }\n        option {\n          border-radius: 0;\n        }\n        legend {\n          padding-inline-start: unset;\n          padding-inline-end: unset;\n        }\n        #options {\n          display: var(--simple-fields-radio-option-display, flex);\n          flex-wrap: var(--simple-fields-radio-option-flex-wrap, wrap);\n        }\n        .option {\n          display: flex;\n          flex-wrap: wrap;\n          align-items: stretch;\n          justify-content: space-between;\n          margin: 0 var(--simple-fields-margin-small, 8px) 0 0;\n        }\n        .option:last-of-type {\n          margin: 0;\n        }\n        .option:focus-within label {\n          color: var(--simple-fields-accent, #003f7d);\n          transition: color ease-in-out;\n        }\n        :host([type]) fieldset .border-bottom {\n          display: block;\n        }\n        .box-input:focus {\n          outline: none;\n        }\n        textarea {\n          margin: 0;\n          transition: height 0.5s ease-in-out;\n          box-sizing: border-box;\n          vertical-align: bottom;\n        }\n        select.field {\n          width: 100%;\n          border: none;\n          background: transparent;\n          border-radius: 0;\n          transition: color ease-in-out;\n        }\n        select:focus,\n        select:focus-within {\n          outline: none;\n        }\n        input[type="range"] {\n          width: 100%;\n          height: calc(\n            var(--simple-fields-font-size, 16px) +\n              var(--simple-fields-line-height, 22px)\n          );\n          padding: 0;\n          margin: 0;\n          box-sizing: border-box;\n          -webkit-appearance: none;\n        }\n        input[type="range"]:focus {\n          outline: none;\n        }\n        input[type="range"]::-webkit-slider-runnable-track {\n          width: 100%;\n          height: 16px;\n          cursor: pointer;\n          background: var(--simple-fields-border-color-light, #ccc);\n          border-radius: 8px;\n          transition: all 0.5ms ease-in-out;\n        }\n        :host([error]) input[type="range"]::-webkit-slider-runnable-track {\n          background: var(--simple-fields-faded-error-color, #ff997f);\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"]::-webkit-slider-thumb {\n          height: 20px;\n          width: 20px;\n          border-radius: 50%;\n          background: var(--simple-fields-background-color, white);\n          box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.6);\n          cursor: pointer;\n          -webkit-appearance: none;\n          margin-top: -2px;\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"][readonly]::-webkit-slider-thumb,\n        input[type="range"][disabled]::-webkit-slider-thumb {\n          cursor: not-allowed;\n        }\n        input[type="range"]:focus::-webkit-slider-thumb {\n          background: var(--simple-fields-accent-color, #3f51b5);\n          transition: all 0.5ms ease-in-out;\n        }\n        :host([error]) input[type="range"]::-webkit-slider-thumb {\n          background: var(--simple-fields-error-color, #dd2c00);\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"][readonly]::-webkit-slider-thumb,\n        input[type="range"][disabled]::-webkit-slider-thumb {\n          background: var(--simple-fields-border-color, #999);\n          cursor: not-allowed;\n          box-shadow: none;\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"]::-moz-range-track {\n          width: 100%;\n          height: 16px;\n          cursor: pointer;\n          background: var(--simple-fields-border-color-light, #ccc);\n          border-radius: 8px;\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"][readonly]::-moz-range-track,\n        input[type="range"][disabled]::-moz-range-track {\n          cursor: not-allowed;\n        }\n        :host([error]) input[type="range"]::-moz-range-track {\n          background: var(--simple-fields-faded-error-color, #ff997f);\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"]::-moz-range-thumb {\n          height: 20px;\n          width: 20px;\n          border-radius: 50%;\n          background: var(--simple-fields-background-color, white);\n          box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.6);\n          cursor: pointer;\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"]:focus::-moz-range-thumb {\n          background: var(--simple-fields-accent-color, #3f51b5);\n          transition: all 0.5ms ease-in-out;\n        }\n        :host([error]) input[type="range"]::-moz-range-thumb {\n          background: var(--simple-fields-error-color, #dd2c00);\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"][readonly]::-moz-range-thumb,\n        input[type="range"][disabled]::-moz-range-thumb {\n          background: var(--simple-fields-border-color, #999);\n          cursor: not-allowed;\n          box-shadow: none;\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"]::-ms-track {\n          width: 100%;\n          height: 16px;\n          cursor: pointer;\n          background: transparent;\n          border-color: transparent;\n          color: transparent;\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"][readonly]::-ms-track,\n        input[type="range"][disabled]::-ms-track {\n          cursor: not-allowed;\n        }\n        :host([error]) input[type="range"]::-ms-track {\n          background: var(--simple-fields-faded-error-color, #ff997f);\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"]::-ms-fill-lower {\n          background: var(--simple-fields-border-color-light, #ccc);\n          border-radius: 8px;\n        }\n        input[type="range"]::-ms-fill-upper {\n          background: var(--simple-fields-border-color-light, #ccc);\n          border-radius: 8px;\n        }\n        input[type="range"]::-ms-thumb {\n          height: 20px;\n          width: 20px;\n          border-radius: 50%;\n          background: var(--simple-fields-background-color, white);\n          box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.6);\n          cursor: pointer;\n        }\n        input[type="range"][readonly]::-ms-thumb,\n        input[type="range"][disabled]::-ms-thumb {\n          cursor: not-allowed;\n        }\n        input[type="range"]:focus::-ms-thumb {\n          background: var(--simple-fields-accent-color, #3f51b5);\n        }\n        :host([error]) input[type="range"]::-ms-thumb {\n          background: var(--simple-fields-error-color, #dd2c00);\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"][redonly]::-ms-thumb,\n        input[type="range"][disabled]::-ms-thumb {\n          background: var(--simple-fields-border-color, #999);\n          cursor: not-allowed;\n          box-shadow: none;\n          transition: all 0.5ms ease-in-out;\n        }\n        input[type="range"]:focus::-ms-fill-lower {\n          background: var(--simple-fields-border-color-light, #ccc);\n        }\n        input[type="range"]:focus::-ms-fill-upper {\n          background: var(--simple-fields-border-color-light, #ccc);\n        }\n      ']);return ke=function(){return e},e}window.customElements.define(ce.tag,ce);var xe=function(e){k(n,U);var t=S(n);function n(){var e;return m(this,n),(e=t.call(this)).autocomplete="off",e.autofocus=!1,e.multiple=!1,e.readonly=!1,e.spellcheck=!1,e.itemsList=[],e.options={},e.wrap=!1,e}return y(n,[{key:"render",value:function(){return this.hasFieldSet?this.fieldsetTemplate:E(x(n.prototype),"render",this).call(this)}}],[{key:"tag",get:function(){return"simple-fields-field"}},{key:"styles",get:function(){return[].concat(j(E(x(n),"styles",this)),[a.css(ke())])}},{key:"properties",get:function(){return g(g({},E(x(n),"properties",this)),{},{accept:{type:String},autocomplete:{type:String},autofocus:{type:Boolean},capture:{type:String},counter:{type:String},dirname:{type:String},itemsList:{type:Array,attribute:"items-list"},list:{type:String},max:{type:Number},maxlength:{type:Number},min:{type:Number},minlength:{type:Number},multiple:{type:Boolean},options:{type:Object},placeholder:{type:String},size:{type:Number},spellcheck:{type:String},step:{type:Number},value:{reflect:!0},wrap:{type:Boolean}})}}]),y(n,[{key:"updated",value:function(e){var t=this;this.field||this._updateField(),e.forEach(function(e,n){"id"!==n||t.id||(t.id=t._generateUUID()),t._getAttributes(t.type).includes(n)&&t._updateAttribute(n),"value"===n&&t.value!==e&&(t.field.value!==t.value&&(t.field.value=t.value),t._fireValueChanged()),["counter","maxlength","type"].includes(n)&&["text","textarea"].includes(t.type)&&t._updateCount(),"type"===n&&t.type!==e&&t._updateField()})}},{key:"_fireValueChanged",value:function(){this.dispatchEvent(new CustomEvent("value-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_handleFieldChange",value:function(){E(x(n.prototype),"_handleFieldChange",this).call(this),this.value=this._getFieldValue()}},{key:"_getAttributes",value:function(e){return{checkbox:["autocomplete","form","list"],color:["autocomplete","form","list"],date:["autocomplete","form","list","max","min","step"],"datetime-local":["form","list","max","min","step"],email:["autocomplete","form","list","placeholder"],file:["autocomplete","accept","capture","form","list"],hidden:["autocomplete","form"],month:["autocomplete","form","list","max","min","step"],number:["autocomplete","form","list","max","min","step"],password:["autocomplete","form","list","maxlength","maxlength","pattern","placeholder"],radio:["autocomplete","form","list"],range:["autocomplete","form","list","max","min","step"],search:["autocomplete","dirname","form","list","maxlength","maxlength","placeholder"],select:["autocomplete","form","list","size"],tel:["autocomplete","form","list","maxlength","maxlength","pattern","placeholder"],text:["autocomplete","dirname","form","list","maxlength","maxlength","pattern","placeholder"],textarea:["autocomplete","autocomplete","form","maxlength","maxlength","placeholder","spellcheck","wrap"],time:["autocomplete","form","list","max","min","step"],url:["autocomplete","form","list","maxlength","maxlength","placeholder"],week:["autocomplete","form","list","max","min","step"]}[e]}},{key:"_observeAndListen",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(this.addEventListener("click",this.focus),this.addEventListener("focusout",this._onFocusout),this.addEventListener("focusin",this._onFocusin)):(this.removeEventListener("click",this.focus),this.removeEventListener("focusout",this._onFocusout),this.removeEventListener("focusin",this._onFocusin))}},{key:"_updateAttribute",value:function(e){this.field&&this[e]!==this.field.getAttribute(e)&&(this[e]?this.field.setAttribute(e,this[e]):this.field.removeAttribute(e,this[e]))}},{key:"_updateField",value:function(){var e=this;this.type=this._getValidType(this.type),this.field=this.shadowRoot&&this.shadowRoot.querySelector(this.fieldElementTag)?this.shadowRoot.querySelector(this.fieldElementTag):void 0,this._getAttributes(this.type).forEach(function(t){return e._updateAttribute(t)}),"select"!==this.type&&this.field&&this._updateAttribute("value")}},{key:"hasFieldSet",get:function(){return("radio"===this.type||"checkbox"===this.type)&&!this.noOptions}},{key:"fieldElementTag",get:function(){return"select"===this.type||"text"===this.type&&!this.noOptions?"select":"textarea"===this.type?"textarea":this.hasFieldSet?"fieldset":"input"}},{key:"fieldMainTemplate",get:function(){return a.html(ge(),this.inline||["checkbox","color","radio"].includes(this.type||"text")?"field-main inline":"field-main",this.labelTemplate,this.prefixTemplate,"input"===this.fieldElementTag?this.inputTemplate:"select"===this.fieldElementTag?this.selectTemplate:"textarea"===this.fieldElementTag?this.textareaTemplate:"",this.suffixTemplate)}},{key:"fieldMeta",get:function(){return a.html(be())}},{key:"fieldsetTemplate",get:function(){var e=this;return a.html(ve(),!this.label,this.label,this.error||this.required?"*":"",(this.sortedOptions||[]).map(function(t){return a.html(ye(),e.id,t.value,t.text,t.value,e.id,e.autofocus,e.describedBy,e.error?"true":"false","radio"===e.type?e.value===t.value:(e.value||[]).includes(t.value),function(t){return e._handleFieldChange()},e.disabled,e.hidden,e.readonly,e.required,e.type,t.value)}),this.fieldBottom)}},{key:"inputTemplate",get:function(){var e=this;return a.html(he(),this.describedBy||"",this.error?"true":"false",this.autofocus,function(t){return e._handleFieldChange()},!!this.value,["checkbox","color","file","radio","range"].includes(this.type)?"":"box-input",this.disabled,this.hidden,function(t){return e._handleFieldChange()},this.id,this.placeholder||"",this.readonly,this.required,this.type)}},{key:"noOptions",get:function(){return this.itemsList.length<1&&Object.keys(this.options||{}).length<1}},{key:"sortedOptions",get:function(){var e=this,t=(this.itemsList||[]).map(function(e,t){return"object"===f(e)?e:{value:e,text:e}});return Object.keys(this.options||{}).sort(function(e,t){return e>t?1:-1}).forEach(function(n){return t.push({value:n,text:e.options[n]})}),t}},{key:"selectTemplate",get:function(){var e=this;return a.html(me(),this.autofocus,this.describedBy,this.error?"true":"false",function(t){return e._handleFieldChange()},this.disabled,this.hidden,this.multiple,this.id,this.readonly,this.required,(this.sortedOptions||[]).map(function(t){return a.html(fe(),e.id,t.value,e.multiple?e.value&&e.value.includes(t.value):e.value===t.value,t.value,t.text)}))}},{key:"slottedFieldObserver",get:function(){}},{key:"textareaTemplate",get:function(){var e=this;return a.html(pe(),this.error?"true":"false",this.autofocus,function(t){return e._handleFieldChange()},function(e){return e.stopPropagation()},this.disabled,this.hidden,function(t){return e._handleFieldChange()},this.id,this.readonly,this.required,this.value||"")}}]),n}();function we(){var e=C(["\n:host {\n  display: block;\n  --simple-picker-background-color: var(--simple-fields-background-color,white);\n  --simple-picker-border-width: 0;\n  --simple-picker-focus-border-width: 0;\n  --simple-picker-display: block;\n  --simple-picker-listbox-border-width: 1px;\n  --simple-picker-listbox-outline: none;\n}\n\n:host([hidden]) {\n  display: none;\n}\n      "]);return we=function(){return e},e}function _e(){var e=C(['\n\n<div id="schema-fields" aria-live="polite">\n  <slot></slot>\n</div>']);return _e=function(){return e},e}window.customElements.define(xe.tag,xe);var Se=function(e){k(n,ce);var t=S(n);function n(){var e;return m(this,n),(e=t.call(this)).activeTabs={},e.disableResponsive=!1,e.addEventListener("active-tab-changed",e._handleActiveTab),"requestIdleCallback"in window?requestIdleCallback(e.__importDependendies.bind(_(e)),{timeout:1e3}):setTimeout(function(){e.__importDependendies()},1e3),e}return y(n,[{key:"render",value:function(){return a.html(_e())}},{key:"__importDependendies",value:function(){}}],[{key:"styles",get:function(){return[].concat(j(E(x(n),"styles",this)),[a.css(we())])}},{key:"haxProperties",get:function(){return{}}},{key:"properties",get:function(){return g(g({},E(x(n),"properties",this)),{},{fields:{type:Array},schematizer:{type:Object,attribute:"schematizer"},label:{type:String},__activeTabs:{type:Object,attribute:"active-path"},disableResponsive:{type:Boolean,attribute:"disable-responsive"}})}},{key:"tag",get:function(){return"simple-fields"}}]),y(n,[{key:"updated",value:function(e){var t=this;E(x(n.prototype),"updated",this).call(this,e),e.forEach(function(e,n){["fields","fieldsConversion"].includes(n)&&(t.schema=t.convertedSchema),"__activeTabs"===n&&t.activeTabs!==e&&t._handleActiveTabs()})}},{key:"setActiveTab",value:function(e){var t=e.replace(/\.[0-9a-z]+$/,""),n=this.querySelector("#".concat(t)),i=n.querySelector("#".concat(e));n&&i&&(n.activeTab=e)}},{key:"setActivePath",value:function(e){var t=this;e.split("/").forEach(function(e){t.setActiveTab(e)})}},{key:"_convertField",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.fieldsConversion,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.keys(e||{}),o=Object.keys(n||{}).filter(function(e){return r.includes(e)});return n.defaultSettings&&(i=n.defaultSettings),o.forEach(function(r){var o=e[r],a=n?n[r]:void 0,l=a?Array.isArray(o)?a[o[0]]:a[o]:void 0;l&&(i=t._convertField(e,l,i))}),i}},{key:"_fieldToSchema",value:function(e){var t=this,n={};return Object.keys(e||{}).forEach(function(i){!e.inputMethod&&e.properties&&(e.inputMethod="object");var r=t._convertField(e);r.type&&(n.type=r.type),r.format&&(n.format=r.format),"pattern"===i?".*"!=e.validation&&(n.pattern=e.validation):"properties"===i?"array"===r.type&&Array.isArray(e.properties)?n.items={type:"object",properties:t.fieldsToSchema(e.properties)}:"array"===r.type?n.items=t._fieldToSchema(e.properties):n.properties=t.fieldsToSchema(e.properties):["items","inputMethod","property","properties","required","type","validation"].includes(i)||(n[i]=e[i])}),n}},{key:"fieldsToSchema",value:function(e){var t=this,n={};return e&&e.forEach&&e.forEach(function(e){var i=e.property?e.property:"";n[i]=t._fieldToSchema(e)}),n}},{key:"_handleActiveTabs",value:function(){this.dispatchEvent(new CustomEvent("active-tabs-changed",{bubbles:!0,cancelable:!0,composed:!1,detail:this}))}},{key:"_handleActiveTab",value:function(e){e&&e.detail&&e.detail.id&&(this.activeTabs[e.detail.id]=e.detail.activeTab)}},{key:"convertedSchema",get:function(){return{$schema:"http://json-schema.org/schema#",title:this.label,type:"object",required:[],properties:this.fieldsToSchema(this.fields)}}},{key:"schemaConversion",get:function(){var e;return this.elementizer||{defaultSettings:{element:"simple-fields-field",errorProperty:"errorMessage",invalidProperty:"invalid",noWrap:!0,attributes:{type:"text"},properties:{minLength:"minlength",maxLength:"maxlength"}},format:{radio:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"radio"},properties:{options:"options"},child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy"}}}},select:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"select"},properties:{options:"options",items:"itemsList"}}},"simple-picker":{defaultSettings:{element:"simple-picker",attributes:{autofocus:!0},properties:{options:"options"}}}},type:{array:{defaultSettings:{element:"simple-fields-array",noWrap:!0,descriptionProperty:"description",child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy"}}}},boolean:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"checkbox",value:!1}}},file:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"file"},properties:{accepts:"accepts"}}},integer:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,step:1,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},markup:{defaultSettings:{element:"simple-fields-code",setValueProperty:"editorValue",noWrap:!0},format:{"md-block":{defaultSettings:{element:"md-block",setValueProperty:"source",noWrap:!0}}}},number:{defaultSettings:{element:"simple-fields-field",noWrap:!0,type:"number",attributes:{autofocus:!0,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},object:{defaultSettings:{element:"simple-fields-fieldset",noWrap:!0},format:{tabs:{defaultSettings:{element:"simple-fields-tabs",noWrap:!0,child:{element:"simple-fields-tab",noWrap:!0,labelSlot:"label",descriptionSlot:""},properties:{layoutBreakpoint:"layoutBreakpoint",iconBreakpoint:"iconBreakpoint",sticky:"sticky",disableResponsive:this.disableResponsive}}},fields:{defaultSettings:{element:"simple-fields",noWrap:!0,descriptionProperty:"description",properties:{schema:"schema"}}}}},string:{format:(e={alt:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,required:!0}}},color:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"color"}}},colorpicker:{defaultSettings:{element:"simple-colors-picker",attributes:{autofocus:!0}}},date:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"date"}}},"date-time":{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"datetime-local"}}}},v(e,"date",{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"date"}}}),v(e,"email",{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"email"}}}),v(e,"fileupload",{defaultSettings:{element:"simple-fields-upload",noWrap:!0,attributes:{autofocus:!0}}}),v(e,"iconpicker",{defaultSettings:{element:"simple-icon-picker",attributes:{autofocus:!0}}}),v(e,"month",{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"month"}}}),v(e,"textarea",{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"textarea"}}}),v(e,"time",{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"time"}}}),v(e,"uri",{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"file"}}}),e)}}}}},{key:"fieldsConversion",get:function(){return this.schematizer||{defaultSettings:{type:"string"},format:{"simple-fields":{defaultSettings:{type:"object",format:"simple-fields"}}},inputMethod:{alt:{defaultSettings:{type:"string",format:"alt"}},array:{defaultSettings:{type:"array"},properties:{label:"itemLabel"}},boolean:{defaultSettings:{type:"boolean"}},code:{defaultSettings:{type:"markup"}},"code-editor":{defaultSettings:{type:"markup"}},color:{defaultSettings:{type:"string",format:"color"}},colorpicker:{defaultSettings:{type:"string",format:"colorpicker"}},"date-time":{defaultSettings:{type:"string",format:"date-time"}},datepicker:{defaultSettings:{type:"string",format:"date"}},fieldset:{defaultSettings:{type:"object"}},fileupload:{defaultSettings:{type:"string",format:"fileupload"}},haxupload:{defaultSettings:{type:"string",format:"fileupload"}},iconpicker:{defaultSettings:{type:"string",format:"iconpicker"}},markup:{defaultSettings:{type:"markup"}},"md-block":{defaultSettings:{type:"markup",format:"md-block"}},monthpicker:{defaultSettings:{type:"string",format:"month"}},number:{defaultSettings:{type:"number"}},object:{defaultSettings:{type:"object"}},select:{defaultSettings:{type:"string",format:"select"}},slider:{defaultSettings:{type:"number",format:"slider"}},tabs:{defaultSettings:{type:"object",format:"tabs"}},textarea:{defaultSettings:{type:"string",format:"textarea"}},timepicker:{defaultSettings:{type:"string",format:"time"}},weekpicker:{defaultSettings:{type:"string",format:"week"}}}}}}]),n}();window.customElements.define(Se.tag,Se),e.SimpleFields=Se,Object.defineProperty(e,"__esModule",{value:!0})});
