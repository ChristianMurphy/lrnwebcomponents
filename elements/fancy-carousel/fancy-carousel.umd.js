!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@polymer/polymer/polymer-legacy.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js"),require("@polymer/polymer/lib/utils/resolve-url.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-legacy.js","@polymer/polymer/lib/legacy/polymer.dom.js","@polymer/polymer/lib/utils/resolve-url.js"],t):t((e=e||self).FancyCarousel={},e.polymerLegacy_js,e.polymer_dom_js,e.resolveUrl_js)}(this,function(e,t,n,i){"use strict";window.FancyCarouselAnimationBehaviourImpl={properties:{_isWorking:!1},observers:[],_getNatureSpriteUrl:function(){var e=i.pathFromUrl(decodeURIComponent("undefined"!=typeof document?document.currentScript&&document.currentScript.src||document.baseURI:new("undefined"!=typeof URL?URL:require("url").URL)("file:"+__filename).href));return"url('"+"".concat(e,"images/nature-sprite.png")+"')"},_getUrbanSpriteUrl:function(){var e=i.pathFromUrl(decodeURIComponent("undefined"!=typeof document?document.currentScript&&document.currentScript.src||document.baseURI:new("undefined"!=typeof URL?URL:require("url").URL)("file:"+__filename).href));return"url('"+"".concat(e,"images/urban-sprite.png")+"')"},_getShiftSpriteUrl:function(){var e=i.pathFromUrl(decodeURIComponent("undefined"!=typeof document?document.currentScript&&document.currentScript.src||document.baseURI:new("undefined"!=typeof URL?URL:require("url").URL)("file:"+__filename).href));return"url('"+"".concat(e,"images/building-sprite.png")+"')"},_getCollaspeSpriteUrl:function(){var e=i.pathFromUrl(decodeURIComponent("undefined"!=typeof document?document.currentScript&&document.currentScript.src||document.baseURI:new("undefined"!=typeof URL?URL:require("url").URL)("file:"+__filename).href));return"url('"+"".concat(e,"images/building-sprite-2.png")+"')"},_preloadAnimationSprites:function(){var e=document.createElement("div");e.style.backgroundImage=this._getNatureSpriteUrl(),e.style.visibility="hidden",e.setAttribute("class","dummy"),n.dom(this).appendChild(e);var t=document.createElement("div");t.style.backgroundImage=this._getUrbanSpriteUrl(),t.style.visibility="hidden",t.setAttribute("class","dummy"),n.dom(this).appendChild(t);var i=document.createElement("div");i.style.backgroundImage=this._getShiftSpriteUrl(),i.style.visibility="hidden",i.setAttribute("class","dummy"),n.dom(this).appendChild(i);var s=document.createElement("div");s.style.backgroundImage=this._getCollaspeSpriteUrl(),s.style.visibility="hidden",s.setAttribute("class","dummy"),n.dom(this).appendChild(s)},_resetZIndex:function(e,t){for(var n=0;n<e.length;n++)t&&t.src===e[n].src?e[n].style.zIndex="2":e[n].style.zIndex="1"},_startTransition:function(e,t,i){if("spread"===this.transitionType||"paint"===this.transitionType||"shift"===this.transitionType||"collapse"===this.transitionType)this._animateTransition(e,t,i);else{if(this._isWorking)return;this._isWorking=!0,i.style.zIndex="50";var s=t;this._translateX(s,0),this._translateX(i,this.offsetWidth*e),this.selected=i,this._translateX(s,-this.offsetWidth*e,!0),this._translateX(i,0,!0),this._resetZIndex(n.dom(this).children,t),i.style.zIndex="100",this._isWorking=!1}},_animateTransition:function(e,t,i){var s=this;s._isWorking||(s._isWorking=!0,i.style.zIndex="50",t.className=this.transitionType,"spread"===this.transitionType?(t.style.mask=this._getNatureSpriteUrl(),t.style.webkitMask=this._getNatureSpriteUrl()):"paint"===this.transitionType?(t.style.mask=this._getUrbanSpriteUrl(),t.style.webkitMask=this._getUrbanSpriteUrl()):"collapse"===this.transitionType?(t.style.mask=this._getCollaspeSpriteUrl(),t.style.webkitMask=this._getCollaspeSpriteUrl()):"shift"===this.transitionType&&(t.style.mask=this._getShiftSpriteUrl(),t.style.webkitMask=this._getShiftSpriteUrl()),setTimeout(function(){t.className="",t.style.mask="",t.style.webkitMask="",s._resetZIndex(n.dom(s).children),i.style.zIndex="100",s.selected=i,s._isWorking=!1},1400))},listeners:{transitionend:"_resetChildrenStyles",touchstart:"_touchstart",touchmove:"_touchmove",touchend:"_touchend"},_resetChildrenStyles:function(){for(var e=this.firstElementChild;e;)e.style.display="",e.style.transition="",e.style.transform="",e=e.nextElementSibling},_translateX:function(e,t,n){e.style.display="block",e.style.transition=n?"transform 0.2s":"",e.style.transform="translate3d("+t+"px, 0, 0)"},_touchstart:function(e){this.childElementCount<2||this._touchDir||(this._startX=e.changedTouches[0].clientX,this._startY=e.changedTouches[0].clientY)},_touchmove:function(e){if(!(this.childElementCount<2)){if(!this._touchDir){var t=Math.abs(e.changedTouches[0].clientX-this._startX),n=Math.abs(e.changedTouches[0].clientY-this._startY);this._touchDir=t>n?"x":"y"}if("x"===this._touchDir){e.preventDefault();var i=Math.round(e.changedTouches[0].clientX-this._startX),s=this.selected.previousElementSibling,r=this.selected.nextElementSibling;(!s&&i>0||!r&&i<0)&&(i=0),this._translateX(this.selected,i),s&&this._translateX(s,i-this.offsetWidth),r&&this._translateX(r,i+this.offsetWidth)}}},_touchend:function(e){if(!(this.childElementCount<2||e.touches.length)){if("x"===this._touchDir){var t=Math.round(e.changedTouches[0].clientX-this._startX),n=this.selected.previousElementSibling,i=this.selected.nextElementSibling;if((!n&&t>0||!i&&t<0)&&(t=0),t>0)(n=this.selected.previousElementSibling)&&(t>100?(t===this.offsetWidth?this._resetChildrenStyles():(this._translateX(n,0,!0),this._translateX(this.selected,this.offsetWidth,!0)),this.selected=n):(this._translateX(n,-this.offsetWidth,!0),this._translateX(this.selected,0,!0)));else if(t<0){(i=this.selected.nextElementSibling)&&(t<-100?(t===-this.offsetWidth?this._resetChildrenStyles():(this._translateX(this.selected,-this.offsetWidth,!0),this._translateX(i,0,!0)),this.selected=i):(this._translateX(this.selected,0,!0),this._translateX(i,this.offsetWidth,!0)))}else this._resetChildrenStyles()}this._touchDir=null}}},window.FancyCarouselAnimationBehaviour=[window.FancyCarouselAnimationBehaviourImpl],window.FancyCarouselBehaviourImpl={properties:{},observers:[],_loadCustomImages:function(e){var t,n=this;findImages(e,this.searchEngineCx,this.apiKey,function(e){e?(t=e,console.log(t),n._addImageNodes(t)):console.log("Error loading images")})},_addImageNodes:function(e){for(var t=e.length,i=0;i<t;i++)if(e[i]){var s=document.createElement("img");s.setAttribute("src",e[i]),s.style.width="100%",s.style.height="100%",n.dom(this).appendChild(s)}},_getNextElement:function(){for(var e=this.selected.nextElementSibling;e&&"dummy"===e.getAttribute("class");)e=e.nextElementSibling;return e||(e=n.dom(this).querySelectorAll("img")[0]),e},_timerChanged:function(e,t){var n=this;0!=e&&setInterval(function(){n.next()},1e3*e)},_selectedChanged:function(e,t){t&&t.removeAttribute("selected"),e&&(e.setAttribute("selected",""),this.$.prevBtn.disabled=!e.previousElementSibling,this.$.nextBtn.disabled=!e.nextElementSibling,this._loadImage(e),this._loadImage(e.previousElementSibling),this._loadImage(e.nextElementSibling))},_loadImage:function(e){e&&!e.src&&(e.src=e.getAttribute("data-src"))}},window.FancyCarouselBehaviour=[window.FancyCarouselBehaviourImpl,window.FancyCarouselAnimationBehaviour];var s=document.createElement("div");function r(){var e,t,n=(e=['\n    <style include="fancy-carousel-shared-styles">\n      :host {\n        display: block;\n        position: relative;\n        overflow: hidden;\n        width: 100%;\n        contain: content;\n      }\n\n      :host(:after) {\n        display: block;\n        content: "";\n        padding-top: 75%; /* 4:3 = height is 75% of width */\n      }\n\n      #prevBtn {\n        left: 12px;\n        z-index: 1000;\n      }\n\n      #nextBtn {\n        right: 12px;\n        z-index: 1000;\n      }\n    </style>\n\n    <div id="content-wrapper"><slot></slot></div>\n\n    <button id="prevBtn" on-click="previous">❮</button>\n    <button id="nextBtn" on-click="next">❯</button>\n  '],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return r=function(){return n},n}s.setAttribute("style","display: none;"),s.innerHTML='<dom-module id="fancy-carousel-shared-styles">\n  <template>\n    <style>\n      button {\n        position: absolute;\n        top: calc(50% - 20px);\n        padding: 0;\n        line-height: 40px;\n        border: none;\n        background: none;\n        color: #DDD;\n        font-size: 40px;\n        font-weight: bold;\n        opacity: 0.7;\n      }\n\n      button:hover,\n      button:focus {\n        opacity: 1;\n      }\n\n      button[disabled] {\n        opacity: 0.4;\n      }\n\n      #content-wrapper ::content > .spread {\n        -webkit-mask-size: 2300% 100%;\n        mask-size: 2300% 100%;\n        -webkit-animation: mask-play 1.4s steps(22) forwards;\n        animation: mask-play 1.4s steps(22) forwards;\n      }\n\n      #content-wrapper ::content > .paint {\n        -webkit-mask-size: 3000% 100%;\n        mask-size: 3000% 100%;\n        -webkit-animation: mask-play 1.4s steps(29) forwards;\n        animation: mask-play 1.4s steps(29) forwards;\n      }\n\n      #content-wrapper ::content > .shift {\n        -webkit-mask-size: 7500% 100%;\n        mask-size: 7500% 100%;\n        -webkit-animation: mask-play 1.4s steps(74) forwards;\n        animation: mask-play 1.4s steps(74) forwards;\n      }\n\n      #content-wrapper ::content > .collapse {\n       -webkit-mask-size: 8400% 100%;\n          mask-size: 8400% 100%;\n        -webkit-animation: mask-play 1.4s steps(83) forwards;\n          animation: mask-play 1.4s steps(83) forwards;\n      }\n\n      #content-wrapper ::content > img {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n      }\n\n      @-webkit-keyframes mask-play {\n        from {\n        -webkit-mask-position: 0% 0;\n        mask-position: 0% 0;\n        }\n        to {\n        -webkit-mask-position: 100% 0;\n        mask-position: 100% 0;\n        }\n      }\n\n      @keyframes mask-play {\n        from {\n        -webkit-mask-position: 0% 0;\n        mask-position: 0% 0;\n        }\n        to {\n        -webkit-mask-position: 100% 0;\n        mask-position: 100% 0;\n        }\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(s);var o=t.Polymer({_template:t.html(r()),is:"fancy-carousel",behaviors:[FancyCarouselBehaviour],properties:{selected:{observer:"_selectedChanged"},imageTopic:{type:String},searchEngineCx:{type:String},apiKey:{type:String},transitionType:{value:"default",type:String,notify:!0},noControls:{type:Boolean,value:!1},transitionTimer:{type:Number,value:0,observer:"_timerChanged"}},attached:function(){this._resetZIndex(n.dom(this).children),this.selected=n.dom(this).querySelectorAll("img")[0],this.selected&&(this.selected.style.zIndex="100"),this.noControls&&(this.$.prevBtn.style.display="none",this.$.nextBtn.style.display="none"),this.imageTopic&&this._loadCustomImages(this.imageTopic),this._preloadAnimationSprites()},previous:function(){for(var e=this.selected.previousElementSibling;e&&"dummy"===e.getAttribute("class");)e=e.previousElementSibling;e&&!this._touchDir&&this._startTransition(-1,this.selected,e)},next:function(){var e=this._getNextElement();e&&!this._touchDir&&this._startTransition(1,this.selected,e)}});e.FancyCarousel=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=fancy-carousel.umd.js.map
