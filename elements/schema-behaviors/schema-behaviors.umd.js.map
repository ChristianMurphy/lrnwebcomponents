{"version":3,"file":"schema-behaviors.umd.js","sources":["schema-behaviors.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\n\nexport const SchemaBehaviors = function(SuperClass) {\n  return class extends SuperClass {\n    /**\n     * HTMLElement\n     */\n    constructor() {\n      super();\n      this.schemaResourceID = \"\";\n      this.schemaMap = {\n        prefix: {\n          oer: \"http://oerschema.org/\",\n          schema: \"http://schema.org/\",\n          dc: \"http://purl.org/dc/terms/\",\n          foaf: \"http://xmlns.com/foaf/0.1/\",\n          cc: \"http://creativecommons.org/ns#\",\n          bib: \"http://bib.schema.org\"\n        }\n      };\n    }\n    /**\n     * Popular convention across libraries\n     */\n    static get properties() {\n      return {\n        ...super.properties,\n        /**\n         * Unique Resource ID, generated when schemaMap processes.\n         */\n        schemaResourceID: {\n          type: String,\n          attribute: \"schema-resource-id\"\n        },\n        /**\n         * Schema Map for the element, used to generate a valid prefix on the fly\n         * Props set for Polymer compatibility\n         */\n        schemaMap: {\n          type: Object,\n          readOnly: true,\n          observer: \"_schemaMapChanged\"\n        }\n      };\n    }\n    /**\n     * LitElement support\n     */\n    updated(changedProperties) {\n      if (super.updated) {\n        super.updated(changedProperties);\n      }\n      changedProperties.forEach((oldValue, propName) => {\n        if (propName == \"schemaMap\") {\n          this._schemaMapChanged(this[propName], oldValue);\n        }\n      });\n    }\n    /**\n     * Notice the schema map has changed, reprocess attributes.\n     */\n    _schemaMapChanged(newValue, oldValue) {\n      if (typeof newValue !== typeof undefined) {\n        // use this to tie into schemaResourceID build\n        this.schemaResourceID = this.getAttribute(\"resource\");\n        // if it still doesn't have one then we have to check\n        if (this.schemaResourceID == \"\" || this.schemaResourceID == null) {\n          this.schemaResourceID = this.generateResourceID();\n          this.setAttribute(\"resource\", this.schemaResourceID);\n        }\n        let prefixes = newValue.prefix;\n        let prefix = \"\";\n        // build prefix string\n        for (var property in prefixes) {\n          if (prefixes.hasOwnProperty(property)) {\n            prefix += property + \":\" + prefixes[property] + \" \";\n          }\n        }\n        // set prefix on the main element itself\n        if (prefix != \"\") {\n          this.setAttribute(\"prefix\", prefix);\n        }\n      }\n    }\n    /**\n     * Generate a uinque ID\n     */\n    generateResourceID() {\n      function idPart() {\n        return Math.floor((1 + Math.random()) * 0x10000)\n          .toString(16)\n          .substring(1);\n      }\n      return (\n        \"#\" +\n        idPart() +\n        idPart() +\n        \"-\" +\n        idPart() +\n        \"-\" +\n        idPart() +\n        \"-\" +\n        idPart()\n      );\n    }\n  };\n};\n"],"names":["SuperClass","schemaResourceID","schemaMap","prefix","oer","schema","dc","foaf","cc","bib","type","String","attribute","Object","readOnly","observer","changedProperties","forEach","oldValue","propName","_this2","_schemaMapChanged","newValue","_typeof","this","getAttribute","generateResourceID","setAttribute","prefixes","property","hasOwnProperty","idPart","Math","floor","random","toString","substring"],"mappings":"moDAK+B,SAASA,iLAO7BC,iBAAmB,KACnBC,UAAY,CACfC,OAAQ,CACNC,IAAK,wBACLC,OAAQ,qBACRC,GAAI,4BACJC,KAAM,6BACNC,GAAI,iCACJC,IAAK,kRAdQT,4aA2BfC,iBAAkB,CAChBS,KAAMC,OACNC,UAAW,sBAMbV,UAAW,CACTQ,KAAMG,OACNC,UAAU,EACVC,SAAU,4DAORC,2FAEUA,GAEhBA,EAAkBC,QAAQ,SAACC,EAAUC,GACnB,aAAZA,GACFC,EAAKC,kBAAkBD,EAAKD,GAAWD,+CAO3BI,EAAUJ,oBACtBK,EAAOD,GAA+B,MAEnCrB,iBAAmBuB,KAAKC,aAAa,YAEb,IAAzBD,KAAKvB,kBAAmD,MAAzBuB,KAAKvB,wBACjCA,iBAAmBuB,KAAKE,0BACxBC,aAAa,WAAYH,KAAKvB,uBAEjC2B,EAAWN,EAASnB,OACpBA,EAAS,OAER,IAAI0B,KAAYD,EACfA,EAASE,eAAeD,KAC1B1B,GAAU0B,EAAW,IAAMD,EAASC,GAAY,KAItC,IAAV1B,QACGwB,aAAa,SAAUxB,0DAQvB4B,WACAC,KAAKC,MAA4B,OAArB,EAAID,KAAKE,WACzBC,SAAS,IACTC,UAAU,SAGb,IACAL,IACAA,IACA,IACAA,IACA,IACAA,IACA,IACAA"}