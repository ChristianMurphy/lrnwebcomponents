{"version":3,"file":"outline-player.umd.js","sources":["lib/outline-player-arrow.js","outline-player.umd.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@lrnwebcomponents/materializecss-styles/materializecss-styles.js\";\n/**\n`outline-player`\nA LRN element\n\n* @demo demo/index.html\n\n*/\nPolymer({\n  _template: html`\n    <style include=\"materializecss-styles\">\n      :host {\n        display: block;\n        position: relative;\n        font-family: libre baskerville;\n        width: 48px;\n        --app-drawer-width: 300px;\n        --outline-player-dark: #222222;\n        --outline-player-light: #f8f8f8;\n      }\n\n      paper-icon-button {\n        --paper-icon-button-ink-color: var(--outline-player-dark);\n      }\n    </style>\n\n    <div id=\"container\">\n      <paper-icon-button\n        id=\"button\"\n        disabled=\"[[disabled]]\"\n        icon=\"[[icon]]\"\n      ></paper-icon-button>\n      <paper-tooltip for=\"button\" position=\"bottom\" offset=\"14\">\n        <slot></slot>\n      </paper-tooltip>\n    </div>\n  `,\n\n  is: \"outline-player-arrow\",\n\n  behaviors: [MaterializeCSSBehaviors.ColorBehaviors],\n\n  properties: {\n    icon: {\n      type: String,\n      value: \"icons:arrow-back\"\n    },\n    disabled: {\n      type: Boolean,\n      value: true,\n      reflectToAttribute: true\n    },\n    sticky: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true\n    },\n    __isNavSticky: {\n      type: Boolean,\n      value: false,\n      observer: \"__isNavStickyChanged\"\n    },\n    __originalPosition: {\n      type: Number,\n      value: 0\n    }\n  },\n\n  attached: function() {\n    // identify your nav element to query\n    this.__originalPosition = this.__getElementOffset(this);\n    const container = this.$.container;\n    // watch for a scroll event\n    window.addEventListener(\"scroll\", e => {\n      // check if we are sticky\n      if (this.sticky) {\n        // calculate is nav sticky\n        this.__calculateIsNavSticky();\n        // scroll the nav element\n        if (this.__isNavSticky) {\n          container.style.position = \"absolute\";\n          container.style.top =\n            window.pageYOffset - this.__originalPosition.top + \"px\";\n          container.style.left = this.__originalPosition.left;\n        }\n      }\n    });\n  },\n\n  /**\n   * Reset the dynaimc positioning of the arrows.  Usefull for ajax page changes\n   */\n  resetPosition: function() {\n    const container = this.$.container;\n    container.style.top = 0;\n  },\n\n  /**\n   * Sticky Nav has changed\n   */\n  __isNavStickyChanged: function(isNavSticky) {},\n\n  /**\n   * Calculate is nav sticky\n   */\n  __calculateIsNavSticky: function() {\n    const position = window.pageYOffset;\n    // if the window scroll has reached the element\n    if (this.__originalPosition.top < position) {\n      // // check to make sure that its not already sticky\n      if (!this.__isNavSticky) {\n        this.__isNavSticky = true;\n      }\n    } else {\n      if (this.__isNavSticky) {\n        this.__isNavSticky = false;\n      }\n    }\n  },\n\n  /**\n   * Get Element Offset\n   */\n  __getElementOffset(element) {\n    const de = document.documentElement;\n    const box = element.getBoundingClientRect();\n    const top = box.top + window.pageYOffset - de.clientTop;\n    const left = box.left + window.pageXOffset - de.clientLeft;\n    return { top: top, left: left };\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport { updateStyles } from \"@polymer/polymer/lib/mixins/element-mixin.js\";\nimport \"@polymer/app-layout/app-header/app-header.js\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar.js\";\nimport \"@polymer/app-layout/app-drawer/app-drawer.js\";\nimport \"@polymer/app-layout/app-drawer-layout/app-drawer-layout.js\";\nimport \"@polymer/app-layout/app-header-layout/app-header-layout.js\";\nimport \"@lrnwebcomponents/simple-colors/simple-colors.js\";\nimport \"@lrnwebcomponents/haxcms-elements/lib/haxcms-theme-behavior.js\";\nimport \"@lrnwebcomponents/hax-body/lib/hax-shared-styles.js\";\nimport \"@lrnwebcomponents/map-menu/map-menu.js\";\nimport { store as routerStore } from \"@lrnwebcomponents/haxcms-elements/lib/haxcms-site-router.js\";\nimport { autorun, toJS } from \"mobx\";\nimport \"./lib/outline-player-arrow.js\";\n\n/**\n`outline-player`\nA LRN element\n\n* @demo demo/index.html\n\n*/\nlet OutlinePlayer = Polymer({\n  _template: html`\n    <style include=\"simple-colors hax-shared-styles\">\n      :host {\n        display: block;\n        font-family: libre baskerville;\n        position: relative;\n        overflow: hidden;\n        --outline-player-min-height: 100vh;\n        --app-drawer-width: 300px;\n        --outline-player-dark: #222222;\n        --outline-player-light: #f8f8f8;\n        --outline-player-arrow-margin-top: 50px;\n      }\n\n      :host([closed]) {\n        --app-drawer-width: 0px;\n      }\n\n      h1 {\n        font-size: 48px;\n        line-height: 16px;\n      }\n\n      h2 {\n        font-size: 32px;\n      }\n\n      h3 {\n        font-size: 28px;\n      }\n\n      p {\n        line-height: 26px;\n        min-height: 26px;\n      }\n\n      a,\n      a:visited,\n      a:active {\n        color: #000;\n      }\n\n      a:hover {\n        color: #2196f3;\n      }\n\n      ul li {\n        padding-bottom: 24px;\n        line-height: 1.5;\n        color: #424242;\n        max-width: 448px;\n      }\n\n      ul li:last-child {\n        padding-bottom: 16px;\n      }\n\n      app-drawer-layout {\n        min-height: 100vh;\n        min-height: -moz-available; /* WebKit-based browsers will ignore this. */\n        min-height: -webkit-fill-available; /* Mozilla-based browsers will ignore this. */\n        min-height: fill-available;\n        /* if the user has set a specific value then override the defaults */\n        min-height: var(--outline-player-min-height);\n      }\n\n      .outline-title {\n        font-size: 24px;\n        font-weight: normal;\n        line-height: 32px;\n        vertical-align: middle;\n        padding: 16px;\n        height: 32px;\n        margin: 0;\n        text-align: center;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        word-break: break-word;\n        border-bottom: 1px solid #eeeeee;\n        position: sticky;\n      }\n\n      #menu {\n        padding: 8px;\n      }\n\n      outline-player-navigation {\n        --outline-player-dark: var(--outline-player-dark);\n      }\n\n      div[main-title] {\n        margin-left: 16px;\n        font-size: 20px;\n        line-height: 20px;\n        overflow-wrap: break-word;\n        text-overflow: ellipsis;\n        display: inline-block;\n        word-break: break-word;\n      }\n\n      paper-progress {\n        display: block;\n        width: 100%;\n        --paper-progress-active-color: rgba(255, 255, 255, 0.5);\n        --paper-progress-container-color: transparent;\n      }\n\n      app-header {\n        color: var(--outline-player-dark);\n        /* Enable outline to be placed anywhere in the dom */\n        /* This will override the app-header-layout forcing fixed mode */\n        /*position: absolute !important;\n        left: 0 !important;*/\n        --app-header-background-rear-layer: {\n          /* app-header-layout will force fixed */\n          background-color: var(--outline-player-light);\n        }\n      }\n\n      app-toolbar {\n        border-bottom: none;\n        background-color: #ffffff;\n        box-shadow: 0 0 6px -3px var(--outline-player-dark);\n      }\n      app-drawer {\n        box-shadow: 0 0 6px -3px var(--outline-player-dark);\n        overflow: hidden;\n        --app-drawer-scrim-background: rgba(80, 80, 80, 0.8);\n        --app-drawer-content-container: {\n          overflow: hidden;\n          background-color: var(--outline-player-light);\n        }\n      }\n      app-drawer-layout[narrow] app-toolbar {\n        position: fixed !important;\n        left: 0;\n        right: 0;\n      }\n      app-drawer-layout[narrow] #contentcontainer {\n        padding-top: 64px;\n      }\n      #content {\n        justify-content: center;\n        padding: 0 8px 8px 8px;\n      }\n\n      #content > * {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      }\n\n      /* Required for HAX */\n      :host([edit-mode]) #slot {\n        display: none !important;\n      }\n      #contentcontainer {\n        max-width: 840px;\n        margin: 0 auto;\n        padding: 0 16px 16px 16px;\n        flex: 1 1 auto;\n        order: 1;\n        display: flex;\n      }\n      #contentcontainer > * {\n        flex: 1 1 auto;\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n      }\n      #contentcontainer h-a-x {\n        margin: 0;\n      }\n      map-menu {\n        height: calc(100vh - 80px);\n        --map-menu-container: {\n          padding: 0;\n        }\n      }\n      map-menu::-webkit-scrollbar-track {\n        -webkit-box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.3);\n        border-radius: 0;\n        background-color: #fafafa;\n      }\n      map-menu::-webkit-scrollbar {\n        width: 4px;\n        background-color: #fafafa;\n      }\n      map-menu::-webkit-scrollbar-thumb {\n        border-radius: 2px;\n        -webkit-box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.3);\n        background-color: #444444;\n      }\n    </style>\n    <!-- Control the sites query paremeters -->\n\n    <!-- Begin Layout -->\n    <app-drawer-layout>\n      <app-drawer id=\"drawer\" swipe-open=\"\" slot=\"drawer\">\n        <template is=\"dom-if\" if=\"[[__hasTitle(manifest.title)]]\">\n          <h2 class=\"outline-title\">[[manifest.title]]</h2>\n        </template>\n        <map-menu\n          id=\"menu\"\n          selected=\"[[selected]]\"\n          manifest=\"[[_routerManifest]]\"\n          active-indicator\n          auto-scroll\n        ></map-menu>\n      </app-drawer>\n      <app-header-layout>\n        <app-header slot=\"header\" reveals>\n          <app-toolbar>\n            <paper-icon-button\n              icon=\"menu\"\n              on-click=\"_toggleMenu\"\n            ></paper-icon-button>\n            <div main-title>\n              [[activeItem.title]]\n              <div id=\"slotTitle\"><slot name=\"title\"></slot></div>\n            </div>\n            <outline-player-arrow\n              id=\"prevpage\"\n              disabled=\"[[disablePrevPage(__activeIndex)]]\"\n              icon=\"icons:arrow-back\"\n              on-click=\"prevPage\"\n              >Previous\n            </outline-player-arrow>\n            <outline-player-arrow\n              id=\"nextpage\"\n              disabled=\"[[disableNextPage(__activeIndex)]]\"\n              icon=\"icons:arrow-forward\"\n              on-click=\"nextPage\"\n              >Next\n            </outline-player-arrow>\n          </app-toolbar>\n        </app-header>\n        <div id=\"content\">\n          <div id=\"contentcontainer\">\n            <div id=\"slot\"><slot></slot></div>\n          </div>\n        </div>\n      </app-header-layout>\n    </app-drawer-layout>\n  `,\n\n  is: \"outline-player\",\n\n  behaviors: [HAXCMSBehaviors.Theme],\n\n  properties: {\n    /**\n     * Manifest from haxcms-site-builder\n     */\n    manifest: {\n      type: Object\n    },\n    /**\n     * Auto call json files\n     */\n    auto: {\n      type: Boolean,\n      notify: true,\n      value: false\n    },\n    /**\n     * Outline JSON file name\n     */\n    outlineFile: {\n      type: String,\n      value: \"outline.json\",\n      notify: true\n    },\n    /**\n     * Outline JSON location\n     */\n    outlineLocation: {\n      type: String,\n      notify: true\n    },\n    /**\n     * acitvely selected item\n     */\n    selected: {\n      type: String,\n      notify: true,\n      observer: \"_selectedPageChanged\"\n    },\n    /**\n     * Closed status for the drawer\n     */\n    closed: {\n      type: Boolean,\n      notify: true,\n      reflectToAttribute: true,\n      value: false\n    },\n    /**\n     * Active item content\n     */\n    _activeItemContent: {\n      type: String,\n      observer: \"_activeItemContentChanged\"\n    },\n    /**\n     * Outline structured via JSON Outline Schema off the wire\n     */\n    outline: {\n      type: Array,\n      notify: true,\n      observer: \"_outlineChanged\"\n    },\n    /**\n     * Active item which is in JSON Outline Schema\n     */\n    activeItem: {\n      type: Object,\n      notify: true\n    },\n    /**\n     * Set min height of outline player to fill remaining\n     * space to the bottom of the browser\n     */\n    fillRemaining: {\n      type: Boolean,\n      value: false,\n      reflectToAttribute: true\n    },\n    /**\n     * Manifest that contains changes specific\n     * to routing.\n     */\n    _routerManifest: {\n      type: Object,\n      value: {}\n    },\n    _location: {\n      type: Object,\n      observer: \"_locationChanged\"\n    },\n    editMode: {\n      type: Boolean,\n      reflectToAttribute: true,\n      observer: \"_editModeChanged\"\n    }\n  },\n  _editModeChanged: function(newValue) {\n    if (typeof newValue !== typeof undefined) {\n      async.microTask.run(() => {\n        // trick browser into thinking we just reized\n        window.dispatchEvent(new Event(\"resize\"));\n        // forcibly update styles via css variables\n        updateStyles();\n      });\n    }\n  },\n  ready: function() {\n    this.setupHAXTheme(true, this.$.contentcontainer);\n    autorun(() => {\n      this._routerManifest = toJS(routerStore.manifest);\n    });\n    autorun(() => {\n      this._location = routerStore.location;\n    });\n    autorun(() => {\n      if (\n        routerStore.activeItem &&\n        typeof routerStore.activeItem !== \"undefined\"\n      ) {\n        this.selected = routerStore.activeItem.id;\n      }\n    });\n  },\n\n  attached: function() {},\n\n  _locationChanged: function(newValue) {\n    if (!newValue || typeof newValue.route === \"undefined\") return;\n    const location = newValue;\n    const name = location.route.name;\n    if (name === \"home\" || name === \"404\") {\n      // if we are on the homepage then load the first item in the manifest\n      // and set it active\n      const firstItem = this.manifest.items.find(\n        i => typeof i.id !== \"undefined\"\n      );\n      if (firstItem) {\n        // just update the local selected item locally. set a 500 mil second delay\n        // so that the map menu has time to rebuild.  This is a hack because of\n        // map menu.\n        setTimeout(() => {\n          this.selected = firstItem.id;\n        }, 500);\n        window.dispatchEvent(\n          new CustomEvent(\"json-outline-schema-active-item-changed\", {\n            detail: firstItem\n          })\n        );\n      }\n    }\n  },\n  /**\n   * Link menu button to open and closing the side panel.\n   */\n  _toggleMenu: function(e) {\n    this.$.drawer.toggle();\n    // allow styling to trigger based on open status\n    this.closed = !this.$.drawer.opened;\n    // kind of silly it doesn't just work this way but\n    // app-panel doesn't make any assumptions about how\n    // to handle the layout when it closes\n    async.microTask.run(() => {\n      // trick browser into thinking we just reized\n      window.dispatchEvent(new Event(\"resize\"));\n      // forcibly update styles via css variables\n      updateStyles();\n    });\n  },\n\n  /**\n   * Wipe slotted content\n   */\n  wipeSlot: function(element, slot = \"*\") {\n    // 100% clean slate\n    if (slot === \"*\") {\n      while (dom(element).firstChild !== null) {\n        dom(element).removeChild(dom(element).firstChild);\n      }\n    } else {\n      for (var i in dom(element).childNodes) {\n        // test for element nodes to be safe\n        if (\n          typeof dom(element).childNodes[i] !== typeof undefined &&\n          dom(element).childNodes[i].slot === slot\n        ) {\n          dom(element).removeChild(dom(element).childNodes[i]);\n        }\n      }\n    }\n  },\n\n  /**\n   * active item content changed.\n   */\n  _activeItemContentChanged: function(newValue, oldValue) {\n    if (typeof newValue !== typeof undefined) {\n      this.wipeSlot(this, \"*\");\n      if (newValue !== null) {\n        let frag = document.createRange().createContextualFragment(newValue);\n        dom(this).appendChild(frag);\n      }\n    }\n  },\n\n  /**\n   * disablePrevPage\n   */\n  disablePrevPage: function(index) {\n    if (index === 0) {\n      return true;\n    }\n    return false;\n  },\n\n  /**\n   * disableNextPage\n   */\n  disableNextPage: function(index) {\n    if (index === this.manifest.items.length - 1) {\n      return true;\n    }\n    return false;\n  },\n\n  /**\n   * Go back a page (if we can)\n   */\n  prevPage: function(e) {\n    this.changePage(\"previous\");\n  },\n\n  /**\n   * Advance a page\n   */\n  nextPage: function(e) {\n    this.changePage(\"next\");\n  },\n\n  /**\n   * Go forward a page\n   */\n  changePage: function(direction) {\n    if (\n      direction == \"next\" &&\n      this.__activeIndex < this.manifest.items.length - 1\n    ) {\n      window.history.pushState(\n        {},\n        null,\n        this._routerManifest.items[this.__activeIndex + 1].location\n      );\n      window.dispatchEvent(new PopStateEvent(\"popstate\"));\n    } else if (direction == \"previous\" && this.__activeIndex > 0) {\n      window.history.pushState(\n        {},\n        null,\n        this._routerManifest.items[this.__activeIndex - 1].location\n      );\n      window.dispatchEvent(new PopStateEvent(\"popstate\"));\n    }\n  },\n\n  /**\n   * Selected page has changed.\n   */\n  _selectedPageChanged: function(newValue, oldValue) {\n    if (typeof newValue !== typeof undefined) {\n      if (typeof this.manifest !== typeof undefined) {\n        const item = this.manifest.items\n          .filter((d, i) => {\n            if (newValue === d.id) {\n              this.__activeIndex = i;\n              return d;\n            }\n          })\n          .pop();\n        this.set(\"activeItem\", item);\n        window.scrollTo({\n          top: 0,\n          left: 0,\n          behavior: \"smooth\"\n        });\n      }\n    }\n  },\n\n  /**\n   * Determine whether we should show the title\n   */\n  __hasTitle: function(outlineTitle) {\n    return outlineTitle ? true : false;\n  }\n});\nexport { OutlinePlayer };\n"],"names":["_template","html","is","behaviors","MaterializeCSSBehaviors","ColorBehaviors","properties","icon","type","String","value","disabled","Boolean","reflectToAttribute","sticky","__isNavSticky","observer","__originalPosition","Number","attached","this","__getElementOffset","container","$","window","addEventListener","e","_this","__calculateIsNavSticky","style","position","top","pageYOffset","left","resetPosition","__isNavStickyChanged","isNavSticky","element","de","document","documentElement","box","getBoundingClientRect","clientTop","pageXOffset","clientLeft","OutlinePlayer","Polymer","HAXCMSBehaviors","Theme","manifest","Object","auto","notify","outlineFile","outlineLocation","selected","closed","_activeItemContent","outline","Array","activeItem","fillRemaining","_routerManifest","_location","editMode","_editModeChanged","newValue","_typeof","async","run","dispatchEvent","Event","updateStyles","ready","setupHAXTheme","contentcontainer","autorun","toJS","routerStore","location","id","_locationChanged","route","name","firstItem","items","find","i","setTimeout","_this2","CustomEvent","detail","_toggleMenu","drawer","toggle","opened","wipeSlot","slot","dom","firstChild","removeChild","childNodes","_activeItemContentChanged","oldValue","frag","createRange","createContextualFragment","appendChild","disablePrevPage","index","disableNextPage","length","prevPage","changePage","nextPage","direction","__activeIndex","history","pushState","PopStateEvent","_selectedPageChanged","item","filter","d","_this3","pop","set","scrollTo","behavior","__hasTitle","outlineTitle"],"mappings":"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"}