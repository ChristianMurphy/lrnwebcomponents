!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@polymer/polymer/polymer-legacy.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js"),require("@polymer/polymer/lib/utils/async.js"),require("@polymer/polymer/lib/mixins/element-mixin.js"),require("@polymer/app-layout/app-header/app-header.js"),require("@polymer/app-layout/app-toolbar/app-toolbar.js"),require("@polymer/app-layout/app-drawer/app-drawer.js"),require("@polymer/app-layout/app-drawer-layout/app-drawer-layout.js"),require("@polymer/app-layout/app-header-layout/app-header-layout.js"),require("@lrnwebcomponents/simple-colors/simple-colors.js"),require("@lrnwebcomponents/haxcms-elements/lib/haxcms-theme-behavior.js"),require("@lrnwebcomponents/hax-body/lib/hax-shared-styles.js"),require("@lrnwebcomponents/map-menu/map-menu.js"),require("@lrnwebcomponents/haxcms-elements/lib/haxcms-site-router.js"),require("mobx"),require("@lrnwebcomponents/materializecss-styles/materializecss-styles.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-legacy.js","@polymer/polymer/lib/legacy/polymer.dom.js","@polymer/polymer/lib/utils/async.js","@polymer/polymer/lib/mixins/element-mixin.js","@polymer/app-layout/app-header/app-header.js","@polymer/app-layout/app-toolbar/app-toolbar.js","@polymer/app-layout/app-drawer/app-drawer.js","@polymer/app-layout/app-drawer-layout/app-drawer-layout.js","@polymer/app-layout/app-header-layout/app-header-layout.js","@lrnwebcomponents/simple-colors/simple-colors.js","@lrnwebcomponents/haxcms-elements/lib/haxcms-theme-behavior.js","@lrnwebcomponents/hax-body/lib/hax-shared-styles.js","@lrnwebcomponents/map-menu/map-menu.js","@lrnwebcomponents/haxcms-elements/lib/haxcms-site-router.js","mobx","@lrnwebcomponents/materializecss-styles/materializecss-styles.js"],n):n((e=e||self).OutlinePlayer={},e.polymerLegacy_js,e.polymer_dom_js,e.async,e.elementMixin_js,null,null,null,null,null,null,null,null,null,e.haxcmsSiteRouter_js,e.mobx)}(this,function(e,n,t,o,i,a,r,l,s,p,d,c,u,m,h,y){"use strict";function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function v(){var e=b(['\n    <style include="materializecss-styles">\n      :host {\n        display: block;\n        position: relative;\n        font-family: libre baskerville;\n        width: 48px;\n        --app-drawer-width: 300px;\n        --outline-player-dark: #222222;\n        --outline-player-light: #f8f8f8;\n      }\n\n      paper-icon-button {\n        --paper-icon-button-ink-color: var(--outline-player-dark);\n      }\n    </style>\n\n    <div id="container">\n      <paper-icon-button\n        id="button"\n        disabled="[[disabled]]"\n        icon="[[icon]]"\n      ></paper-icon-button>\n      <paper-tooltip for="button" position="bottom" offset="14">\n        <slot></slot>\n      </paper-tooltip>\n    </div>\n  ']);return v=function(){return e},e}function w(){var e=b(['\n    <style include="simple-colors hax-shared-styles">\n      :host {\n        display: block;\n        font-family: libre baskerville;\n        position: relative;\n        overflow: hidden;\n        --outline-player-min-height: 100vh;\n        --app-drawer-width: 300px;\n        --outline-player-dark: #222222;\n        --outline-player-light: #f8f8f8;\n        --outline-player-arrow-margin-top: 50px;\n      }\n\n      :host([closed]) {\n        --app-drawer-width: 0px;\n      }\n\n      h1 {\n        font-size: 48px;\n        line-height: 16px;\n      }\n\n      h2 {\n        font-size: 32px;\n      }\n\n      h3 {\n        font-size: 28px;\n      }\n\n      p {\n        line-height: 26px;\n        min-height: 26px;\n      }\n\n      a,\n      a:visited,\n      a:active {\n        color: #000;\n      }\n\n      a:hover {\n        color: #2196f3;\n      }\n\n      ul li {\n        padding-bottom: 24px;\n        line-height: 1.5;\n        color: #424242;\n        max-width: 448px;\n      }\n\n      ul li:last-child {\n        padding-bottom: 16px;\n      }\n\n      app-drawer-layout {\n        min-height: 100vh;\n        min-height: -moz-available; /* WebKit-based browsers will ignore this. */\n        min-height: -webkit-fill-available; /* Mozilla-based browsers will ignore this. */\n        min-height: fill-available;\n        /* if the user has set a specific value then override the defaults */\n        min-height: var(--outline-player-min-height);\n      }\n\n      .outline-title {\n        font-size: 24px;\n        font-weight: normal;\n        line-height: 32px;\n        vertical-align: middle;\n        padding: 16px;\n        height: 32px;\n        margin: 0;\n        text-align: center;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        word-break: break-word;\n        border-bottom: 1px solid #eeeeee;\n        position: sticky;\n      }\n\n      #menu {\n        padding: 8px;\n      }\n\n      outline-player-navigation {\n        --outline-player-dark: var(--outline-player-dark);\n      }\n\n      div[main-title] {\n        margin-left: 16px;\n        font-size: 20px;\n        line-height: 20px;\n        overflow-wrap: break-word;\n        text-overflow: ellipsis;\n        display: inline-block;\n        word-break: break-word;\n      }\n\n      paper-progress {\n        display: block;\n        width: 100%;\n        --paper-progress-active-color: rgba(255, 255, 255, 0.5);\n        --paper-progress-container-color: transparent;\n      }\n\n      app-header {\n        color: var(--outline-player-dark);\n        /* Enable outline to be placed anywhere in the dom */\n        /* This will override the app-header-layout forcing fixed mode */\n        /*position: absolute !important;\n        left: 0 !important;*/\n        --app-header-background-rear-layer: {\n          /* app-header-layout will force fixed */\n          background-color: var(--outline-player-light);\n        }\n      }\n\n      app-toolbar {\n        border-bottom: none;\n        background-color: #ffffff;\n        box-shadow: 0 0 6px -3px var(--outline-player-dark);\n      }\n      app-drawer {\n        box-shadow: 0 0 6px -3px var(--outline-player-dark);\n        overflow: hidden;\n        --app-drawer-scrim-background: rgba(80, 80, 80, 0.8);\n        --app-drawer-content-container: {\n          overflow: hidden;\n          background-color: var(--outline-player-light);\n        }\n      }\n      app-drawer-layout[narrow] app-toolbar {\n        position: fixed !important;\n        left: 0;\n        right: 0;\n      }\n      app-drawer-layout[narrow] #contentcontainer {\n        padding-top: 64px;\n      }\n      #content {\n        justify-content: center;\n        padding: 0 8px 8px 8px;\n      }\n\n      #content > * {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      }\n\n      /* Required for HAX */\n      :host([edit-mode]) #slot {\n        display: none !important;\n      }\n      #contentcontainer {\n        max-width: 840px;\n        margin: 0 auto;\n        padding: 0 16px 16px 16px;\n        flex: 1 1 auto;\n        order: 1;\n        display: flex;\n      }\n      #contentcontainer > * {\n        flex: 1 1 auto;\n        display: flex;\n        flex-direction: column;\n        width: 100%;\n      }\n      #contentcontainer h-a-x {\n        margin: 0;\n      }\n      map-menu {\n        height: calc(100vh - 80px);\n        --map-menu-container: {\n          padding: 0;\n        }\n      }\n      map-menu::-webkit-scrollbar-track {\n        -webkit-box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.3);\n        border-radius: 0;\n        background-color: #fafafa;\n      }\n      map-menu::-webkit-scrollbar {\n        width: 4px;\n        background-color: #fafafa;\n      }\n      map-menu::-webkit-scrollbar-thumb {\n        border-radius: 2px;\n        -webkit-box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.3);\n        background-color: #444444;\n      }\n    </style>\n    \x3c!-- Control the sites query paremeters --\x3e\n\n    \x3c!-- Begin Layout --\x3e\n    <app-drawer-layout>\n      <app-drawer id="drawer" swipe-open="" slot="drawer">\n        <template is="dom-if" if="[[__hasTitle(manifest.title)]]">\n          <h2 class="outline-title">[[manifest.title]]</h2>\n        </template>\n        <map-menu\n          id="menu"\n          selected="[[selected]]"\n          manifest="[[_routerManifest]]"\n          active-indicator\n          auto-scroll\n        ></map-menu>\n      </app-drawer>\n      <app-header-layout>\n        <app-header slot="header" reveals>\n          <app-toolbar>\n            <paper-icon-button\n              icon="menu"\n              on-click="_toggleMenu"\n            ></paper-icon-button>\n            <div main-title>\n              [[activeItem.title]]\n              <div id="slotTitle"><slot name="title"></slot></div>\n            </div>\n            <outline-player-arrow\n              id="prevpage"\n              disabled="[[disablePrevPage(__activeIndex)]]"\n              icon="icons:arrow-back"\n              on-click="prevPage"\n              >Previous\n            </outline-player-arrow>\n            <outline-player-arrow\n              id="nextpage"\n              disabled="[[disableNextPage(__activeIndex)]]"\n              icon="icons:arrow-forward"\n              on-click="nextPage"\n              >Next\n            </outline-player-arrow>\n          </app-toolbar>\n        </app-header>\n        <div id="content">\n          <div id="contentcontainer">\n            <div id="slot"><slot></slot></div>\n          </div>\n        </div>\n      </app-header-layout>\n    </app-drawer-layout>\n  ']);return w=function(){return e},e}n.Polymer({_template:n.html(v()),is:"outline-player-arrow",behaviors:[MaterializeCSSBehaviors.ColorBehaviors],properties:{icon:{type:String,value:"icons:arrow-back"},disabled:{type:Boolean,value:!0,reflectToAttribute:!0},sticky:{type:Boolean,value:!1,reflectToAttribute:!0},__isNavSticky:{type:Boolean,value:!1,observer:"__isNavStickyChanged"},__originalPosition:{type:Number,value:0}},attached:function(){var e=this;this.__originalPosition=this.__getElementOffset(this);var n=this.$.container;window.addEventListener("scroll",function(t){e.sticky&&(e.__calculateIsNavSticky(),e.__isNavSticky&&(n.style.position="absolute",n.style.top=window.pageYOffset-e.__originalPosition.top+"px",n.style.left=e.__originalPosition.left))})},resetPosition:function(){this.$.container.style.top=0},__isNavStickyChanged:function(e){},__calculateIsNavSticky:function(){var e=window.pageYOffset;this.__originalPosition.top<e?this.__isNavSticky||(this.__isNavSticky=!0):this.__isNavSticky&&(this.__isNavSticky=!1)},__getElementOffset:function(e){var n=document.documentElement,t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-n.clientTop,left:t.left+window.pageXOffset-n.clientLeft}}});var g=n.Polymer({_template:n.html(w()),is:"outline-player",behaviors:[HAXCMSBehaviors.Theme],properties:{manifest:{type:Object},auto:{type:Boolean,notify:!0,value:!1},outlineFile:{type:String,value:"outline.json",notify:!0},outlineLocation:{type:String,notify:!0},selected:{type:String,notify:!0,observer:"_selectedPageChanged"},closed:{type:Boolean,notify:!0,reflectToAttribute:!0,value:!1},_activeItemContent:{type:String,observer:"_activeItemContentChanged"},outline:{type:Array,notify:!0,observer:"_outlineChanged"},activeItem:{type:Object,notify:!0},fillRemaining:{type:Boolean,value:!1,reflectToAttribute:!0},_routerManifest:{type:Object,value:{}},_location:{type:Object,observer:"_locationChanged"},editMode:{type:Boolean,reflectToAttribute:!0,observer:"_editModeChanged"}},_editModeChanged:function(e){"undefined"!==f(e)&&o.microTask.run(function(){window.dispatchEvent(new Event("resize")),i.updateStyles()})},ready:function(){var e=this;this.setupHAXTheme(!0,this.$.contentcontainer),y.autorun(function(){e._routerManifest=y.toJS(h.store.manifest)}),y.autorun(function(){e._location=h.store.location}),y.autorun(function(){h.store.activeItem&&void 0!==h.store.activeItem&&(e.selected=h.store.activeItem.id)})},attached:function(){},_locationChanged:function(e){var n=this;if(e&&void 0!==e.route){var t=e.route.name;if("home"===t||"404"===t){var o=this.manifest.items.find(function(e){return void 0!==e.id});o&&(setTimeout(function(){n.selected=o.id},500),window.dispatchEvent(new CustomEvent("json-outline-schema-active-item-changed",{detail:o})))}}},_toggleMenu:function(e){this.$.drawer.toggle(),this.closed=!this.$.drawer.opened,o.microTask.run(function(){window.dispatchEvent(new Event("resize")),i.updateStyles()})},wipeSlot:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";if("*"===n)for(;null!==t.dom(e).firstChild;)t.dom(e).removeChild(t.dom(e).firstChild);else for(var o in t.dom(e).childNodes)"undefined"!==f(t.dom(e).childNodes[o])&&t.dom(e).childNodes[o].slot===n&&t.dom(e).removeChild(t.dom(e).childNodes[o])},_activeItemContentChanged:function(e,n){if("undefined"!==f(e)&&(this.wipeSlot(this,"*"),null!==e)){var o=document.createRange().createContextualFragment(e);t.dom(this).appendChild(o)}},disablePrevPage:function(e){return 0===e},disableNextPage:function(e){return e===this.manifest.items.length-1},prevPage:function(e){this.changePage("previous")},nextPage:function(e){this.changePage("next")},changePage:function(e){"next"==e&&this.__activeIndex<this.manifest.items.length-1?(window.history.pushState({},null,this._routerManifest.items[this.__activeIndex+1].location),window.dispatchEvent(new PopStateEvent("popstate"))):"previous"==e&&this.__activeIndex>0&&(window.history.pushState({},null,this._routerManifest.items[this.__activeIndex-1].location),window.dispatchEvent(new PopStateEvent("popstate")))},_selectedPageChanged:function(e,n){var t=this;if("undefined"!==f(e)&&"undefined"!==f(this.manifest)){var o=this.manifest.items.filter(function(n,o){if(e===n.id)return t.__activeIndex=o,n}).pop();this.set("activeItem",o),window.scrollTo({top:0,left:0,behavior:"smooth"})}},__hasTitle:function(e){return!!e}});e.OutlinePlayer=g,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=outline-player.umd.js.map
