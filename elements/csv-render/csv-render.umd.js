!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@lrnwebcomponents/simple-tooltip/simple-tooltip.js"),require("@polymer/paper-button/paper-button.js"),require("@polymer/iron-icon/iron-icon.js"),require("@polymer/iron-icons/iron-icons.js"),require("@polymer/iron-ajax/iron-ajax.js"),require("@lrnwebcomponents/hexagon-loader/hexagon-loader.js"),require("lit-element/lit-element.js"),require("@lrnwebcomponents/simple-colors/simple-colors.js")):"function"==typeof define&&define.amd?define(["exports","@lrnwebcomponents/simple-tooltip/simple-tooltip.js","@polymer/paper-button/paper-button.js","@polymer/iron-icon/iron-icon.js","@polymer/iron-icons/iron-icons.js","@polymer/iron-ajax/iron-ajax.js","@lrnwebcomponents/hexagon-loader/hexagon-loader.js","lit-element/lit-element.js","@lrnwebcomponents/simple-colors/simple-colors.js"],t):t((n=n||self).CsvRender={},null,null,null,null,null,null,n.litElement_js,n.simpleColors_js)}(this,function(n,t,e,o,r,i,a,l,c){"use strict";function s(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function u(n,t,e){return t&&s(n.prototype,t),e&&s(n,e),n}function p(n){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function d(n,t){return(d=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function f(n,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):t}function b(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(n){return!1}}();return function(){var e,o=p(n);if(t){var r=p(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return f(this,e)}}function h(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function m(){var n=h([" <td>","</td> "]);return m=function(){return n},n}function y(){var n=h(["\n              <tr>\n                ","\n              </tr>\n            "]);return y=function(){return n},n}function g(){var n=h([' <th scope="col">',"</th> "]);return g=function(){return n},n}function v(){var n=h(["\n              <caption>\n                ","\n              </caption>\n            "]);return v=function(){return n},n}function x(){var n=h(['\n      <iron-ajax\n        auto\n        url="','"\n        handle-as="text"\n        debounce-duration="500"\n        @last-response-changed="','"\n        @response="','"\n      ></iron-ajax>\n      <hexagon-loader\n        id="loading"\n        accent-color="','"\n        loading\n        item-count="4"\n        size="small"\n      ></hexagon-loader>\n      <a href="','" id="download" tabindex="-1">\n        <paper-button\n          ><iron-icon icon="file-download"></iron-icon\n        ></paper-button>\n      </a>\n      <simple-tooltip for="download" animation-delay="200" offset="14"\n        >Download table data</simple-tooltip\n      >\n      <table class="table" summary="','">\n        ',"\n        <thead>\n          <tr>\n            ","\n          </tr>\n        </thead>\n        <tbody>\n          ","\n        </tbody>\n      </table>\n    "]);return x=function(){return n},n}function w(){var n=h(['\n        :host {\n          display: block;\n        }\n        .table {\n          width: 100%;\n          border: 1px solid var(--simple-colors-default-theme-accent-6);\n          border-collapse: collapse;\n          white-space: nowrap;\n          font-size: 16px;\n          background-color: var(--simple-colors-default-theme-grey-1);\n        }\n        .table thead {\n          padding-bottom: 0.16px;\n          position: sticky;\n        }\n        .table caption {\n          background-color: var(--simple-colors-default-theme-accent-1);\n          font-weight: bold;\n          padding: 8px;\n          border: 1px solid var(--simple-colors-default-theme-accent-6);\n          border-bottom: none;\n        }\n        :host(:not([accent-color])) .table caption,\n        :host([accent-color="grey"]) .table caption {\n          background-color: var(--simple-colors-default-theme-accent-2);\n        }\n        .table tbody tr {\n          position: relative;\n          height: 48px;\n          -webkit-transition-duration: 0.28s;\n          transition-duration: 0.28s;\n          -webkit-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n          transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n          -webkit-transition-property: background-color;\n          transition-property: background-color;\n        }\n        .table tbody tr:hover {\n          background-color: var(--simple-colors-default-theme-accent-1);\n        }\n        :host(:not([accent-color])) .table tbody tr:hover,\n        :host([accent-color="grey"]) .table tbody tr:hover {\n          background-color: var(--simple-colors-default-theme-accent-2);\n        }\n        .table td,\n        .table thead th,\n        .table th {\n          padding: 0 1.125em;\n          text-align: left;\n        }\n        .table td {\n          border-top: 1px solid var(--simple-colors-default-theme-accent-6);\n          border-bottom: 1px solid var(--simple-colors-default-theme-accent-6);\n        }\n        .table th {\n          position: relative;\n          vertical-align: bottom;\n          text-overflow: ellipsis;\n          font-size: 16px;\n          font-weight: bold;\n          line-height: 24px;\n          letter-spacing: 0;\n          color: rgba(0, 0, 0, 0.54);\n          height: 48px;\n          padding-bottom: 8px;\n          box-sizing: border-box;\n        }\n        #loading {\n          position: absolute;\n          left: calc(50% - 70px);\n        }\n        #download paper-button {\n          color: var(--simple-colors-default-theme-accent-6);\n          border-radius: 36px;\n          width: 36px;\n          height: 36px;\n          min-width: unset;\n          padding: 0;\n          margin: 0;\n          display: inline-flex;\n        }\n        iron-icon {\n          display: inline-flex;\n          margin: 0;\n          padding: 0;\n        }\n        #download paper-button:hover,\n        #download paper-button:focus,\n        #download paper-button:active {\n          color: var(--simple-colors-default-theme-accent-8);\n          outline: 2px solid var(--simple-colors-default-theme-accent-6);\n        }\n      ']);return w=function(){return n},n}var j=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&d(n,t)}(e,c.SimpleColors);var t=b(e);function e(){var n;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(n=t.call(this)).table=[],n.tableHeadings=[],n.tableData="",n}return u(e,null,[{key:"styles",get:function(){return[l.css(w())]}}]),u(e,[{key:"updated",value:function(n){var t=this;n.forEach(function(n,e){"color"==e&&t._getAccentColor(t[e],n)})}},{key:"render",value:function(){return l.html(x(),this.dataSource,this.tableDataChanged,this.handleResponse,this.accentColor,this.dataSource,this.summary,this.caption?l.html(v(),this.caption):"",this.tableHeadings.map(function(n){return l.html(g(),n)}),this.table.map(function(n){return l.html(y(),n.map(function(n){return l.html(m(),n)}))}))}},{key:"tableDataChanged",value:function(n){this.tableData=n.detail.value}},{key:"handleResponse",value:function(n){this.table=this.CSVtoArray(this.tableData),this.tableHeadings=this.table.shift(),this.shadowRoot.querySelector("#loading").loading=!1}},{key:"CSVtoArray",value:function(n){var t,e="",o=[""],r=[o],i=0,a=0,l=!0;for(t in n)'"'===(t=n[t])?(l&&t===e&&(o[i]+=t),l=!l):","===t&&l?t=o[++i]="":"\n"===t&&l?("\r"===e&&(o[i]=o[i].slice(0,-1)),o=r[++a]=[t=""],i=0):o[i]+=t,e=t;return r}},{key:"_getAccentColor",value:function(n){n=n.replace("-text",""),this.accentColor&&"grey"!==this.accentColor||!this.colors[n]||(this.accentColor=n)}}],[{key:"tag",get:function(){return"csv-render"}},{key:"properties",get:function(){return{dataSource:{type:String,attribute:"data-source"},caption:{type:String},summary:{type:String},table:{type:Array},tableHeadings:{type:Array},tableData:{type:String,attribute:"table-data"},color:{type:String}}}}]),e}();window.customElements.define(j.tag,j),n.CsvRender=j,Object.defineProperty(n,"__esModule",{value:!0})});
