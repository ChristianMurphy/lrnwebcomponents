!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@polymer/polymer/polymer-element.js"),require("@polymer/polymer/lib/utils/render-status.js"),require("@lrnwebcomponents/simple-colors/lib/simple-colors-polymer.js"),require("@polymer/polymer/lib/elements/dom-if.js"),require("@polymer/polymer/lib/elements/dom-repeat.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-element.js","@polymer/polymer/lib/utils/render-status.js","@lrnwebcomponents/simple-colors/lib/simple-colors-polymer.js","@polymer/polymer/lib/elements/dom-if.js","@polymer/polymer/lib/elements/dom-repeat.js"],t):t((e=e||self).CsvRender={},e.polymerElement_js,e.renderStatus_js,e.simpleColorsPolymer_js)}(this,function(e,t,n,o){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function s(){var e,t,n=(e=['\n      <style include="simple-colors-shared-styles-polymer">\n        :host {\n          display: block;\n        }\n        .table {\n          width: 100%;\n          border: 1px solid var(--simple-colors-default-theme-accent-6);\n          border-collapse: collapse;\n          white-space: nowrap;\n          font-size: 16px;\n          background-color: var(--simple-colors-default-theme-grey-1);\n        }\n        .table thead {\n          padding-bottom: 0.16px;\n          position: sticky;\n        }\n        .table caption {\n          background-color: var(--simple-colors-default-theme-accent-1);\n          font-weight: bold;\n          padding: 8px;\n          border: 1px solid var(--simple-colors-default-theme-accent-6);\n          border-bottom: none;\n        }\n        :host(:not([accent-color])) .table caption,\n        :host([accent-color="grey"]) .table caption {\n          background-color: var(--simple-colors-default-theme-accent-2);\n        }\n        .table tbody tr {\n          position: relative;\n          height: 48px;\n          -webkit-transition-duration: 0.28s;\n          transition-duration: 0.28s;\n          -webkit-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n          transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n          -webkit-transition-property: background-color;\n          transition-property: background-color;\n        }\n        .table tbody tr:hover {\n          background-color: var(--simple-colors-default-theme-accent-1);\n        }\n        :host(:not([accent-color])) .table tbody tr:hover,\n        :host([accent-color="grey"]) .table tbody tr:hover {\n          background-color: var(--simple-colors-default-theme-accent-2);\n        }\n        .table td,\n        .table thead th,\n        .table th {\n          padding: 0 1.125em;\n          text-align: left;\n        }\n        .table td {\n          border-top: 1px solid var(--simple-colors-default-theme-accent-6);\n          border-bottom: 1px solid var(--simple-colors-default-theme-accent-6);\n        }\n        .table th {\n          position: relative;\n          vertical-align: bottom;\n          text-overflow: ellipsis;\n          font-size: 16px;\n          font-weight: bold;\n          line-height: 24px;\n          letter-spacing: 0;\n          color: rgba(0, 0, 0, 0.54);\n          height: 48px;\n          padding-bottom: 8px;\n          box-sizing: border-box;\n        }\n        #loading {\n          position: absolute;\n        }\n        #download paper-button {\n          color: var(--simple-colors-default-theme-accent-6);\n          border-radius: 36px;\n          width: 36px;\n          height: 36px;\n          min-width: unset;\n          padding: 0;\n          margin: 0;\n          display: inline-flex;\n        }\n        iron-icon {\n          display: inline-flex;\n          margin: 0;\n          padding: 0;\n        }\n        #download paper-button:hover,\n        #download paper-button:focus,\n        #download paper-button:active {\n          color: var(--simple-colors-default-theme-accent-8);\n          outline: 2px solid var(--simple-colors-default-theme-accent-6);\n        }\n      </style>\n      <iron-ajax\n        auto\n        url="[[dataSource]]"\n        handle-as="text"\n        debounce-duration="500"\n        last-response="{{tableData}}"\n        on-response="handleResponse"\n      ></iron-ajax>\n      <hexagon-loader\n        id="loading"\n        accent-color="[[accentColor]]"\n        loading\n        item-count="4"\n        size="small"\n      ></hexagon-loader>\n      <a href="[[dataSource]]" id="download" tabindex="-1">\n        <paper-button\n          ><iron-icon icon="file-download"></iron-icon\n        ></paper-button>\n      </a>\n      <paper-tooltip for="download" animation-delay="200" offset="14"\n        >Download table data</paper-tooltip\n      >\n      <table class="table" summary="[[summary]]">\n        <template is="dom-if" if="[[caption]]">\n          <caption>\n            [[caption]]\n          </caption>\n        </template>\n        <thead>\n          <tr>\n            <template is="dom-repeat" items="[[tableHeadings]]" as="heading">\n              <th scope="col">[[heading]]</th>\n            </template>\n          </tr>\n        </thead>\n        <tbody>\n          <template is="dom-repeat" items="[[table]]" as="row">\n            <tr>\n              <template is="dom-repeat" items="[[row]]" as="col">\n                <td>[[col]]</td>\n              </template>\n            </tr>\n          </template>\n        </tbody>\n      </table>\n    '],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return s=function(){return n},n}var p=function(e){function p(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),e=i(this,l(p).call(this)),import("@lrnwebcomponents/hexagon-loader/hexagon-loader.js"),import("@polymer/iron-ajax/iron-ajax.js"),import("@polymer/iron-icons/iron-icons.js"),import("@polymer/iron-icon/iron-icon.js"),e}var d,u,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(p,o.SimpleColorsPolymer),d=p,m=[{key:"template",get:function(){return t.html(s())}},{key:"tag",get:function(){return"csv-render"}},{key:"properties",get:function(){return{dataSource:{type:String},caption:{type:String},summary:{type:String},table:{type:Array,value:[]},tableHeadings:{type:Array,value:[]},tableData:{type:String,value:""},color:{type:String,observer:"_getAccentColor"}}}}],(u=[{key:"connectedCallback",value:function(){c(l(p.prototype),"connectedCallback",this).call(this),n.afterNextRender(this,function(){import("@polymer/paper-button/paper-button.js"),import("@polymer/paper-tooltip/paper-tooltip.js")})}},{key:"handleResponse",value:function(e){this.table=this.CSVtoArray(this.tableData),this.tableHeadings=this.table.shift(),this.shadowRoot.querySelector("#loading").loading=!1}},{key:"CSVtoArray",value:function(e){var t,n="",o=[""],r=[o],l=0,a=0,i=!0;for(t in e)'"'===(t=e[t])?(i&&t===n&&(o[l]+=t),i=!i):","===t&&i?t=o[++l]="":"\n"===t&&i?("\r"===n&&(o[l]=o[l].slice(0,-1)),o=r[++a]=[t=""],l=0):o[l]+=t,n=t;return r}},{key:"_getAccentColor",value:function(e){e=e.replace("-text",""),this.accentColor&&"grey"!==this.accentColor||!this.colors[e]||(this.accentColor=e)}}])&&r(d.prototype,u),m&&r(d,m),p}();window.customElements.define(p.tag,p),e.CsvRender=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=csv-render.umd.js.map
