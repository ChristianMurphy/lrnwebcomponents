!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@polymer/polymer/polymer-element.js"),require("@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js"),require("@lrnwebcomponents/responsive-utility/responsive-utility.js"),require("@polymer/iron-icons/iron-icons.js"),require("@polymer/iron-icons/editor-icons.js"),require("@polymer/iron-icons/image-icons.js"),require("@lrnwebcomponents/md-extra-icons/md-extra-icons.js"),require("@polymer/paper-button/paper-button.js"),require("@polymer/paper-tooltip/paper-tooltip.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-element.js","@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js","@lrnwebcomponents/responsive-utility/responsive-utility.js","@polymer/iron-icons/iron-icons.js","@polymer/iron-icons/editor-icons.js","@polymer/iron-icons/image-icons.js","@lrnwebcomponents/md-extra-icons/md-extra-icons.js","@polymer/paper-button/paper-button.js","@polymer/paper-tooltip/paper-tooltip.js"],t):t((e=e||self).RichTextEditor={},e.polymerElement_js)}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function d(){var e=u(['\n      <style>\n        :host {\n          display: flex;\n          flex: 0 0 auto;\n          align-items: stretch;\n          margin: 3px;\n        }\n        :host([hidden]) {\n          display: none;\n        }\n        :host #button {\n          text-transform: unset;\n          color: var(--rich-text-editor-button-color, #444);\n          border-color: var(--rich-text-editor-button-border, transparent);\n          padding: 0;\n          transition: all 0.5s;\n          min-width: 24px;\n          height: 24px;\n          @apply --rich-text-editor-button;\n        }\n        :host([disabled]) #button {\n          cursor: not-allowed;\n          color: var(--rich-text-editor-button-disabled-color, #666);\n          background-color: var(--rich-text-editor-button-disabled-bg, transparent);\n          @apply --rich-text-editor-button-disabled;\n        }\n        :host([toggled]) #button {\n          color: var(--rich-text-editor-button-toggled-color, #222);\n          background-color: var(--rich-text-editor-button-toggled-bg, #e0e0e0);\n          @apply --rich-text-editor-button-toggled;\n        }\n        :host #button:focus,\n        :host #button:hover {\n          color: var(--rich-text-editor-button-hover-color, #000);\n          background-color: var(--rich-text-editor-button-hover-bg, #f0f0f0);\n        }\n        :host #icon:not([icon]) {\n          display:none;\n        }\n        :host #label.offscreen {\n          position: absolute;\n          left: -999999px;\n          top: 0;\n          height: 0;\n          width: 0;\n          overflow: hidden;\n        }\n      </style>\n      <iron-a11y-keys\n        id="a11y"\n        target="[[__a11y]]"\n        keys="enter"\n        on-keys-pressed="_buttonTap">\n      </iron-a11y-keys>\n      <paper-button id="button"\n        disabled$="[[disabled]]" \n        controls="[[controls]]"\n        on-tap="_buttonTap"\n        tabindex="0"\n        toggled$="[[toggled]]">\n        <iron-icon id="icon" \n          aria-hidden\n          icon$="[[icon]]">\n        </iron-icon>\n        <span id="label" class$="[[labelStyle]]">[[label]]</span>\n      </paper-button>\n      <paper-tooltip id="tooltip" \n        for="button">\n        [[label]]\n      </paper-button>\n    ']);return d=function(){return e},e}var p=function(e){function o(){return n(this,o),s(this,l(o).apply(this,arguments))}return r(o,t.PolymerElement),i(o,[{key:"connectedCallback",value:function(){c(l(o.prototype),"connectedCallback",this).call(this),this.__a11y=this.$.button}},{key:"_buttonTap",value:function(e){this.dispatchEvent(new CustomEvent("rich-text-button-tap",{detail:this}))}},{key:"_labelStyle",value:function(e,t){return null!=e&&""!==e&&!1===t?"offscreen":null}}],[{key:"template",get:function(){return t.html(d())}},{key:"properties",get:function(){return{disabled:{name:"disabled",type:"Boolean",value:!1},command:{name:"command",type:"String",value:null},event:{name:"event",type:"String",value:null},icon:{name:"icon",type:"String",value:null},label:{name:"label",type:"String",value:null},labelStyle:{name:"labelStyle",type:"String",computed:"_labelStyle(icon,showTextLabel)",readOnly:!0},showTextLabel:{name:"showTextLabel",type:"Boolean",value:!1},toggled:{name:"toggled",type:"Boolean",value:!1},toggles:{name:"toggles",type:"Boolean",value:!1}}}},{key:"tag",get:function(){return"rich-text-editor-button"}}]),o}();function m(){var e=u(["\n  <style>\n    :host {\n      --rich-text-editor-bg: #fafafa;\n      --rich-text-editor-border: 1px solid #ddd;\n    }\n  </style>\n"]);return m=function(){return e},e}window.customElements.define(p.tag,p);var b=document.createElement("dom-module"),g=t.html(m());function h(){var e=u(['\n<style>:host {\n  display: block;\n  width: 100%;\n  margin: 0;\n  padding: 0;\n  @apply --rich-text-editor;\n}\n:host([sticky]) {\n  position: sticky;\n  top: 0;\n}\n:host([hidden]) {\n  display: none;\n}\n:host #toolbar {\n  display: flex;\n  opacity: 1;\n  margin: 0;\n  align-items: stretch;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n  background-color: var(--rich-text-editor-bg);\n  border: var(--rich-text-editor-border);\n  font-size: 12px;\n  transition: all 0.5s;\n  @apply --rich-text-editor-toolbar;\n} \n:host #toolbar[aria-hidden]{\n  visibility: hidden;\n  opacity: 0;\n  height: 0;\n}\n:host #toolbar .group {\n  display: flex;\n  flex-wrap: nowrap;\n  justify-content: space-evenly;\n  align-items: stretch;\n  padding: 0 3px;\n  @apply --rich-text-editor-toolbar-group;\n}\n:host #toolbar .group:not(:last-of-type) {\n  margin-right: 3px;\n  border-right: var(--rich-text-editor-border);\n  @apply --rich-text-editor-toolbar-divider;\n}\n:host #toolbar .more-button {\n  flex: 1 0 auto;\n  justify-content: flex-end;\n}\n:host .more-button[display-max="xs"],\n:host(:not([responsive-size="xs"])) .more-button[display-max="sm"],\n:host(:not([responsive-size*="s"])) .more-button[display-max="md"],\n:host([responsive-size*="l"]) .more-button[display-max="lg"],\n:host([responsive-size="xl"]) .more-button[display-max="xl"],\n:host([responsive-size="xs"]) #toolbar[collapsed] .group:not([minimum-size="xs"]),\n:host([responsive-size="sm"]) #toolbar[collapsed] .group:not([minimum-size*="s"]),\n:host([responsive-size="md"]) #toolbar[collapsed] .group[minimum-size*="l"],\n:host([responsive-size="lg"]) #toolbar[collapsed] .group[minimum-size="xl"] {\n  display: none;\n}\n</style>\n<style include="rich-text-editor-styles"></style>\n<div id="toolbar" aria-hidden$="[[!controls]]" collapsed$="[[collapsed]]">\n  <template is="dom-repeat" items="[[buttons]]" as="size">\n    <template is="dom-repeat" items="[[size.groups]]" as="group">\n      <div class="group" minimum-size$="[[size.size]]">\n        <template is="dom-repeat" items="[[group.buttons]]" as="button">\n          <rich-text-editor-button\n            controls$="[[controls]]"\n            command$="[[button.command]]"\n            event$="[[button.event]]"\n            icon$="[[button.icon]]"\n            label$="[[button.label]]"\n            toggled$="[[_toggledButton(button,__trigger)]]"\n            on-rich-text-button-tap="_handleTextOperation">\n          </rich-text-editor-button> \n        </template>\n      </div>\n    </template>\n  </template>\n  <rich-text-editor-button\n    class="more-button"\n    display-max$="[[_getMax(buttons)]]"\n    controls="toolbar"\n    icon="more-vert"\n    label="Toggle More Buttons"\n    toggled$="[[!collapsed]]"\n    on-rich-text-button-tap="_toggleMore">\n  </rich-text-editor-button>  \n</div>']);return h=function(){return e},e}b.appendChild(g),b.register("rich-text-editor-styles");var y=function(e){function o(){return n(this,o),s(this,l(o).apply(this,arguments))}return r(o,t.PolymerElement),i(o,[{key:"connectedCallback",value:function(){c(l(o.prototype),"connectedCallback",this).call(this);var e=this;document.designMode="on",window.ResponsiveUtility.requestAvailability(),window.dispatchEvent(new CustomEvent("responsive-element",{detail:{element:e,attribute:"responsive-size",relativeToParent:!0}})),document.addEventListener("selectionchange",function(){e._updateToggleButtons()})}},{key:"disconnectedCallback",value:function(){c(l(o.prototype),"disconnectedCallback",this).call(this);var e=this;document.removeEventListener("selectionchange",function(){e._updateToggleButtons()})}},{key:"editTarget",value:function(e){var t=document.createElement("RichTextEditorButton");console.log(p.properties,t),void 0!==e.getAttribute("id")&&null!==e.getAttribute("id")||e.setAttribute("id",this._generateUUID()),this.editableElement!==e&&(null!==this.editableElement&&(this.editableElement.contentEditable=!1,this.editableElement=null),e.parentNode.insertBefore(this,e),this.editableElement=e,this.editableElement.contentEditable=!0,this._updateToggleButtons(),this.controls=e.getAttribute("id"))}},{key:"removeEditableRegion",value:function(e){for(var t=this,n=0;n<this.editableElements.length;n++){var o=this.editableElements[n];o[0]===e&&(o[0].removeEventListener("click",function(n){t.editTarget(e)}),o[1].disconnect(),this.set("editableElements",this.editableElements.splice(n,1)))}}},{key:"addEditableRegion",value:function(e){var t=this,n=new MutationObserver(function(){t._updateToggleButtons()});e.addEventListener("click",function(n){t.editTarget(e)}),n.observe(e,{attributes:!1,childList:!0,subtree:!0,characterData:!1}),t.push("editableElements",[e,n])}},{key:"_generateUUID",value:function(){return"ss-s-s-s-sss".replace(/s/g,this._uuidPart)}},{key:"_getButtons",value:function(e){var t=[];return["xs","sm","md","lg","xl"].forEach(function(n){void 0!==e[n]&&null!==e[n]&&t.push({size:n,groups:e[n]})}),t}},{key:"_getMax",value:function(e){return null!=e?e[e.length-1].size:null}},{key:"_getRange",value:function(){var e=window.getSelection();return e.getRangeAt&&e.rangeCount?e.getRangeAt(0):e||void 0}},{key:"_handleTextOperation",value:function(e){this.selection=this.editableElement.getSelection?this.editableElement.getSelection():this._getRange(),void 0!==e.detail.command&&null!==e.detail.command?document.execCommand(e.detail.command):this.dispatchEvent(new CustomEvent("rich-text-event",{detail:{button:e.detail,selection:this.selection}})),this._updateToggleButtons()}},{key:"_toggledButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;window.getSelection();return null!==e.command&&!0===e.toggles&&document.queryCommandState(e.command)}},{key:"_toggleMore",value:function(e){this.collapsed=!this.collapsed}},{key:"_updateToggleButtons",value:function(){this.__trigger=!1===this.__trigger}},{key:"_uuidPart",value:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}],[{key:"template",get:function(){return t.html(h())}},{key:"haxProperties",get:function(){return{canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Rich text-editor",description:"a standalone rich text editor",icon:"icons:android",color:"green",groups:["Text"],handles:[{type:"todo:read-the-docs-for-usage"}],meta:{author:"nikkimk",owner:"Penn State University"}},settings:{quick:[],configure:[{property:"title",description:"",inputMethod:"textfield",required:!1,icon:"icons:android"}],advanced:[]}}}},{key:"properties",get:function(){return{buttons:{name:"buttons",type:"Array",computed:"_getButtons(config)"},collapsed:{name:"collapsed",type:"Boolean",value:!0},config:{name:"config",type:"Object",value:{xs:[{group:"History",buttons:[{label:"Undo",icon:"icons:undo",event:"history-undo",command:"undo"},{label:"Redo",icon:"icons:redo",event:"history-redo",command:"redo"}]},{group:"Basic Inline Operations",buttons:[{label:"Bold",icon:"editor:format-bold",event:"text-bold",command:"bold",toggles:!0},{label:"Italics",icon:"editor:format-italic",event:"text-italic",command:"italic",toggles:!0},{label:"Erase Format",icon:"editor:format-clear",event:"text-remove-format",command:"removeFormat"}]},{group:"Links",buttons:[{label:"Link",icon:"link",command:"link",toggles:!0}]},{group:"Clipboard Operations",buttons:[{label:"Cut",icon:"icons:content-cut",event:"clipboard-cut",command:"cut"},{label:"Copy",icon:"icons:content-copy",event:"clipboard-copy",command:"copy"},{label:"Paste",icon:"icons:content-paste",event:"clipboard-paste",command:"paste"}]}],sm:[{group:"Subscript and Superscript",buttons:[{label:"Subscript",icon:"mdextra:subscript",event:"text-subscript",command:"subscript",toggles:!0},{label:"Superscript",icon:"mdextra:superscript",event:"text-superscript",command:"superscript",toggles:!0}]}],md:[{group:"Lists and Indents",buttons:[{label:"Ordered List",icon:"editor:format-list-numbered",event:"text-list-numbered",command:"insertOrderedList",toggles:!0},{label:"Unordered List",icon:"editor:format-list-bulleted",event:"text-list-bulleted",command:"insertUnorderedList",toggles:!0},{label:"Blockquote",icon:"editor:format-quote"},{label:"Increase Indent",icon:"editor:format-indent-increase",event:"text-indent",command:"indent"},{label:"Decrease Indent",icon:"editor:format-indent-decrease",event:"text-outdent",command:"outdent"}]}],lg:[{group:"Insertions",buttons:[{label:"Insert Inline Image",icon:"editor:insert-photo",command:"insertImage"},{label:"Insert Symbol",icon:"editor:functions"},{label:"Insert Emoji",icon:"image:tag-faces"}]}]}},controls:{name:"controls",type:"String",value:null},editableElements:{name:"editableElements",type:"Array",value:[]},editableElement:{name:"editableElement",type:"Object",value:null},responsiveSize:{name:"responsiveSize",type:"String",value:"xs",reflectToAttribute:!0},selection:{name:"selection",type:"Object",value:null},sticky:{name:"sticky",type:"Boolean",value:!1,reflectToAttribute:!0}}}},{key:"tag",get:function(){return"rich-text-editor"}}]),o}();window.customElements.define(y.tag,y),e.RichTextEditor=y,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=rich-text-editor.umd.js.map
