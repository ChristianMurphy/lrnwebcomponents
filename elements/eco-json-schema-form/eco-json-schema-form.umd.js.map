{"version":3,"file":"eco-json-schema-form.umd.js","sources":["lib/eco-json-schema-array.js","lib/eco-json-schema-fieldset.js","lib/eco-json-schema-markup.js","lib/eco-json-schema-tabs.js","lib/eco-json-schema-boolean.js","lib/eco-json-schema-enum.js","lib/eco-json-schema-file.js","lib/eco-json-schema-input.js","lib/eco-json-schema-object.js","lib/eco-json-schema-wizard.js"],"sourcesContent":["import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { afterNextRender } from \"@polymer/polymer/lib/utils/render-status.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\n/**\n`eco-json-schema-array` takes in a JSON schema of type array and builds a form,\nexposing a `value` property that represents an array described by the schema.\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-array\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaArray extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-array\";\n  }\n  constructor() {\n    super();\n    import(\"@polymer/iron-icons/iron-icons.js\");\n    import(\"@polymer/iron-icons/editor-icons.js\");\n    import(\"@polymer/paper-icon-button/paper-icon-button.js\");\n    import(\"@lrnwebcomponents/a11y-collapse/a11y-collapse.js\");\n    import(\"@lrnwebcomponents/a11y-collapse/lib/a11y-collapse-group.js\");\n  }\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\">\n        :host {\n          color: var(--eco-json-form-color);\n          background-color: var(--eco-json-form-bg);\n          font-family: var(--eco-json-form-font-family);\n        }\n        :host([hidden]),\n        [hidden] {\n          display: none;\n        }\n        :host fieldset {\n          border-radius: var(--eco-json-form-border-radius);\n          border-style: solid;\n          border-width: 1px;\n          border-color: var(--eco-json-form-faded-color);\n          transition: all 0.5s;\n        }\n        :host legend {\n          transition: all 0.5s;\n          color: var(--eco-json-form-faded-color);\n        }\n        :host fieldset:focus #legend,\n        :host fieldset:focus-within #legend {\n          color: var(--eco-json-form-active-color);\n        }\n        :host .array-item-button {\n          color: var(--eco-json-form-faded-color);\n          background-color: var(--eco-json-form-bg);\n          text-transform: none;\n          margin-bottom: 0;\n        }\n        :host .array-item-button:focus,\n        :host .array-item-button:hover {\n          color: var(--eco-json-form-active-color);\n        }\n        :host .add-array-item iron-icon {\n          padding: 8px;\n        }\n        :host .add-array-item {\n          color: var(--eco-json-form-add-color);\n          border-radius: 0 0 var(--eco-json-form-border-radius);\n          border: 1px solid var(--eco-json-form-bg);\n          margin: 0;\n          padding: 0 8px 0 16px;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        }\n        :host .add-array-item:focus,\n        :host .add-array-item:hover {\n          color: var(--eco-json-form-add-color);\n          background-color: var(--eco-json-form-faded-bg);\n          border: 1px solid var(--eco-json-form-faded-color);\n        }\n        :host .remove-array-item {\n          color: var(--eco-json-form-remove-color);\n          background-color: var(--eco-json-form-bg);\n          margin: 15px 0 0 0;\n          border-radius: 100%;\n        }\n        :host .remove-array-item:focus,\n        :host .remove-array-item:hover {\n          color: var(--eco-json-form-remove-color);\n          background-color: var(--eco-json-form-faded-bg);\n        }\n        :host a11y-collapse-group {\n          margin: 0;\n          border-radius: var(--eco-json-form-border-radius);\n          --a11y-collapse-border: 1px solid var(--eco-json-form-faded-color);\n        }\n        :host a11y-collapse {\n          border: 1px solid var(--eco-json-form-bg);\n          --a11y-collapse-padding-right: 8px;\n          --a11y-collapse-heading-color: var(--eco-json-form-faded-color);\n          --a11y-collapse-heading-background-color: var(--eco-json-form-bg);\n          --a11y-collapse-heading-font-weight: normal;\n          --a11y-collapse-heading-margin: 0;\n          --a11y-collapse-icon-padding: 8px;\n        }\n        :host a11y-collapse:focus,\n        :host a11y-collapse:hover,\n        :host a11y-collapse[expanded] {\n          border: 1px solid var(--eco-json-form-faded-color);\n          --a11y-collapse-heading-color: var(--eco-json-form-color);\n          --a11y-collapse-heading-background-color: var(\n            --eco-json-form-faded-bg\n          );\n          --a11y-collapse-heading-font-weight: normal;\n          --a11y-collapse-heading-margin: 0;\n        }\n        :host p[slot=\"heading\"] {\n          margin: 0;\n        }\n        :host div[slot=\"content\"] > div {\n          width: 100%;\n          display: flex;\n          align-items: flex-end;\n          justify-content: space-between;\n        }\n        :host .item-fields {\n          flex: 1 0 auto;\n        }\n      </style>\n      <fieldset>\n        <legend id=\"legend\" class=\"flex\" hidden\\$=\"[[!schema.title]]\">\n          [[schema.title]]\n        </legend>\n        <a11y-collapse-group\n          id=\"form\"\n          icon=\"settings\"\n          class=\"vertical flex layout\"\n          global-options=\"[[globalOptions]]\"\n        >\n          <template is=\"dom-repeat\" items=\"[[schema.value]]\" as=\"item\" restamp>\n            <a11y-collapse\n              accordion\n              id$=\"item-[[index]]\"\n              icon$=\"[[globalOptions.icon]]\"\n              tooltip$=\"[[globalOptions.tooltip]]\"\n            >\n              <p slot=\"heading\">\n                {{_getHeading(__headings.*,schema.label,index)}}\n              </p>\n              <div slot=\"content\">\n                <div>\n                  <div\n                    id$=\"value-[[index]]\"\n                    class=\"item-fields\"\n                    data-index$=\"[[index]]\"\n                  ></div>\n                  <paper-icon-button\n                    id=\"remove-[[index]]\"\n                    icon=\"icons:delete\"\n                    aria-label=\"Remove this item\"\n                    aria-describedby=\"item-[[index]]\"\n                    class=\"remove-array-item array-item-button\"\n                    controls=\"item-[[index]]\"\n                    on-tap=\"_onRemoveItem\"\n                    role=\"button\"\n                  >\n                  </paper-icon-button>\n                  <paper-tooltip for=\"remove-[[index]]\"\n                    >Remove this item</paper-tooltip\n                  >\n                </div>\n              </div>\n            </a11y-collapse>\n          </template>\n        </a11y-collapse-group>\n        <paper-button\n          class=\"add-array-item array-item-button\"\n          on-click=\"_onAddItem\"\n          role=\"button\"\n        >\n          Add an item\n          <iron-icon icon=\"add-circle\"></iron-icon>\n        </paper-button>\n      </fieldset>\n    `;\n  }\n  static get properties() {\n    return {\n      globalOptions: {\n        type: Object,\n        value: {\n          icon: \"settings\",\n          tooltip: \"configure item\"\n        },\n        notify: true\n      },\n      propertyName: {\n        type: String,\n        value: null\n      },\n      schema: {\n        type: Object,\n        value: {},\n        notify: true,\n        observer: \"_schemaChanged\"\n      },\n      __headings: {\n        type: Array,\n        value: [],\n        notify: true\n      }\n    };\n  }\n  ready() {\n    super.ready();\n    this.__headings = [];\n    this._schemaChanged();\n\n    //update the headings if the data changes\n    this.addEventListener(\"form-field-changed\", e => {\n      this._updateHeadings(e);\n    });\n  }\n  disconnectedCallback() {\n    this.removeEventListener(\"form-field-changed\", e => {\n      this._updateHeadings(e);\n    });\n    super.disconnectedCallback();\n  }\n  /**\n   * updates the array fields if the schema (which includes values) changes\n   */\n  _schemaChanged() {\n    //make sure the content is there first\n    afterNextRender(this, () => {\n      let itemLabel = this.schema.items.itemLabel;\n      if (this.schema && Array.isArray(this.schema.value)) {\n        this.schema.value.forEach(val => {\n          this.push(\"__headings\", val[itemLabel]);\n        });\n      }\n      this.shadowRoot.querySelectorAll(\".item-fields\").forEach(item => {\n        let index = item.getAttribute(\"data-index\"),\n          propertyName = `${this.propertyPrefix}${this.propertyName}`,\n          prefix = `${propertyName}.${index}`,\n          //path = `${propertyName}.properties.${index}`,\n          val = this.schema.value[index];\n        //for each array item, request the fields frrom eco-json-schema-object\n        this.dispatchEvent(\n          new CustomEvent(\"build-fieldset\", {\n            bubbles: false,\n            cancelable: true,\n            composed: true,\n            detail: {\n              container: item,\n              path: propertyName,\n              prefix: prefix,\n              properties: this.schema.properties.map(prop => {\n                let newprop = JSON.parse(JSON.stringify(prop));\n                newprop.value = val[prop.name];\n                return newprop;\n              }),\n              type: EcoJsonSchemaArray.tag,\n              value: this.schema.value || []\n            }\n          })\n        );\n      });\n    });\n  }\n  /**\n   * handles adding an array item\n   * @param {event} e the add item button tap event\n   */\n  _onAddItem(e) {\n    let val = {};\n    //add default values to the new item\n    this.schema.properties.forEach(prop => {\n      val[prop.name] = prop.value;\n    });\n    this.push(\"schema.value\", val);\n    this.notifyPath(\"schema.value.*\");\n    this._schemaChanged();\n  }\n  /**\n   * handles removing an array item\n   * @param {event} e the remove item button tap event\n   */\n  _onRemoveItem(e) {\n    //remove the data for an item at a given index\n    let index = e.target.controls.replace(/item-/, \"\");\n    this.splice(\"schema.value\", index, 1);\n    this.notifyPath(\"schema.value.*\");\n    this._schemaChanged();\n  }\n  /**\n   * updates the list expandable headings for each item\n   * @param {event} e the event that triggers an update\n   */\n  _updateHeadings(e) {\n    let propname = e.detail.getAttribute(\"name\"),\n      val = e.detail.value,\n      pathArr = propname ? propname.split(\".\") : [],\n      index = pathArr.length > 2 ? pathArr[pathArr.length - 2] : null,\n      update =\n        e.detail.propertyName === this.schema.items.itemLabel\n          ? val\n          : this.__headings[index];\n    if (index) this.set(`__headings.${index}`, update);\n  }\n  /**\n   * labels the collapse heading based on a given property\n   * @param {object} headings item the array item\n   * @param {string} label prop the property that will populate the collapse heading\n   * @param {number} index the index of the item\n   * @returns {string} the expanable heading label\n   */\n  _getHeading(headings, label, index) {\n    //if there is no heading, number the item instead\n    return this.__headings &&\n      this.__headings[index] &&\n      typeof this.__headings[index] === \"string\" &&\n      this.__headings[index].trim(\"\") !== \"\"\n      ? this.__headings[index].trim(\"\")\n      : label && typeof label === \"string\" && label.trim(\"\") !== \"\"\n      ? `${label.trim(\"\")} ${index + 1}`\n      : `Item ${index + 1}`;\n  }\n}\nwindow.customElements.define(EcoJsonSchemaArray.tag, EcoJsonSchemaArray);\nexport { EcoJsonSchemaArray };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport { afterNextRender } from \"@polymer/polymer/lib/utils/render-status\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\n/**\n`eco-json-schema-fieldset` takes in a JSON schema of type fieldset and builds a form,\nexposing a `value` property that represents an array described by the schema.\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-fieldset\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaFieldset extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-fieldset\";\n  }\n  constructor() {\n    super();\n  }\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\">\n        :host {\n          color: var(--eco-json-form-color);\n          background-color: var(--eco-json-form-bg);\n          font-family: var(--eco-json-form-font-family);\n          margin-bottom: 15px;\n        }\n        :host ([hidden]) {\n          display: none;\n        }\n        :host fieldset {\n          border-radius: var(--eco-json-form-border-radius);\n          border-style: solid;\n          border-width: 1px;\n          border-color: var(--eco-json-form-faded-color);\n          transition: all 0.5s;\n        }\n        :host legend {\n          transition: all 0.5s;\n          color: var(--eco-json-form-faded-color);\n        }\n        :host fieldset:focus #legend,\n        :host fieldset:focus-within #legend {\n          color: var(--eco-json-form-active-color);\n        }\n        :host eco-json-schema-object {\n          flex: 1 0 auto;\n        }\n      </style>\n      <fieldset>\n        <legend id=\"legend\" class=\"flex\" hidden\\$=\"[[!schema.title]]\">\n          [[schema.title]]\n        </legend>\n        <div hidden$=\"[[!schema.description]]\">[[item.description]]</div>\n        <div class=\"item-fields\"></div>\n      </fieldset>\n    `;\n  }\n  static get properties() {\n    return {\n      propertyName: {\n        type: String,\n        value: null\n      },\n      schema: {\n        type: Object,\n        value: {}\n      }\n    };\n  }\n  ready() {\n    super.ready();\n    this._schemaChanged();\n  }\n  /**\n   * updates the array fields if the schema (which includes values) changes\n   */\n  _schemaChanged() {\n    //make sure the content is there first\n    afterNextRender(this, () => {\n      this.shadowRoot\n        .querySelectorAll(\".item-fields\")\n        .forEach((item, index) => {\n          let prefix = `${this.propertyName}`;\n          this.dispatchEvent(\n            new CustomEvent(\"build-fieldset\", {\n              bubbles: false,\n              cancelable: true,\n              composed: true,\n              detail: {\n                container: item,\n                path: prefix,\n                prefix: prefix,\n                properties: this.schema.properties,\n                type: EcoJsonSchemaFieldset.tag,\n                value: this.schema.properties[index].value || {}\n              }\n            })\n          );\n        });\n    });\n  }\n}\nwindow.customElements.define(EcoJsonSchemaFieldset.tag, EcoJsonSchemaFieldset);\nexport { EcoJsonSchemaFieldset };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport { encapScript, wipeSlot } from \"@lrnwebcomponents/utils/utils.js\";\nimport \"@polymer/marked-element/marked-element.js\";\n/**\n`eco-json-schema-tabs` takes in a JSON schema of type array and builds a form,\nexposing a `value` property that represents an array described by the schema.\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-tabs\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaMarkup extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-markup\";\n  }\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\">\n        :host {\n          color: var(--eco-json-form-color);\n          background-color: var(--eco-json-form-bg);\n          font-family: var(--eco-json-form-font-family);\n        }\n        :host ([hidden]) {\n          display: none;\n        }\n      </style>\n      <div class=\"markup\">\n        <slot></slot>\n      </div>\n    `;\n  }\n  static get properties() {\n    return {\n      value: {\n        type: String,\n        notify: true,\n        value: \"\"\n      }\n    };\n  }\n  /**\n   * render the markup requested\n   */\n  _valueChanged(newValue) {\n    // clear self\n    wipeSlot(this);\n    // sanity check to ditch scripts\n    let html = encapScript(newValue);\n    let frag = document.createRange().createContextualFragment(html);\n    // self apend to flow into slot and show up\n    this.appendChild(frag);\n  }\n}\nwindow.customElements.define(EcoJsonSchemaMarkup.tag, EcoJsonSchemaMarkup);\nexport { EcoJsonSchemaMarkup };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@lrnwebcomponents/a11y-tabs/a11y-tabs.js\";\nimport { afterNextRender } from \"@polymer/polymer/lib/utils/render-status\";\n/**\n`eco-json-schema-tabs` takes in a JSON schema of type array and builds a form,\nexposing a `value` property that represents an array described by the schema.\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-tabs\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaTabs extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-tabs\";\n  }\n  static get template() {\n    return html`\n      <custom-style>\n        <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n          :host{\n            color: var(--eco-json-form-color);\n            background-color: var(--eco-json-form-bg);\n            font-family: var(--eco-json-form-font-family);\n            margin-bottom: 15px;\n          }\n          :host ([hidden]) {\n            display: none;\n          }\n          :host a11y-tabs {\n            --a11y-tabs-color: var(--eco-json-form-faded-color);\n            --a11y-tabs-focus-color: var(--eco-json-form-color);\n            --a11y-tabs-border-color: var(--eco-json-form-faded-color);\n            --a11y-tabs-border-radius: var(--eco-json-form-border-radius);\n            --a11y-tabs-background: var(--eco-json-form-bg);\n            --a11y-tabs-faded-background: var(--eco-json-form-faded-bg);\n            --a11y-tabs-justify-tabs: flex-start;\n            --ally-tabs-wrap: unset;\n            --a11y-tabs-content-padding: 8px 16px 16px;\n            --a11y-tabs-button-padding: 8px;\n            --a11y-tabs-vertical-button-padding: unset;\n            --a11y-tabs-horizontal-border-radius: unset;\n            --a11y-tabs-vertical-border-radius: unset;\n            --a11y-tabs-horizontal-button-padding: 2px 5px;\n          }\n          :host a11y-tabs:focus,\n          :host a11y-tabs:focus-within {\n            --a11y-tabs-border-color: : var(--eco-json-form-focus-color);\n          }\n          :host .tab-title {\n            position: absolute;\n            left: -99999px;\n            height: 0;\n            overflow: hidden;\n          }\n        </style>\n      </custom-style>\n      <a11y-tabs id$=\"[[schema.property]]\">\n        <template\n          is=\"dom-repeat\"\n          items=\"[[schema.properties]]\"\n          as=\"item\"\n          restamp\n        >\n          <a11y-tab\n            id$=\"item-[[index]]\"\n            icon$=\"[[item.icon]]\"\n            label$=\"[[item.label]]\"\n          >\n            <div hidden$=\"[[!item.description]]\">[[item.description]]</div>\n            <div\n              id$=\"[[item.property]]\"\n              class=\"item-fields\"\n              data-index$=\"[[index]]\"\n            ></div>\n          </a11y-tab>\n        </template>\n      </a11y-tabs>\n    `;\n  }\n  static get properties() {\n    return {\n      propertyName: {\n        type: String,\n        value: null\n      },\n      schema: {\n        type: Object,\n        value: {}\n      }\n    };\n  }\n  ready() {\n    super.ready();\n    this._schemaChanged();\n  }\n  /**\n   * updates the array fields if the schema (which includes values) changes\n   */\n  _schemaChanged() {\n    //make sure the content is there first\n    afterNextRender(this, () => {\n      this.shadowRoot.querySelectorAll(\".item-fields\").forEach(item => {\n        let index = item.getAttribute(\"data-index\"),\n          propertyName = this.propertyName,\n          tab = this.schema.properties[index],\n          prop = tab.name,\n          prefix = `${propertyName}.${prop}`;\n        this.dispatchEvent(\n          new CustomEvent(\"build-fieldset\", {\n            bubbles: false,\n            cancelable: true,\n            composed: true,\n            detail: {\n              container: item,\n              path: prefix,\n              prefix: prefix,\n              properties: tab.schema.properties,\n              type: EcoJsonSchemaTabs.tag,\n              value: tab.value || {}\n            }\n          })\n        );\n      });\n    });\n  }\n}\nwindow.customElements.define(EcoJsonSchemaTabs.tag, EcoJsonSchemaTabs);\nexport { EcoJsonSchemaTabs };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/paper-checkbox/paper-checkbox.js\";\nclass EcoJsonSchemaBoolean extends PolymerElement {\n  static get tag() {\n    return \"eco-json-schema-boolean\";\n  }\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        :host ([hidden]) {\n          display: none;\n        }\n        paper-checkbox {\n          display: block;\n          font-size: 16px;\n          white-space: normal;\n          margin: var(--eco-json-field-margin, 0 0 15px);\n          --paper-checkbox-checkmark-color: var(\n            --eco-json-form-bg,\n            var(--primary-background-color, #fff)\n          );\n          --paper-checkbox-unchecked-background-color: var(\n            --eco-json-form-bg,\n            var(--primary-background-color, #fff)\n          );\n          --paper-checkbox-checked-color: var(\n            --eco-json-form-active-color,\n            var(--primary-color, #000)\n          );\n          --paper-checkbox-unchecked-color: var(\n            --eco-json-form-active-color,\n            var(--primary-text-text-color, #222)\n          );\n          --paper-checkbox-label-color: var(\n            --eco-json-form-color,\n            var(--secondary-text-color, #888)\n          );\n        }\n        :host paper-checkbox:focus {\n          --paper-checkbox-unchecked-color: var(\n            --eco-json-form-active-color,\n            var(--primary-color, #000)\n          );\n          --paper-checkbox-label-color: var(\n            --eco-json-form-active-color,\n            var(--primary-text-text-color, #222)\n          );\n        }\n      </style>\n\n      <paper-checkbox\n        id=\"checkbox\"\n        class=\"flex\"\n        hidden$=\"[[hidden]]\"\n        checked=\"{{value}}\"\n        invalid=\"[[error]]\"\n        >[[_label]]</paper-checkbox\n      >\n    `;\n  }\n  static get properties() {\n    return {\n      schema: {\n        type: Object,\n        observer: \"_schemaChanged\"\n      },\n      value: {\n        type: Boolean,\n        notify: true,\n        value: false\n      },\n      error: {\n        type: Boolean,\n        value: false\n      },\n      _label: {\n        type: String,\n        notify: true,\n        value: \"\"\n      }\n    };\n  }\n  _schemaChanged() {\n    var schema = this.schema;\n    var inputEl = this.shadowRoot.querySelector(\"#checkbox\");\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    if (schema.title) {\n      this._label = schema.title;\n    }\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaBoolean.tag, EcoJsonSchemaBoolean);\nexport { EcoJsonSchemaBoolean };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu.js\";\nimport \"@polymer/paper-item/paper-item.js\";\nimport \"@polymer/paper-listbox/paper-listbox.js\";\nimport { IronValidatableBehavior } from \"@polymer/iron-validatable-behavior/iron-validatable-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\n\nclass EcoJsonSchemaEnum extends mixinBehaviors(\n  [IronValidatableBehavior],\n  PolymerElement\n) {\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        :host ([hidden]) {\n          display: none;\n        }\n        paper-input {\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n        }\n\n        paper-dropdown-menu {\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n          --paper-dropdown-menu-button: {\n            padding: 2px;\n          }\n        }\n      </style>\n\n      <paper-dropdown-menu\n        id=\"dropdown\"\n        class=\"layout horizontal vertical\"\n        value=\"{{value}}\"\n        required=\"\"\n      >\n        <paper-dropdown-menu class=\"dropdown-content\">\n          <paper-listbox slot=\"dropdown-content\" selected=\"0\">\n            <template is=\"dom-repeat\" items=\"[[_items]]\">\n              <paper-item class=\"flex\" label=\"[[item]]\">[[item]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </paper-dropdown-menu>\n    `;\n  }\n  static get tag() {\n    return \"eco-json-schema-enum\";\n  }\n  static get properties() {\n    return {\n      schema: {\n        type: Object,\n        observer: \"_schemaChanged\"\n      },\n      value: {\n        type: String,\n        notify: true,\n        value: null\n      },\n      error: {\n        type: String,\n        observer: \"_errorChanged\",\n        value: null\n      },\n      _items: {\n        type: Object,\n        value() {\n          return {};\n        }\n      }\n    };\n  }\n  _schemaChanged() {\n    var schema = this.schema;\n    var inputEl = this.shadowRoot.querySelector(\"#dropdown\");\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    this._items = schema.enum.filter(function(item) {\n      return item !== null;\n    });\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n  }\n  _errorChanged() {\n    if (this.error) {\n      this.shadowRoot.querySelector(\"#dropdown\").invalid = true;\n    } else {\n      this.shadowRoot.querySelector(\"#dropdown\").invalid = false;\n    }\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaEnum.tag, EcoJsonSchemaEnum);\nexport { EcoJsonSchemaEnum };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { microTask } from \"@polymer/polymer/lib/utils/async.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\n/**\n`eco-json-schema-file` takes in a JSON schema of type number and string and\ncontains a `paper-input`, exposing a `value` property that represents the schema.\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-file\n* @demo demo/index.html\n*/\n\nclass EcoJsonSchemaFile extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-file\";\n  }\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        :host ([hidden]) {\n          display: none;\n        }\n        paper-input {\n          padding: 2px;\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n        }\n\n        :host {\n          display: inline-block;\n        }\n\n        .enabled {\n          border: 1px dashed #555;\n          @apply --file-upload-upload-border-enabled;\n        }\n\n        .hover {\n          opacity: 0.7;\n          border: 1px dashed #111;\n          @apply --file-upload-upload-border-hover;\n        }\n\n        #UploadBorder {\n          vertical-align: middle;\n          color: #555;\n          padding: 20px;\n          max-height: 300px;\n          overflow-y: auto;\n          display: inline-block;\n          @apply --file-upload-upload-border;\n        }\n\n        #dropArea {\n          text-align: center;\n          @apply --file-upload-drop-area;\n        }\n\n        paper-button#button {\n          margin-bottom: 20px;\n          @apply --file-upload-button;\n        }\n\n        .file {\n          padding: 10px 0px;\n          @apply --file-upload-file;\n        }\n\n        .commands {\n          float: right;\n          @apply --file-upload-commands;\n        }\n\n        .commands iron-icon:not([icon=\"check-circle\"]) {\n          cursor: pointer;\n          opacity: 0.9;\n          @apply --file-upload-commands-faded;\n        }\n\n        .commands iron-icon:hover {\n          opacity: 1;\n          @apply --file-upload-commands-hovered;\n        }\n\n        [hidden] {\n          display: none;\n        }\n\n        .error {\n          color: #f40303;\n          font-size: 11px;\n          margin-top: 2px;\n          @apply --file-upload-error;\n        }\n\n        .progress-bar {\n          margin-top: 2px;\n        }\n\n        paper-progress {\n          --paper-progress-active-color: #03a9f4;\n        }\n\n        paper-progress[error] {\n          --paper-progress-active-color: #f40303;\n        }\n      </style>\n\n      <div class=\"layout horizontal nowrap\">\n        <div>\n          <paper-button\n            id=\"button\"\n            on-click=\"_fileClick\"\n            alt=\"{{paperButtonAlt}}\"\n            raised=\"\"\n          >\n            <iron-icon icon=\"editor:attach-file\"></iron-icon\n            >{{paperButtonTitle}}</paper-button\n          >\n          <div id=\"UploadBorder\">\n            <div id=\"dropArea\" hidden\\$=\"{{!_shownDropText}}\">{{dropText}}</div>\n            <template is=\"dom-repeat\" items=\"{{files}}\">\n              <div class=\"file\">\n                <div class=\"name\">\n                  <span>{{item.name}}</span>\n                  <div class=\"commands\">\n                    <iron-icon\n                      icon=\"autorenew\"\n                      title=\"{{retryText}}\"\n                      on-click=\"_retryUpload\"\n                      hidden\\$=\"{{!item.error}}\"\n                    ></iron-icon>\n                    <iron-icon\n                      icon=\"cancel\"\n                      title=\"{{removeText}}\"\n                      on-click=\"_cancelUpload\"\n                      hidden\\$=\"{{item.complete}}\"\n                    ></iron-icon>\n                    <iron-icon\n                      icon=\"check-circle\"\n                      title=\"{{successText}}\"\n                      hidden\\$=\"{{!item.complete}}\"\n                    ></iron-icon>\n                  </div>\n                </div>\n                <div class=\"error\" hidden\\$=\"{{!item.error}}\">\n                  {{errorText}}\n                </div>\n              </div>\n            </template>\n          </div>\n        </div>\n        <input\n          type=\"file\"\n          id=\"fileInput\"\n          on-change=\"_fileChange\"\n          hidden=\"\"\n          multiple=\"{{multi}}\"\n          accept=\"{{accept}}\"\n        />\n      </div>\n    `;\n  }\n  static get properties() {\n    return {\n      language: {\n        value: \"en\",\n        notify: true\n      },\n      resources: {\n        value() {\n          return {};\n        },\n        notify: true\n      },\n      schema: {\n        type: Object,\n        observer: \"_schemaChanged\"\n      },\n      value: {\n        type: Object,\n        notify: true,\n        value() {\n          return {};\n        },\n        observer: \"_valueChanged\"\n      },\n      /**\n      error: {\n        type: String,\n        observer: '_errorChanged',\n        value: null\n      },\n      */\n\n      /**\n       * `target`\n       * @customElement target is the target url to upload the files to.\n       * Additionally by adding '<name>' in your url, it will be replaced by\n       * the file name.\n       */\n      target: {\n        type: String,\n        value: \"\"\n      },\n\n      /**\n       * `accept`\n       * @customElement accept is the set of comma separated file extensions or mime types\n       * to filter as accepted.\n       */\n      accept: {\n        type: String,\n        value: \"\"\n      },\n\n      /**\n       * `droppable`\n       * @customElement droppable indicates whether or not to allow file drop.\n       */\n      droppable: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * `dropText`\n       * @customElement dropText is the  text to display in the file drop area.\n       */\n      dropText: {\n        type: String,\n        value: \"Drop Files Here\"\n      },\n\n      /**\n       * `multi`\n       * @customElement multi indicates whether or not to allow multiple files to be uploaded.\n       */\n      multi: {\n        type: Boolean,\n        value: true\n      },\n\n      /**\n       * `files`\n       * @customElement files is the list of files to be uploaded\n       */\n      files: {\n        type: Array,\n        notify: true,\n        value() {\n          return [];\n        }\n      },\n\n      /**\n       * `raised`\n       * @customElement raised indicates whether or not the button should be raised\n       */\n      raised: {\n        type: Boolean,\n        value: true\n      },\n\n      /**\n       * `noink`\n       * @customElement noink indicates that the button should not have an ink effect\n       */\n      noink: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * `headers`\n       * @customElement headers is a key value map of header names and values\n       */\n      headers: {\n        type: Object,\n        value: {}\n      },\n\n      /**\n       * `retryText`\n       * @customElement retryText is the text for the tooltip to retry an upload\n       */\n      retryText: {\n        type: String,\n        value: \"Retry Upload\"\n      },\n\n      /**\n       * `removeText`\n       * @customElement removeText is the text for the tooltip to remove an upload\n       */\n      removeText: {\n        type: String,\n        value: \"Remove\"\n      },\n\n      /**\n       * `successText`\n       * @customElement successText is the text for the tooltip of a successful upload\n       */\n      successText: {\n        type: String,\n        value: \"Success\"\n      },\n\n      /**\n       * `errorText`\n       * @customElement errorText is the text to display for a failed upload\n       */\n      errorText: {\n        type: String,\n        value: \"Error uploading file...\"\n      },\n\n      /**\n       * `_shownDropText`\n       * @customElement _shownDropText indicates whether or not the drop text should be shown\n       */\n      _shownDropText: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * `additional`\n       * @customElement additional object of key-pair values to send additional values along with file.\n       */\n      additional: {\n        type: Object,\n        value: {}\n      },\n\n      /**\n       * `fileDataName`\n       * @customElement fileDataName is the name for the file data in the `formData` object.\n       */\n      fileDataName: {\n        type: String,\n        value: \"file\"\n      },\n\n      /**\n       * `paperButtonAlt`\n       * @customElement paperButtonAlt allows changing the alt property on the paper button\n       */\n      paperButtonAlt: {\n        type: String,\n        value: \"\"\n      },\n\n      /**\n       * `paperButtonTitle`\n       * @customElement paperButtonTitle allows changing the title property on the paper button\n       */\n      paperButtonTitle: {\n        type: String,\n        value: \"\"\n      }\n    };\n  }\n  /**\n   * Clears the list of files\n   */\n  clear() {\n    this.set(\"files\", []);\n    this.shadowRoot.querySelector(\"#fileInput\").value = \"\";\n    this._showDropText();\n  }\n\n  ready() {\n    super.ready();\n\n    if (this.raised) {\n      this.toggleAttribute(\n        \"raised\",\n        true,\n        this.shadowRoot.querySelector(\"#button\")\n      );\n    }\n    if (this.noink) {\n      this.toggleAttribute(\n        \"noink\",\n        true,\n        this.shadowRoot.querySelector(\"#button\")\n      );\n    }\n    if (this.droppable) {\n      this._showDropText();\n      this.setupDrop();\n    }\n  }\n\n  /**\n   * A function to set up a drop area for drag-and-drop file uploads\n   */\n  setupDrop() {\n    var uploadBorder = this.shadowRoot.querySelector(\"#UploadBorder\");\n    this.toggleClass(\"enabled\", true, uploadBorder);\n\n    this.ondragover = function(e) {\n      e.stopPropagation();\n      this.toggleClass(\"hover\", true, uploadBorder);\n\n      // Workaround for allowgin drop from Chome's download footer on OSX\n      // See https://bugs.chromium.org/p/chromium/issues/detail?id=234931\n      var effect = e.dataTransfer && e.dataTransfer.dropEffect;\n      var effectAllowed = e.dataTransfer && e.dataTransfer.effectAllowed;\n      if (effect === \"none\" && effectAllowed !== \"none\") {\n        e.dataTransfer.dropEffect = effectAllowed === \"move\" ? \"move\" : \"copy\";\n      }\n      // end of workaround\n\n      return false;\n    };\n\n    this.ondragleave = function() {\n      this.toggleClass(\"hover\", false, uploadBorder);\n      return false;\n    };\n\n    this.ondrop = function(event) {\n      this.toggleClass(\"hover\", false, uploadBorder);\n      event.preventDefault();\n\n      // Check if multiple upload is allowed\n      if (!this.multi && this.files.length !== 0) {\n        return;\n      }\n\n      var length = event.dataTransfer.files.length;\n      for (var i = 0; i < length; i++) {\n        var file = event.dataTransfer.files[i];\n        //if (this.value.indexOf(window.btoa(unescape(encodeURIComponent(file.name)))) >= 0 ) {\n        //  continue;\n        //}\n        // Check if filetype is accepted\n        var mimeType =\n          file.type !== \"\" ? file.type.match(/^[^\\/]*\\//)[0] : null;\n        var fileType = file.name.match(/\\.[^\\.]*$/)[0];\n        if (\n          this.accept !== \"\" &&\n          !(\n            this.accept.indexOf(mimeType) > -1 ||\n            this.accept.indexOf(fileType) > -1\n          )\n        ) {\n          continue;\n        }\n\n        file.progress = 0;\n        file.error = false;\n        file.complete = false;\n        this.push(\"files\", file);\n        this.uploadFile(file);\n      }\n    };\n  }\n\n  /**\n   * Clicks the invisible file input\n   */\n  _fileClick() {\n    var elem = this.shadowRoot.querySelector(\"#fileInput\");\n    if (elem && document.createEvent) {\n      // sanity check\n      var evt = document.createEvent(\"MouseEvents\");\n      evt.initEvent(\"click\", true, false);\n      elem.dispatchEvent(evt);\n    }\n  }\n\n  /**\n   * Called whenever the list of selected files changes\n   *\n   * @param {object} e An event object\n   */\n  _fileChange(e) {\n    var length = e.target.files.length;\n    for (var i = 0; i < length; i++) {\n      var file = e.target.files[i];\n      file.progress = 0;\n      file.error = false;\n      file.complete = false;\n      this.push(\"files\", file);\n      if (!this.multi && this.files.length !== 0) {\n        this.set(\"files\", []);\n        this.set(\"value\", {});\n      }\n      this.uploadFile(file);\n    }\n  }\n\n  /**\n   * Cancels the file upload for a specific file\n   *\n   * @param {object} file An element of the files array\n   */\n  cancel(file) {\n    if (file) {\n      if (file.xhr) {\n        file.xhr.abort();\n      }\n      this.splice(\"files\", this.files.indexOf(file), 1);\n      this._showDropText();\n    }\n  }\n\n  /**\n   * Cancels the file upload\n   *\n   * @param {object} e An event object\n   */\n  _cancelUpload(e) {\n    this.cancel(e.model.__data__.item);\n  }\n\n  /**\n   * Retries to upload the file\n   *\n   * @param {object} e An event object\n   */\n  _retryUpload(e) {\n    e.model.set(\"item.error\", false);\n    e.model.set(\"item.progress\", 0);\n    // The async helps give visual feedback of a retry occurring, even though it's less efficient.\n    var self = this;\n    microTask.run(() => {\n      self.uploadFile(e.model.__data__.item);\n    });\n  }\n\n  /**\n   * Whether or not to display the drop text\n   */\n  _showDropText() {\n    this.set(\"_shownDropText\", !this.files.length && this.droppable);\n  }\n\n  /**\n   * Uploads a file\n   *\n   * @param {object} file An element of the files array\n   */\n  uploadFile(file) {\n    if (!file) {\n      return;\n    }\n    this.dispatchEvent(\n      new CustomEvent(\"before-upload\", {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: true\n      })\n    );\n    this._showDropText();\n    var prefix = \"files.\" + this.files.indexOf(file);\n    var self = this;\n\n    var reader = new FileReader();\n\n    reader.addEventListener(\n      \"load\",\n      function() {\n        var r = reader.result;\n        //self.push('value', {\"name\": unescape(encodeURIComponent( file.name )),\"content\":r});\n        //self.value.push({\"name\": unescape(encodeURIComponent( file.name )),\"content\":r});\n        //console.log('value.'+self.files.indexOf(file));\n        self.set(\n          \"value.\" +\n            self.attributes.name.value +\n            \".\" +\n            self.files.indexOf(file),\n          r\n        );\n        //self.notifyPath('value');\n      },\n      false\n    );\n\n    if (!self.value.hasOwnProperty(self.attributes.name.value)) {\n      this.set(\"value.\" + self.attributes.name.value, {});\n    }\n    reader.readAsDataURL(file);\n  }\n  _valueChanged() {\n    console.log(\"this.value: \" + JSON.stringify(this.value));\n  }\n  _schemaChanged() {\n    var schema = this.schema;\n    /*\n    var inputEl = this.shadowRoot.querySelector('#fileInput');\n    if (schema.required) {\n      inputEl.required = true;\n    }\n    //inputEl.type = 'file';\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n    */\n\n    /*\n    inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n    */\n  }\n  /*\n  _errorChanged() {\n    if (this.error) {\n      this.shadowRoot.querySelector('#fileInput').errorMessage = this.error;\n      this.shadowRoot.querySelector('#fileInput').invalid = true;\n    } else {\n      this.shadowRoot.querySelector('#fileInput').invalid = false;\n      this.shadowRoot.querySelector('#fileInput').errorMessage = null;\n    }\n  },\n  */\n  _isSchemaValue(type) {\n    return this._isSchemaFile(type);\n  }\n  _isSchemaFile(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n  stringify(s) {\n    return JSON.stringify(s);\n  }\n}\nwindow.customElements.define(EcoJsonSchemaFile.tag, EcoJsonSchemaFile);\nexport { EcoJsonSchemaFile };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/paper-styles/typography.js\";\n/**\n`eco-json-schema-input` takes in a JSON schema of type number and string and\ncontains a `paper-input`, exposing a `value` property that represents the schema.\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-input\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaInput extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-input\";\n  }\n  static get template() {\n    return html`\n      <custom-style>\n        <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n          :host ([hidden]) {\n            display: none;\n          }\n        </style>\n      </custom-style>\n      <paper-input\n        id=\"input\"\n        class=\"flex\"\n        value=\"{{value}}\"\n        auto-validate\n      ></paper-input>\n    `;\n  }\n\n  static get properties() {\n    return {\n      language: {\n        value: \"en\"\n      },\n      resources: {\n        value() {\n          return {};\n        }\n      },\n      schema: {\n        type: Object,\n        observer: \"_schemaChanged\"\n      },\n      value: {\n        type: String,\n        notify: true,\n        value() {\n          return \"\";\n        }\n      },\n      error: {\n        type: String,\n        observer: \"_errorChanged\",\n        value: null\n      }\n    };\n  }\n  _schemaChanged() {\n    var schema = this.schema;\n    var inputEl = this.shadowRoot.querySelector(\"#input\");\n    if (schema.required) {\n      inputEl.required = true;\n    }\n    if (this._isSchemaNumber(schema.type)) {\n      inputEl.type = \"number\";\n\n      if (schema.multipleOf) {\n        inputEl.step = schema.multipleOf;\n      }\n\n      if (!isNaN(schema.maximum)) {\n        if (schema.exclusiveMaximum) {\n          inputEl.max = schema.maximum - (schema.multipleOf || 1);\n        } else {\n          inputEl.max = schema.maximum;\n        }\n      }\n\n      if (!isNaN(schema.minimum)) {\n        if (schema.exclusiveMinimum) {\n          inputEl.min = schema.minimum + (schema.multipleOf || 1);\n        } else {\n          inputEl.min = schema.minimum;\n        }\n      }\n    }\n\n    if (this._isSchemaString(schema.type)) {\n      if (schema.format === \"date-time\") {\n        inputEl.type = \"datetime-local\";\n        inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n      } else if (schema.format === \"date\") {\n        inputEl.type = \"date\";\n      } else if (schema.format === \"email\") {\n        inputEl.type = \"email\";\n      } else if (schema.format === \"hostname\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"ipv4\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"ipv6\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"uri\") {\n        inputEl.type = \"url\";\n      } else {\n        inputEl.type = \"text\";\n      }\n\n      /*\n        if (schema.maxLength || schema.minLength) {\n          inputEl.charCounter = true;\n        }\n       */\n\n      if (schema.maxLength) {\n        inputEl.maxlength = schema.maxLength;\n      }\n\n      if (schema.minLength) {\n        inputEl.minlength = schema.minLength;\n      }\n\n      if (schema.pattern) {\n        inputEl.pattern = schema.pattern;\n      }\n    }\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n  }\n  _errorChanged() {\n    if (this.error) {\n      this.shadowRoot.querySelector(\"#input\").errorMessage = this.error;\n      this.shadowRoot.querySelector(\"#input\").invalid = true;\n    } else {\n      this.shadowRoot.querySelector(\"#input\").invalid = false;\n      this.shadowRoot.querySelector(\"#input\").errorMessage = null;\n    }\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaInput.tag, EcoJsonSchemaInput);\nexport { EcoJsonSchemaInput };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/polymer/lib/elements/dom-if.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"./eco-json-schema-array.js\";\nimport \"./eco-json-schema-fieldset.js\";\nimport \"./eco-json-schema-markup.js\";\nimport \"./eco-json-schema-tabs.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-file.js\";\nimport \"./eco-json-schema-input.js\";\n/**\n`eco-json-schema-object` takes in a JSON schema of type object and builds a form,\nexposing a `value` property that represents an object described by the schema.\n\nGiven the element:\n\n```\n<eco-json-schema-object schema=\"[[schema]]\" value=\"{{value}}\"></eco-json-schema-object>\n```\n\nAnd a JSON schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\"\n    }\n  }\n}\n```\n\nA form will be generated, with the elements `value` looking something like this:\n\n```\n> this.value\n{\n  \"name\": \"Eric\"\n}\n```\n\nDeep / nested schemas are supported for type array and object:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\"\n    },\n    \"email\": {\n      \"title\": \"email\",\n      \"type\": \"string\",\n      \"format\": \"email\"\n    }\n  }\n}\n```\n\nCustomizing components for schema properties is supported by extending your JSON\nschema. For any schema sub-property (`properties` for `\"type\": \"object\"` and\n`items` for `\"type\": \"array\"`) a `component` property may be specified, with\nthe following options:\n\n- `component.name` - specifies the name of the custom component to use\n- `component.valueProperty` - specifies which property of the custom element\n  represents its value\n- `component.properties` - properties that will be set on the element\n\nExample schema using custom components (note that `\"valueProperty\": \"value\"` is\nredundant in this case, `\"valueProperty\": \"value\"` will be the default if not specified):\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"phoneNumber\": {\n      \"title\": \"Phone Number\",\n      \"type\": \"string\",\n      \"component\": {\n        \"name\": \"gold-phone-input\",\n        \"valueProperty\": \"value\",\n        \"properties\": {\n          \"countryCode\": \"1\"\n        }\n      }\n    }\n  }\n}\n```\n\nItems set in `component.properties` will override any attributes / properties set\nby `eco-json-schema-form` elements, making it possible to override JSON schema\nvalidation properties mapped to `paper-input` attributes:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    }\n  }\n}\n```\n\nPutting it all together, this schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    },\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\",\n            \"component\": {\n              \"name\": \"gold-phone-input\",\n              \"valueProperty\": \"value\",\n              \"properties\": {\n                \"countryCode\": \"1\"\n              }\n            }\n          }\n        }\n      }\n    },\n    \"emailAddresses\": {\n      \"title\": \"Emails\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"email\": {\n            \"title\": \"email\",\n            \"type\": \"string\",\n            \"format\": \"email\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nWill build a form describing an object:\n\n```\n> this.value\n{\n  \"name\": \"Eric\",\n  \"age\": 28,\n  \"postalCode\": \"H1W 2C5\",\n  \"phoneNumbers\": [\n    {\n      \"type\": \"Mobile\",\n      \"phoneNumber\": \"123-456-7890\"\n    }\n  ]\n  \"emailAddresses\": [\n    {\n      \"type\": \"Personal\",\n      \"email\": \"eric@wat.com\"\n    }\n  ]\n}\n```\n\nExternal validation is supported via the `error` property. By providing an\nobject tree with each leaf representing an error message for properties, the\nmessage will be attached to the appropriate element.\n\nExample, for the Contact schema:\n\n```\nel.error = {\n  \"name\": \"String is too short (0 chars) minimum 2\",\n  \"phoneNumbers\": [\n    {\n      \"phoneNumber\": \"String does not match required format\"\n    }\n  ]\n}\n```\n\n@group eco Elements\n@element eco-json-schema-object\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaObject extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-object\";\n  }\n\n  static get template() {\n    return html`\n      <custom-style>\n        <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n          :host {\n            --eco-json-field-margin: 0 0 15px;\n            --eco-json-form-border-radius: 2px;\n            --eco-json-form-font-family: var(\n              --paper-font-caption_-_font-family,\n              unset\n            );\n            --eco-json-form-bg: var(--primary-background-color, #fff);\n            --eco-json-form-color: var(--primary-text-color, #222);\n            --eco-json-form-faded-color: #888;\n            --eco-json-form-active-color: var(--primary-color, #000);\n            --eco-json-form-faded-bg: #f0f0f0;\n            --eco-json-form-add-color: #008811;\n            --eco-json-form-add-focus: #007700;\n            --eco-json-form-remove-focus: #cc0000;\n            --eco-json-form-remove-color: #dd0000;\n            --simple-picker-float-label-color: var(--eco-json-form-faded-color);\n            --simple-picker-float-label-active-color: var(\n              --eco-json-form-active-color\n            );\n            --simple-picker-background-color: var(--eco-json-form-bg);\n            --simple-picker-border-color: var(--eco-json-form-faded-color);\n            --simple-picker-focus-border-color: var(\n              --eco-json-form-active-color\n            );\n            --simple-picker-focus-border-width: 2px;\n            --paper-input-container: {\n              padding-top: 0;\n            }\n          }\n          div.layout {\n            height: auto;\n          }\n          #form {\n            display: block;\n            font-family: var(--eco-json-form-font-family);\n            background-color: var(--eco-json-form-bg);\n            color: var(--eco-json-form-color);\n            --paper-tooltip-background: var(--eco-json-form-active-color);\n            --paper-tooltip-text-color: var(--eco-json-form-bg);\n            @apply --eco-json-schema-object-form;\n            @apply --layout-vertical;\n            @apply --layout-wrap;\n          }\n          #form ::slotted(paper-input) {\n            margin-bottom: 15px;\n          }\n          #form ::slotted(*.has-tooltip-desc) {\n            margin-bottom: 0;\n            padding-bottom: 0;\n            --paper-input-container: {\n              margin-bottom: 0;\n              padding-bottom: 0;\n            }\n          }\n          #form ::slotted(div.tooltip-desc) {\n            font-size: 12px;\n            margin: var(--eco-json-field-margin);\n            color: var(--eco-json-form-faded-color);\n          }\n          #form ::slotted(paper-input),\n          #form ::slotted(div.tooltip-desc) {\n            font-family: var(--eco-json-form-font-family);\n          }\n          #form ::slotted(div.desc-for-paper-textarea) {\n            margin-top: -18px;\n            margin-right: 35px;\n          }\n          #form ::slotted(code-editor) {\n            margin: 8px 0;\n            padding: 0;\n            --code-editor-float-label-color: var(--eco-json-form-faded-color);\n            --code-editor-float-label-active-color: var(\n              --eco-json-form-active-color\n            );\n            --code-pen-button-color: var(--eco-json-form-faded-color);\n            --code-editor-code-border: 1px solid\n              var(--eco-json-form-faded-color);\n            --code-editor-code-border-radius: 2px;\n            --code-editor-focus-code-border: 2px solid\n              var(--eco-json-form-active-color);\n          }\n        </style>\n      </custom-style>\n\n      <template is=\"dom-if\" if=\"{{!wizard}}\">\n        <div class=\"header\" hidden\\$=\"[[!label]]\">[[label]]</div>\n      </template>\n      <div class=\"layout vertical flex start-justified\">\n        <div\n          id=\"form\"\n          class=\"layout horizontal flex start-justified\"\n          aria-live=\"polite\"\n        >\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n  static get properties() {\n    return {\n      language: {\n        value: \"en\"\n      },\n      resources: {\n        value() {\n          return {};\n        }\n      },\n      schema: {\n        type: Object,\n        notify: true,\n        observer: \"_schemaChanged\"\n      },\n      label: {\n        type: String\n      },\n      value: {\n        type: Object,\n        notify: true,\n        value() {\n          return {};\n        }\n      },\n      error: {\n        type: Object,\n        observer: \"_errorChanged\"\n      },\n      wizard: {\n        type: Boolean,\n        notify: true\n      },\n      /**\n       * the name of the code-editor theme\n       */\n      codeTheme: {\n        type: String,\n        value: \"vs-light-2\"\n      },\n      /**\n       * automatically set focus on the first field if that field has autofocus\n       */\n      autofocus: {\n        type: Boolean,\n        value: false\n      }\n    };\n  }\n  disconnectedCallback() {\n    this._clearForm();\n    super.disconnectedCallback();\n  }\n  /**\n   * returns an array of properties for a given schema object\n   * @param {object} thisSchema the source schema\n   * @returns {array} an array\n   */\n  _buildSchemaProperties(thisSchema = this.schema) {\n    var ctx = this;\n    return Object.keys(thisSchema.properties || []).map(key => {\n      var schema = thisSchema.properties[key];\n      var property = {\n        name: key,\n        schema: schema,\n        label: schema.title || key,\n        description: schema.description,\n        component: schema.component || {}\n      };\n      if (!property.component.valueProperty) {\n        property.component.valueProperty = \"value\";\n      }\n      if (!property.component.slot) {\n        property.component.slot = \"\";\n      }\n      if (ctx._isSchemaEnum(schema)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-enum\";\n        if (typeof schema.value === typeof undefined) {\n          schema.value = \"\";\n        }\n        property.value = schema.value;\n      } else if (ctx._isSchemaBoolean(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-boolean\";\n        if (typeof schema.value === typeof undefined) {\n          schema.value = false;\n        }\n        property.value = schema.value;\n      } else if (ctx._isSchemaFile(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-file\";\n        if (typeof schema.value === typeof undefined) {\n          schema.value = {};\n        }\n        property.value = schema.value;\n      } else if (ctx._isSchemaValue(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-input\";\n        if (typeof schema.value === typeof undefined) {\n          schema.value = \"\";\n        }\n        property.value = schema.value;\n      } else if (ctx._isSchemaObject(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-object\";\n        if (typeof schema.value === typeof undefined) {\n          schema.value = {};\n        }\n        property.value = schema.value;\n      } else if (ctx._isSchemaArray(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-array\";\n        this._buildNestedSchemaProperties(property, schema);\n      } else if (ctx._isSchemaFieldset(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-fieldset\";\n        this._buildNestedSchemaProperties(property, schema);\n      } else if (ctx._isSchemaTabs(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-tabs\";\n        this._buildNestedSchemaProperties(property, schema);\n      } else if (ctx._isSchemaMarkup(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-markup\";\n        if (typeof schema.value === typeof undefined) {\n          schema.value = \"\";\n        }\n        property.value = schema.value;\n      } else {\n        return console.error(\"Unknown property type %s\", schema.type);\n      }\n      return property;\n    });\n  }\n  /**\n   * adds array of nested sub-properties to a given property based on a given schema\n   * @param {object} property the property that will have nested subproperties\n   * @param {object} schema the schema that has nested subschemas\n   */\n  _buildNestedSchemaProperties(property, schema) {\n    if (typeof schema.value === typeof undefined)\n      schema.value = schema.type !== \"array\" ? {} : [];\n    property.value = schema.value;\n    for (let key in schema.items.properties) {\n      schema.items.properties[key].value = schema.value[key];\n    }\n    property.schema.properties = this._buildSchemaProperties(\n      schema.items,\n      property.property + \".\"\n    );\n  }\n  /**\n   * updates the value when a schema property (or subproperty) changes\n   * @param {event} event the\n   * @param {object} detail the event details\n   */\n  _schemaPropertyChanged(event, detail) {\n    if (detail) {\n      if (detail.path && /\\.length$/.test(detail.path)) {\n        return;\n      }\n      var ctx = this;\n      var property = event.target.schemaProperty;\n\n      var path = [\"value\"].concat(\n        `${event.target.propertyPrefix}${event.target.propertyName}`.split(\".\")\n      );\n      var prop = property.property || event.target.propertyName;\n      var val = detail && detail.value ? this._deepClone(detail.value) : null;\n      if (detail.path && /\\.splices$/.test(detail.path)) {\n        var parts = detail.path.split(\".\").slice(1, -1);\n        while (parts.length) {\n          path.push(parts.shift());\n          if (property.keyMap && property.keyMap[path.join(\".\")]) {\n            path = property.keyMap[path.join(\".\")].split(\".\");\n          }\n        }\n\n        if (detail.value.keySplices) {\n          if (property.keyMap) {\n            detail.value.keySplices.forEach(splice => {\n              splice.removed.forEach(k => {\n                delete property.keyMap[path.concat([k]).join(\".\")];\n              });\n            });\n          }\n        }\n\n        if (detail.value) {\n          detail.value.indexSplices.forEach(splice => {\n            var args = [path.join(\".\"), splice.index, splice.removed.length];\n            if (splice.addedCount) {\n              for (var i = 0, ii = splice.addedCount; i < ii; i++) {\n                if (splice.addedKeys && splice.addedKeys[i]) {\n                  property.keyMap = property.keyMap || {};\n                  property.keyMap[\n                    path.concat([splice.addedKeys[i]]).join(\".\")\n                  ] = path.concat([i + splice.index]).join(\".\");\n                }\n                args.push(ctx._deepClone(splice.object[i + splice.index]));\n              }\n            }\n            ctx.splice.apply(ctx, args);\n          });\n        }\n      } else if (detail.path) {\n        var parts = detail.path.split(\".\").slice(1);\n        var v = this.value;\n        if (!v.hasOwnProperty(property.property)) {\n          this.set(\"value.\" + property.property, {});\n          this.notifyPath(\"value.\" + property.property);\n        }\n        while (parts.length) {\n          var k = parts.shift();\n          path.push(k);\n          if (property.keyMap && property.keyMap[path.join(\".\")]) {\n            path = property.keyMap[path.join(\".\")].split(\".\");\n          }\n        }\n        this.set(path.join(\".\"), this._deepClone(detail.value));\n        this.notifyPath(path.join(\".\"));\n      } else {\n        //most of our fields will just set the value this way\n        this.set(path.join(\".\"), this._deepClone(detail.value));\n        this.notifyPath(\"value\");\n      }\n      //fire an event to let array listeners handle changed fields\n      event.target.dispatchEvent(\n        new CustomEvent(\"form-field-changed\", {\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: event.target\n        })\n      );\n      this.dispatchEvent(\n        new CustomEvent(\"value-changed\", {\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: this\n        })\n      );\n    }\n  }\n  /**\n   * sets the value based on a the schema properties (or a subproperties and a path)\n   * @param {array} props the schema properties (default) or subproperties\n   * @param {string} path the string that indicates the path for subproperties\n   */\n  _setValue(props = this._schemaProperties, path = \"\") {\n    let setter = path.replace(/\\[(\\d+)\\]/g, \".$1\");\n    if (setter != \"\") setter = `.${setter}`;\n    if (props.length > 0) {\n      props.forEach(property => {\n        if (typeof property.value !== typeof undefined) {\n          this.set(\n            `value${setter}.${property.property}`,\n            this._deepClone(property.value),\n            JSON.stringify(property.value)\n          );\n        }\n      });\n      this.notifyPath(\"value.*\");\n    }\n  }\n  /**\n   * builds form fields and appends them to an element\n   * @param {array} props the schema properties (default) or subproperties\n   * @param {object} container optional container element the for the form fields (for subproperties)\n   * @param {string} prefix optional field name prefix (for subproperties)\n   */\n  _buildForm(props = this._schemaProperties, container = this, prefix = \"\") {\n    let autofocus = this.autofocus;\n    props.forEach(property => {\n      if (property.component.name === \"code-editor\") {\n        // special case, can't come up with a better way to do this but monoco is very special case\n        property.schema.component.properties.editorValue =\n          property.schema.value;\n        property.schema.component.properties.theme = this.codeTheme;\n      }\n      let propertyPrefix = prefix !== \"\" ? `${prefix}.` : ``,\n        propertyName = property.property || property.name;\n      var el = this.create(property.component.name, {\n        label: property.label,\n        schema: property.schema,\n        schemaProperty: property,\n        propertyPrefix: propertyPrefix,\n        propertyName: propertyName,\n        language: this.language,\n        resources: this.resources\n      });\n      if (property.component.name === \"paper-input\") {\n        el.style[\"background-color\"] = \"transparent\";\n        el.style[\"width\"] = \"100%\";\n      }\n      el.setAttribute(\"name\", `${propertyPrefix}${propertyName}`);\n      if (property.schema.hidden && property.schema.hidden !== undefined) {\n        el.setAttribute(\"hidden\", property.schema.hidden);\n      }\n\n      //allows the first form fields to be focused on autopmatically\n      if (autofocus) el.setAttribute(\"autofocus\", autofocus);\n      //turns of focus on subsequent form fields\n      autofocus = false;\n      el.className = \"flex start-justified\";\n      // set the element's default value to be what was passed into the schema\n      el[property.component.valueProperty] = property.value;\n      // support component attribute overrides\n      for (var attr in property.component.attributes) {\n        el.setAttribute(attr, property.component.attributes[attr]);\n      }\n      // support component property overrides\n      for (var prop in property.component.properties) {\n        el[prop] = property.component.properties[prop];\n      }\n      this.listen(\n        el,\n        property.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n      this.listen(el, \"build-fieldset\", \"_onBuildFieldset\");\n\n      if (typeof this.$ !== typeof undefined) {\n        container.appendChild(el);\n        if (property.description) {\n          var id = \"tip-\" + property.property,\n            tip = document.createElement(\"div\");\n          el.setAttribute(\"aria-describedby\", id);\n          el.setAttribute(\"class\", \"has-tooltip-desc\");\n          tip.setAttribute(\"id\", id);\n          tip.setAttribute(\n            \"class\",\n            \"tooltip-desc desc-for-\" + property.component.name\n          );\n          if (property.schema.hidden === true)\n            tip.setAttribute(\"hidden\", \"hidden\");\n          tip.setAttribute(\"role\", \"tooltip\");\n          tip.innerHTML = property.description;\n          container.appendChild(tip);\n        }\n      }\n      // support for slot injection too!\n      if (property.component.slot != \"\") {\n        let temp = document.createElement(\"div\");\n        temp.innerHTML = property.component.slot;\n        let cloneDiv = temp.cloneNode(true);\n        while (cloneDiv.firstChild !== null) {\n          el.appendChild(cloneDiv.firstChild);\n        }\n      }\n      this.dispatchEvent(\n        new CustomEvent(\"form-changed\", {\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: this\n        })\n      );\n    });\n  }\n  /**\n   * handles fieldset requests from containers like fieldsets, tabs, or arrays\n   * @param {event} event the \"build-fieldset\" event\n   * @param {object} detail the details of the event, as in:```\n{\n  prefix: the prefix for the fields \n  properties: []     //an array of schema properties,\n  container: <div/>  //the container element,\n}\n  ```\n   */\n  _onBuildFieldset(event, detail) {\n    if (typeof this.get(`value.${detail.prefix}`) === typeof undefined)\n      this.set(`value.${detail.path}`, this._deepClone(detail.value));\n    this._clearForm(detail.container);\n    this._buildForm(detail.properties, detail.container, detail.prefix);\n  }\n  /**\n   * removes a field element\n   * @param {object} el the element to remove\n   * @param {*} parent the container where the field element exists\n   */\n  _removePropertyEl(el, parent = this) {\n    if (typeof el.schemaProperty !== typeof undefined) {\n      this.unlisten(\n        el,\n        el.schemaProperty.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n    }\n    el.schemaProperty = null;\n    parent.removeChild(el);\n  }\n  /**\n   * clears a form or a fieldset container within a form\n   * @param {object} el the element to remove\n   * @param {*} parent the container where the field element exists\n   */\n  _clearForm(container = this) {\n    if (typeof this.$ !== typeof undefined) {\n      var formEl = container;\n      while (formEl.firstChild) {\n        this._removePropertyEl(formEl.firstChild, container);\n      }\n    }\n  }\n  /**\n   * updates the form when the schema changes\n   * @param {object} newValue the new value for the schema\n   * @param {object} oldValue the old value for the schema\n   */\n  _schemaChanged(newValue, oldValue) {\n    if (newValue && newValue !== oldValue) {\n      this._clearForm();\n      this._schemaProperties = this._buildSchemaProperties();\n      this._buildForm();\n      this._setValue();\n    }\n  }\n  /**\n   * handles errors\n   * @todo how do we want to handle errors for nested fields?\n   */\n  _errorChanged() {\n    /*\n    console.log(\n      \"_errorChanged\",\n      this,\n      this.querySelectorAll(\"[name]\"),\n      this.error\n    );*/\n    this.childNodes.forEach(el => {\n      var name = el.getAttribute(\"name\");\n      if (this.error && this.error[name]) {\n        el.error = this.error[name];\n      } else {\n        el.error = null;\n      }\n    });\n  }\n  /**\n   * clones an object and all its subproperties\n   * @param {object} o the object to clone\n   * @returns {object} the cloned object\n   */\n  _deepClone(o) {\n    return JSON.parse(JSON.stringify(o));\n  }\n\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  }\n  _isSchemaFile(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaEnum(schema) {\n    return !!schema.enum;\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n  _isSchemaFieldset(type) {\n    return type === \"fieldset\";\n  }\n  _isSchemaTabs(type) {\n    return type === \"tabs\";\n  }\n  _isSchemaMarkup(type) {\n    return type === \"markup\";\n  }\n  focus() {\n    //console.log(this);\n  }\n}\nwindow.customElements.define(EcoJsonSchemaObject.tag, EcoJsonSchemaObject);\nexport { EcoJsonSchemaObject };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/iron-icons/image-icons.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/iron-pages/iron-pages.js\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar.js\";\nimport \"@polymer/paper-menu-button/paper-menu-button.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"./eco-json-schema-object.js\";\nimport \"./eco-json-schema-array.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-file.js\";\nimport \"./eco-json-schema-input.js\";\n\n/**\n`eco-json-schema-wizard` takes in a JSON schema of type object and builds a form,\nexposing a `value` property that represents an object described by the schema.\n\nGiven the element:\n\n```\n<eco-json-schema-wizard schema=\"[[schema]]\" value=\"{{value}}\"></eco-json-schema-wizard>\n```\n\nAnd a JSON schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\"\n    }\n  }\n}\n```\n\nA form will be generated, with the elements `value` looking something like this:\n\n```\n> this.value\n{\n  \"name\": \"Eric\"\n}\n```\n\nDeep / nested schemas are supported for type array and object:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\"\n    },\n    \"email\": {\n      \"title\": \"email\",\n      \"type\": \"string\",\n      \"format\": \"email\"\n    }\n  }\n}\n```\n\nCustomizing components for schema properties is supported by extending your JSON\nschema. For any schema sub-property (`properties` for `\"type\": \"object\"` and\n`items` for `\"type\": \"array\"`) a `component` property may be specified, with\nthe following options:\n\n- `component.name` - specifies the name of the custom component to use\n- `component.valueProperty` - specifies which property of the custom element\n  represents its value\n- `component.properties` - properties that will be set on the element\n\nExample schema using custom components (note that `\"valueProperty\": \"value\"` is\nredundant in this case, `\"valueProperty\": \"value\"` will be the default if not specified):\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"phoneNumber\": {\n      \"title\": \"Phone Number\",\n      \"type\": \"string\",\n      \"component\": {\n        \"name\": \"gold-phone-input\",\n        \"valueProperty\": \"value\",\n        \"properties\": {\n          \"countryCode\": \"1\"\n        }\n      }\n    }\n  }\n}\n```\n\nItems set in `component.properties` will override any attributes / properties set\nby `eco-json-schema-form` elements, making it possible to override JSON schema\nvalidation properties mapped to `paper-input` attributes:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    }\n  }\n}\n```\n\nPutting it all together, this schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    },\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\",\n            \"component\": {\n              \"name\": \"gold-phone-input\",\n              \"valueProperty\": \"value\",\n              \"properties\": {\n                \"countryCode\": \"1\"\n              }\n            }\n          }\n        }\n      }\n    },\n    \"emailAddresses\": {\n      \"title\": \"Emails\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"email\": {\n            \"title\": \"email\",\n            \"type\": \"string\",\n            \"format\": \"email\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nWill build a form describing an object:\n\n```\n> this.value\n{\n  \"name\": \"Eric\",\n  \"age\": 28,\n  \"postalCode\": \"H1W 2C5\",\n  \"phoneNumbers\": [\n    {\n      \"type\": \"Mobile\",\n      \"phoneNumber\": \"123-456-7890\"\n    }\n  ]\n  \"emailAddresses\": [\n    {\n      \"type\": \"Personal\",\n      \"email\": \"eric@wat.com\"\n    }\n  ]\n}\n```\n\nExternal validation is supported via the `error` property. By providing an\nobject tree with each leaf representing an error message for properties, the\nmessage will be attached to the appropriate element.\n\nExample, for the Contact schema:\n\n```\nel.error = {\n  \"name\": \"String is too short (0 chars) minimum 2\",\n  \"phoneNumbers\": [\n    {\n      \"phoneNumber\": \"String does not match required format\"\n    }\n  ]\n}\n```\n\n@group eco Elements\n@element eco-json-schema-wizard\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaWizard extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-wizard\";\n  }\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        :host {\n          display: block;\n          @apply --layout-vertical;\n        }\n\n        paper-input {\n          padding: 2px;\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #fff;\n          }\n        }\n\n        .box,\n        #form {\n          display: -webkit-box;\n          display: -webkit-flex;\n          display: -moz-box;\n          display: -ms-flexbox;\n          display: flex;\n          -webkit-flex-align: center;\n          -ms-flex-align: center;\n          -webkit-align-items: center;\n          align-items: center;\n        }\n\n        .fullbleed {\n          z-index: 1;\n        }\n\n        app-toolbar.bottom {\n          --app-toolbar-color: var(--app-primary-color);\n          --app-toolbar-background: var(--dark-theme-text-color);\n        }\n\n        app-toolbar.bottom paper-icon-button {\n          --app-toolbar-color: var(--dark-theme-text-color);\n          --app-toolbar-background: var(--app-primary-color);\n        }\n      </style>\n      <div class=\"vertical flex layout fullbleed\">\n        <!--\n        paper-icon-button id=\"camButton\" icon=\"editor:insert-photo\" raised>add photo</paper-icon-button\n      -->\n        <app-toolbar>\n          <paper-icon-button\n            id=\"prevButton\"\n            icon=\"arrow-back\"\n            hidden\\$=\"{{!hasPrev}}\"\n            on-click=\"prev\"\n            raised=\"\"\n            >{{localize('prev')}}</paper-icon-button\n          ><span\n            class=\"title layout horizontal flex\"\n            style=\"white-space: normal\"\n            >[[title]]</span\n          >\n          <paper-icon-button\n            id=\"nextButton\"\n            icon=\"arrow-forward\"\n            hidden\\$=\"{{!hasNext}}\"\n            on-click=\"next\"\n            raised=\"\"\n            >{{localize('next')}}</paper-icon-button\n          >\n          <paper-icon-button\n            id=\"submitButton\"\n            icon=\"cloud-upload\"\n            on-click=\"submit\"\n            raised=\"\"\n            >{{localize('submit')}}</paper-icon-button\n          >\n        </app-toolbar>\n        <iron-pages\n          id=\"form\"\n          class=\"layout horizontal flex start-justified\"\n          role=\"main\"\n          selected=\"[[page]]\"\n          attr-for-selected=\"name\"\n        ></iron-pages>\n        <app-toolbar class=\"bottom\">\n          <div hidden\\$=\"{{!hasPrev}}\" on-click=\"prev\">\n            <paper-icon-button id=\"prevButton\" icon=\"arrow-back\" raised=\"\"\n              >{{localize('prev')}}</paper-icon-button\n            >\n            <span class=\"title layout\" style=\"white-space: normal\"\n              >{{localize('prev')}}</span\n            >\n          </div>\n          <span\n            class=\"title layout horizontal flex\"\n            style=\"white-space: normal\"\n          ></span>\n          <div hidden\\$=\"{{!hasNext}}\" on-click=\"next\">\n            <span class=\"title layout\" style=\"white-space: normal\"\n              >{{localize('next')}}</span\n            >\n            <paper-icon-button id=\"nextButton\" icon=\"arrow-forward\" raised=\"\"\n              >{{localize('next')}}</paper-icon-button\n            >\n          </div>\n        </app-toolbar>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      language: {\n        type: String,\n        notify: true\n      },\n      resources: {\n        type: Object,\n        notify: true\n      },\n      schema: {\n        type: Object,\n        notify: true,\n        observer: \"_schemaChanged\"\n      },\n      label: {\n        type: String\n      },\n      value: {\n        type: Object,\n        notify: true,\n        value() {\n          return {};\n        }\n      },\n      page: {\n        type: String,\n        notify: true,\n        observer: \"_pageChanged\"\n      },\n      pages: {\n        type: Array,\n        notify: true,\n        value: []\n      },\n      error: {\n        type: Object,\n        observer: \"_errorChanged\"\n      },\n      isReview: {\n        type: Boolean,\n        value: false,\n        notify: true\n      },\n      canSubmit: {\n        type: Boolean,\n        notify: true\n      },\n      hasNext: {\n        type: Boolean,\n        notify: true\n      },\n      hasPrev: {\n        type: Boolean,\n        notify: true\n      },\n      titles: {\n        type: Array,\n        notify: true,\n        value: []\n      },\n      title: {\n        type: String,\n        value: \"\",\n        notify: true\n      }\n    };\n  }\n  disconnectedCallback() {\n    this._clearForm();\n    super.disconnectedCallback();\n  }\n  _buildSchemaProperties() {\n    var ctx = this;\n\n    this._schemaProperties = Object.keys(this.schema.properties || []).map(\n      function(key) {\n        var schema = ctx.schema.properties[key];\n        var property = {\n          property: key,\n          label: schema.title || key,\n          schema: schema,\n          component: schema.component || {}\n        };\n\n        if (!property.component.valueProperty) {\n          property.component.valueProperty = \"value\";\n        }\n\n        if (ctx._isSchemaEnum(schema)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-enum\";\n          property.value = \"\";\n        } else if (ctx._isSchemaBoolean(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-boolean\";\n          property.value = false;\n        } else if (ctx._isSchemaFile(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-file\";\n          property.value = \"\";\n        } else if (ctx._isSchemaValue(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-input\";\n          property.value = \"\";\n        } else if (ctx._isSchemaObject(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-object\";\n          property.component.wizard = true;\n          property.value = {};\n        } else if (ctx._isSchemaArray(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-array\";\n          property.value = [];\n        } else {\n          return console.error(\"Unknown property type %s\", schema.type);\n        }\n        ctx.push(\"pages\", key);\n        ctx.push(\"titles\", schema.title);\n\n        return property;\n      }\n    );\n  }\n  _schemaPropertyChanged(event, detail) {\n    if (detail.path && /\\.length$/.test(detail.path)) {\n      return;\n    }\n\n    var ctx = this;\n    var property = event.target.schemaProperty;\n    var path = [\"value\", property.property];\n\n    if (detail.path && /\\.splices$/.test(detail.path)) {\n      var parts = detail.path.split(\".\").slice(1, -1);\n      while (parts.length) {\n        path.push(parts.shift());\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n\n      if (detail.value.keySplices) {\n        if (property.keyMap) {\n          detail.value.keySplices.forEach(function(splice) {\n            splice.removed.forEach(function(k) {\n              delete property.keyMap[path.concat([k]).join(\".\")];\n            });\n          });\n        }\n      }\n\n      detail.value.indexSplices.forEach(function(splice) {\n        var args = [path.join(\".\"), splice.index, splice.removed.length];\n        if (splice.addedCount) {\n          for (var i = 0, ii = splice.addedCount; i < ii; i++) {\n            if (splice.addedKeys && splice.addedKeys[i]) {\n              property.keyMap = property.keyMap || {};\n              property.keyMap[\n                path.concat([splice.addedKeys[i]]).join(\".\")\n              ] = path.concat([i + splice.index]).join(\".\");\n            }\n            args.push(ctx._deepClone(splice.object[i + splice.index]));\n          }\n        }\n        ctx.splice.apply(ctx, args);\n      });\n    } else if (detail.path) {\n      var parts = detail.path.split(\".\").slice(1);\n      var v = this.value;\n      if (!v.hasOwnProperty(property.property)) {\n        this.set(\"value.\" + property.property, {});\n      }\n      while (parts.length) {\n        var k = parts.shift();\n        path.push(k);\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n      this.set(path.join(\".\"), this._deepClone(detail.value));\n\n      console.log(\"value: \" + JSON.stringify(this.value));\n    }\n  }\n  _setValue() {\n    var ctx = this;\n    var value = {};\n    this._schemaProperties.forEach(function(property) {\n      value[property.property] = ctx._deepClone(property.value);\n    });\n    this.value = value;\n  }\n  _buildForm() {\n    var ctx = this;\n    this._schemaProperties.forEach(property => {\n      var el = ctx.create(property.component.name, {\n        label: property.label,\n        schema: property.schema,\n        schemaProperty: property,\n        language: this.language,\n        resources: this.resources\n      });\n\n      el.setAttribute(\"name\", property.property);\n      el.className = \"flex start-justified\";\n\n      property.value = el[property.component.valueProperty];\n      ctx.listen(\n        el,\n        property.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n      ctx.shadowRoot.querySelector(\"#form\").appendChild(el);\n    });\n  }\n  _removePropertyEl(el) {\n    if (typeof el.schemaProperty !== typeof undefined) {\n      this.unlisten(\n        el,\n        el.schemaProperty.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n    }\n    el.schemaProperty = null;\n    this.shadowRoot.querySelector(\"#form\").removeChild(el);\n  }\n  _clearForm() {\n    var formEl = this.shadowRoot.querySelector(\"#form\");\n    while (formEl.firstChild) {\n      this._removePropertyEl(formEl.firstChild);\n    }\n  }\n  _schemaChanged() {\n    this._clearForm();\n    this._buildSchemaProperties();\n    this._buildForm();\n    this._setValue();\n    if (this.pages.length > 0) {\n      this.set(\"page\", this.pages[0]);\n    }\n    this.set(\"title\", this.titles[0]);\n  }\n  next() {\n    var current = this.pages.indexOf(this.page);\n    var next = current;\n    if (current !== -1) {\n      if (current < this.pages.length - 1) {\n        next = current + 1;\n      }\n      this.set(\"page\", this.pages[next]);\n      this.set(\"title\", this.titles[next]);\n    } else {\n      console.log(\"Invalid current page in wizard\");\n    }\n  }\n  prev() {\n    var current = this.pages.indexOf(this.page);\n    var prev = current;\n    if (current !== -1) {\n      if (current > 0) {\n        prev = current - 1;\n      }\n      this.set(\"page\", this.pages[prev]);\n      this.set(\"title\", this.titles[prev]);\n    } else {\n      console.log(\"Invalid current page in wizard\");\n    }\n  }\n  submit() {\n    this.dispatchEvent(\n      new CustomEvent(\"submit\", {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: true\n      })\n    );\n  }\n  _pageChanged() {\n    var current = this.pages.indexOf(this.page);\n    if (current === 0) {\n      this.set(\"hasPrev\", false);\n    } else {\n      this.set(\"hasPrev\", true);\n    }\n    if (current === this.pages.length - 1) {\n      this.set(\"hasNext\", false);\n    } else {\n      this.set(\"hasNext\", true);\n    }\n  }\n  _errorChanged() {\n    var ctx = this;\n    this.shadowRoot.querySelector(\"#form\").childNodes.forEach(function(el) {\n      var name = el.getAttribute(\"name\");\n      if (ctx.error && ctx.error[name]) {\n        el.error = ctx.error[name];\n      } else {\n        el.error = null;\n      }\n    });\n  }\n  _deepClone(o) {\n    return JSON.parse(JSON.stringify(o));\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  }\n  _isSchemaFile(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaEnum(schema) {\n    return !!schema.enum;\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaWizard.tag, EcoJsonSchemaWizard);\nexport { EcoJsonSchemaWizard };\n"],"names":["EcoJsonSchemaArray","mixinBehaviors","AppLocalizeBehavior","PolymerElement","__headings","_schemaChanged","addEventListener","e","_this2","_updateHeadings","removeEventListener","_this3","afterNextRender","this","itemLabel","_this4","schema","items","Array","isArray","value","forEach","val","push","shadowRoot","querySelectorAll","item","index","getAttribute","propertyName","propertyPrefix","prefix","dispatchEvent","CustomEvent","bubbles","cancelable","composed","detail","container","path","properties","map","prop","newprop","JSON","parse","stringify","name","type","tag","notifyPath","target","controls","replace","splice","propname","pathArr","split","length","update","set","headings","label","trim","html","globalOptions","Object","icon","tooltip","notify","String","observer","window","customElements","define","EcoJsonSchemaFieldset","_this","EcoJsonSchemaMarkup","newValue","wipeSlot","encapScript","frag","document","createRange","createContextualFragment","appendChild","EcoJsonSchemaTabs","tab","EcoJsonSchemaBoolean","inputEl","querySelector","component","keys","title","_label","_isSchemaBoolean","_isSchemaNumber","_isSchemaString","indexOf","Boolean","error","EcoJsonSchemaEnum","IronValidatableBehavior","_items","filter","invalid","EcoJsonSchemaFile","_showDropText","raised","toggleAttribute","noink","droppable","setupDrop","uploadBorder","toggleClass","ondragover","stopPropagation","effect","dataTransfer","dropEffect","effectAllowed","ondragleave","ondrop","event","preventDefault","multi","files","i","file","mimeType","match","fileType","accept","progress","complete","uploadFile","elem","createEvent","evt","initEvent","xhr","abort","cancel","model","__data__","self","microTask","run","reader","FileReader","r","result","attributes","hasOwnProperty","readAsDataURL","console","log","_isSchemaFile","s","language","resources","dropText","headers","retryText","removeText","successText","errorText","_shownDropText","additional","fileDataName","paperButtonAlt","paperButtonTitle","EcoJsonSchemaInput","required","multipleOf","step","isNaN","maximum","exclusiveMaximum","max","minimum","exclusiveMinimum","min","format","alwaysFloatLabel","maxLength","maxlength","minLength","minlength","pattern","errorMessage","EcoJsonSchemaObject","_clearForm","thisSchema","ctx","key","property","description","valueProperty","slot","_isSchemaEnum","_typeof","_isSchemaValue","_isSchemaObject","_isSchemaArray","_buildNestedSchemaProperties","_isSchemaFieldset","_isSchemaTabs","_isSchemaMarkup","_buildSchemaProperties","test","schemaProperty","concat","_deepClone","parts","slice","shift","keyMap","join","keySplices","removed","k","indexSplices","args","addedCount","ii","addedKeys","object","apply","props","_schemaProperties","setter","autofocus","editorValue","theme","codeTheme","el","create","attr","style","setAttribute","hidden","undefined","className","listen","toLowerCase","$","id","tip","createElement","innerHTML","temp","cloneDiv","cloneNode","firstChild","get","_buildForm","parent","unlisten","removeChild","formEl","_removePropertyEl","oldValue","_setValue","childNodes","o","wizard","EcoJsonSchemaWizard","pages","titles","current","page","next","prev","isReview","canSubmit","hasNext","hasPrev"],"mappings":"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"}