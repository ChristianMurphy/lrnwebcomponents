{"version":3,"file":"eco-json-schema-form.umd.js","sources":["lib/eco-json-schema-array.js","lib/eco-json-schema-fieldset.js","lib/eco-json-schema-markup.js","lib/eco-json-schema-tabs.js","lib/eco-json-schema-boolean.js","lib/eco-json-schema-enum.js","lib/eco-json-schema-file.js","lib/eco-json-schema-input.js","lib/eco-json-schema-object.js","lib/eco-json-schema-wizard.js"],"sourcesContent":["import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { afterNextRender } from \"@polymer/polymer/lib/utils/render-status.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\n/**\n`eco-json-schema-array` takes in a JSON schema of type array and builds a form,\nexposing a `value` property that represents an array described by the schema.\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-array\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaArray extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-array\";\n  }\n  constructor() {\n    super();\n    import(\"@polymer/iron-icons/iron-icons.js\");\n    import(\"@polymer/iron-icons/editor-icons.js\");\n    import(\"@polymer/paper-icon-button/paper-icon-button.js\");\n    import(\"@lrnwebcomponents/a11y-collapse/a11y-collapse.js\");\n    import(\"@lrnwebcomponents/a11y-collapse/lib/a11y-collapse-group.js\");\n  }\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\">\n        :host {\n          color: var(--eco-json-form-color);\n          background-color: var(--eco-json-form-bg);\n          font-family: var(--eco-json-form-font-family);\n        }\n        :host([hidden]),\n        [hidden] {\n          display: none;\n        }\n        :host fieldset {\n          border-radius: var(--eco-json-form-border-radius);\n          border-style: solid;\n          border-width: 1px;\n          border-color: var(--eco-json-form-faded-color);\n          transition: all 0.5s;\n        }\n        :host legend {\n          transition: all 0.5s;\n          color: var(--eco-json-form-faded-color);\n        }\n        :host fieldset:focus #legend,\n        :host fieldset:focus-within #legend {\n          color: var(--eco-json-form-active-color);\n        }\n        :host .array-item-button {\n          color: var(--eco-json-form-faded-color);\n          background-color: var(--eco-json-form-bg);\n          text-transform: none;\n          margin-bottom: 0;\n        }\n        :host .array-item-button:focus,\n        :host .array-item-button:hover {\n          color: var(--eco-json-form-active-color);\n        }\n        :host .add-array-item iron-icon {\n          padding: 8px;\n        }\n        :host .add-array-item {\n          color: var(--eco-json-form-add-color);\n          border-radius: 0 0 var(--eco-json-form-border-radius);\n          border: 1px solid var(--eco-json-form-bg);\n          margin: 0;\n          padding: 0 8px 0 16px;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        }\n        :host .add-array-item:focus,\n        :host .add-array-item:hover {\n          color: var(--eco-json-form-add-color);\n          background-color: var(--eco-json-form-faded-bg);\n          border: 1px solid var(--eco-json-form-faded-color);\n        }\n        :host .remove-array-item {\n          color: var(--eco-json-form-remove-color);\n          background-color: var(--eco-json-form-bg);\n          margin: 15px 0 0 0;\n          border-radius: 100%;\n        }\n        :host .remove-array-item:focus,\n        :host .remove-array-item:hover {\n          color: var(--eco-json-form-remove-color);\n          background-color: var(--eco-json-form-faded-bg);\n        }\n        :host a11y-collapse-group {\n          margin: 0;\n          border-radius: var(--eco-json-form-border-radius);\n          --a11y-collapse-border: 1px solid var(--eco-json-form-faded-color);\n        }\n        :host a11y-collapse {\n          border: 1px solid var(--eco-json-form-bg);\n          --a11y-collapse-padding-right: 8px;\n          --a11y-collapse-heading-color: var(--eco-json-form-faded-color);\n          --a11y-collapse-heading-background-color: var(--eco-json-form-bg);\n          --a11y-collapse-heading-font-weight: normal;\n          --a11y-collapse-heading-margin: 0;\n          --a11y-collapse-icon-padding: 8px;\n        }\n        :host a11y-collapse:focus,\n        :host a11y-collapse:hover,\n        :host a11y-collapse[expanded] {\n          border: 1px solid var(--eco-json-form-faded-color);\n          --a11y-collapse-heading-color: var(--eco-json-form-color);\n          --a11y-collapse-heading-background-color: var(\n            --eco-json-form-faded-bg\n          );\n          --a11y-collapse-heading-font-weight: normal;\n          --a11y-collapse-heading-margin: 0;\n        }\n        :host p[slot=\"heading\"] {\n          margin: 0;\n        }\n        :host div[slot=\"content\"] > div {\n          width: 100%;\n          display: flex;\n          align-items: flex-end;\n          justify-content: space-between;\n        }\n        :host .item-fields {\n          flex: 1 0 auto;\n        }\n      </style>\n      <fieldset>\n        <legend id=\"legend\" class=\"flex\" hidden\\$=\"[[!schema.title]]\">\n          [[schema.title]]\n        </legend>\n        <a11y-collapse-group\n          id=\"form\"\n          icon=\"settings\"\n          class=\"vertical flex layout\"\n          global-options=\"[[globalOptions]]\"\n        >\n          <template is=\"dom-repeat\" items=\"[[schema.value]]\" as=\"item\" restamp>\n            <a11y-collapse\n              accordion\n              id$=\"item-[[index]]\"\n              icon$=\"[[globalOptions.icon]]\"\n              tooltip$=\"[[globalOptions.tooltip]]\"\n            >\n              <p slot=\"heading\">\n                {{_getHeading(__headings.*,schema.label,index)}}\n              </p>\n              <div slot=\"content\">\n                <div>\n                  <div\n                    id$=\"value-[[index]]\"\n                    class=\"item-fields\"\n                    data-index$=\"[[index]]\"\n                  ></div>\n                  <paper-icon-button\n                    id=\"remove-[[index]]\"\n                    icon=\"icons:delete\"\n                    aria-label=\"Remove this item\"\n                    aria-describedby=\"item-[[index]]\"\n                    class=\"remove-array-item array-item-button\"\n                    controls=\"item-[[index]]\"\n                    on-tap=\"_onRemoveItem\"\n                    role=\"button\"\n                  >\n                  </paper-icon-button>\n                  <paper-tooltip for=\"remove-[[index]]\"\n                    >Remove this item</paper-tooltip\n                  >\n                </div>\n              </div>\n            </a11y-collapse>\n          </template>\n        </a11y-collapse-group>\n        <paper-button\n          class=\"add-array-item array-item-button\"\n          on-click=\"_onAddItem\"\n          role=\"button\"\n        >\n          Add an item\n          <iron-icon icon=\"add-circle\"></iron-icon>\n        </paper-button>\n      </fieldset>\n    `;\n  }\n  static get properties() {\n    return {\n      globalOptions: {\n        type: Object,\n        value: {\n          icon: \"settings\",\n          tooltip: \"configure item\"\n        },\n        notify: true\n      },\n      propertyName: {\n        type: String,\n        value: null\n      },\n      schema: {\n        type: Object,\n        value: {},\n        notify: true,\n        observer: \"_schemaChanged\"\n      },\n      __headings: {\n        type: Array,\n        value: [],\n        notify: true\n      }\n    };\n  }\n  ready() {\n    super.ready();\n    this.__headings = [];\n    this._schemaChanged();\n\n    //update the headings if the data changes\n    this.addEventListener(\"form-field-changed\", e => {\n      this._updateHeadings(e);\n    });\n  }\n  disconnectedCallback() {\n    this.removeEventListener(\"form-field-changed\", e => {\n      this._updateHeadings(e);\n    });\n    super.disconnectedCallback();\n  }\n  /**\n   * updates the array fields if the schema (which includes values) changes\n   */\n  _schemaChanged() {\n    //make sure the content is there first\n    afterNextRender(this, () => {\n      let itemLabel = this.schema.items.itemLabel;\n      if (this.schema.value)\n        this.schema.value.forEach(val => {\n          this.push(\"__headings\", val[itemLabel]);\n        });\n      this.shadowRoot.querySelectorAll(\".item-fields\").forEach(item => {\n        let index = item.getAttribute(\"data-index\"),\n          propertyName = `${this.propertyPrefix}${this.propertyName}`,\n          prefix = `${propertyName}.${index}`,\n          //path = `${propertyName}.properties.${index}`,\n          val = this.schema.value[index];\n        //for each array item, request the fields frrom eco-json-schema-object\n        this.dispatchEvent(\n          new CustomEvent(\"build-fieldset\", {\n            bubbles: false,\n            cancelable: true,\n            composed: true,\n            detail: {\n              container: item,\n              path: propertyName,\n              prefix: prefix,\n              properties: this.schema.properties.map(prop => {\n                let newprop = JSON.parse(JSON.stringify(prop));\n                newprop.value = val[prop.name];\n                return newprop;\n              }),\n              type: EcoJsonSchemaArray.tag,\n              value: this.schema.value || []\n            }\n          })\n        );\n      });\n    });\n  }\n  /**\n   * handles adding an array item\n   * @param {event} e the add item button tap event\n   */\n  _onAddItem(e) {\n    let val = {};\n    //add default values to the new item\n    this.schema.properties.forEach(prop => {\n      val[prop.name] = prop.value;\n    });\n    this.push(\"schema.value\", val);\n    this.notifyPath(\"schema.value.*\");\n    this._schemaChanged();\n  }\n  /**\n   * handles removing an array item\n   * @param {event} e the remove item button tap event\n   */\n  _onRemoveItem(e) {\n    //remove the data for an item at a given index\n    let index = e.target.controls.replace(/item-/, \"\");\n    this.splice(\"schema.value\", index, 1);\n    this.notifyPath(\"schema.value.*\");\n    this._schemaChanged();\n  }\n  /**\n   * updates the list expandable headings for each item\n   * @param {event} e the event that triggers an update\n   */\n  _updateHeadings(e) {\n    let propname = e.detail.getAttribute(\"name\"),\n      val = e.detail.value,\n      pathArr = propname ? propname.split(\".\") : [],\n      index = pathArr.length > 2 ? pathArr[pathArr.length - 2] : null,\n      update =\n        e.detail.propertyName === this.schema.items.itemLabel\n          ? val\n          : this.__headings[index];\n    if (index) this.set(`__headings.${index}`, update);\n  }\n  /**\n   * labels the collapse heading based on a given property\n   * @param {object} headings item the array item\n   * @param {string} label prop the property that will populate the collapse heading\n   * @param {number} index the index of the item\n   * @returns {string} the expanable heading label\n   */\n  _getHeading(headings, label, index) {\n    //if there is no heading, number the item instead\n    return this.__headings &&\n      this.__headings[index] &&\n      typeof this.__headings[index] === \"string\" &&\n      this.__headings[index].trim(\"\") !== \"\"\n      ? this.__headings[index].trim(\"\")\n      : label && typeof label === \"string\" && label.trim(\"\") !== \"\"\n      ? `${label.trim(\"\")} ${index + 1}`\n      : `Item ${index + 1}`;\n  }\n}\nwindow.customElements.define(EcoJsonSchemaArray.tag, EcoJsonSchemaArray);\nexport { EcoJsonSchemaArray };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport { afterNextRender } from \"@polymer/polymer/lib/utils/render-status\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\n/**\n`eco-json-schema-fieldset` takes in a JSON schema of type fieldset and builds a form,\nexposing a `value` property that represents an array described by the schema.\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-fieldset\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaFieldset extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-fieldset\";\n  }\n  constructor() {\n    super();\n  }\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\">\n        :host {\n          color: var(--eco-json-form-color);\n          background-color: var(--eco-json-form-bg);\n          font-family: var(--eco-json-form-font-family);\n          margin-bottom: 15px;\n        }\n        :host ([hidden]) {\n          display: none;\n        }\n        :host fieldset {\n          border-radius: var(--eco-json-form-border-radius);\n          border-style: solid;\n          border-width: 1px;\n          border-color: var(--eco-json-form-faded-color);\n          transition: all 0.5s;\n        }\n        :host legend {\n          transition: all 0.5s;\n          color: var(--eco-json-form-faded-color);\n        }\n        :host fieldset:focus #legend,\n        :host fieldset:focus-within #legend {\n          color: var(--eco-json-form-active-color);\n        }\n        :host eco-json-schema-object {\n          flex: 1 0 auto;\n        }\n      </style>\n      <fieldset>\n        <legend id=\"legend\" class=\"flex\" hidden\\$=\"[[!schema.title]]\">\n          [[schema.title]]\n        </legend>\n        <div hidden$=\"[[!schema.description]]\">[[item.description]]</div>\n        <div class=\"item-fields\"></div>\n      </fieldset>\n    `;\n  }\n  static get properties() {\n    return {\n      propertyName: {\n        type: String,\n        value: null\n      },\n      schema: {\n        type: Object,\n        value: {}\n      }\n    };\n  }\n  ready() {\n    super.ready();\n    this._schemaChanged();\n  }\n  /**\n   * updates the array fields if the schema (which includes values) changes\n   */\n  _schemaChanged() {\n    //make sure the content is there first\n    afterNextRender(this, () => {\n      this.shadowRoot\n        .querySelectorAll(\".item-fields\")\n        .forEach((item, index) => {\n          let prefix = `${this.propertyName}`;\n          this.dispatchEvent(\n            new CustomEvent(\"build-fieldset\", {\n              bubbles: false,\n              cancelable: true,\n              composed: true,\n              detail: {\n                container: item,\n                path: prefix,\n                prefix: prefix,\n                properties: this.schema.properties,\n                type: EcoJsonSchemaFieldset.tag,\n                value: this.schema.properties[index].value || {}\n              }\n            })\n          );\n        });\n    });\n  }\n}\nwindow.customElements.define(EcoJsonSchemaFieldset.tag, EcoJsonSchemaFieldset);\nexport { EcoJsonSchemaFieldset };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport {\n  encapScript,\n  wipeSlot\n} from \"@lrnwebcomponents/hax-body/lib/haxutils.js\";\nimport \"@polymer/marked-element/marked-element.js\";\n/**\n`eco-json-schema-tabs` takes in a JSON schema of type array and builds a form,\nexposing a `value` property that represents an array described by the schema.\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-tabs\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaMarkup extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-markup\";\n  }\n  static get template() {\n    return html`\n      <style include=\"iron-flex iron-flex-alignment\">\n        :host {\n          color: var(--eco-json-form-color);\n          background-color: var(--eco-json-form-bg);\n          font-family: var(--eco-json-form-font-family);\n        }\n        :host ([hidden]) {\n          display: none;\n        }\n      </style>\n      <div class=\"markup\">\n        <slot></slot>\n      </div>\n    `;\n  }\n  static get properties() {\n    return {\n      value: {\n        type: String,\n        notify: true,\n        value: \"\"\n      }\n    };\n  }\n  /**\n   * render the markup requested\n   */\n  _valueChanged(newValue) {\n    // clear self\n    wipeSlot(this);\n    // sanity check to ditch scripts\n    let html = encapScript(newValue);\n    let frag = document.createRange().createContextualFragment(html);\n    // self apend to flow into slot and show up\n    this.appendChild(frag);\n  }\n}\nwindow.customElements.define(EcoJsonSchemaMarkup.tag, EcoJsonSchemaMarkup);\nexport { EcoJsonSchemaMarkup };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@lrnwebcomponents/a11y-tabs/a11y-tabs.js\";\nimport { afterNextRender } from \"@polymer/polymer/lib/utils/render-status\";\n/**\n`eco-json-schema-tabs` takes in a JSON schema of type array and builds a form,\nexposing a `value` property that represents an array described by the schema.\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-tabs\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaTabs extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-tabs\";\n  }\n  static get template() {\n    return html`\n      <custom-style>\n        <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n          :host{\n            color: var(--eco-json-form-color);\n            background-color: var(--eco-json-form-bg);\n            font-family: var(--eco-json-form-font-family);\n            margin-bottom: 15px;\n          }\n          :host ([hidden]) {\n            display: none;\n          }\n          :host a11y-tabs {\n            --a11y-tabs-color: var(--eco-json-form-faded-color);\n            --a11y-tabs-focus-color: var(--eco-json-form-color);\n            --a11y-tabs-border-color: var(--eco-json-form-faded-color);\n            --a11y-tabs-border-radius: var(--eco-json-form-border-radius);\n            --a11y-tabs-background: var(--eco-json-form-bg);\n            --a11y-tabs-faded-background: var(--eco-json-form-faded-bg);\n            --a11y-tabs-justify-tabs: flex-start;\n            --ally-tabs-wrap: unset;\n            --a11y-tabs-content-padding: 8px 16px 16px;\n            --a11y-tabs-button-padding: 8px;\n            --a11y-tabs-vertical-button-padding: unset;\n            --a11y-tabs-horizontal-border-radius: unset;\n            --a11y-tabs-vertical-border-radius: unset;\n            --a11y-tabs-horizontal-button-padding: 2px 5px;\n          }\n          :host a11y-tabs:focus,\n          :host a11y-tabs:focus-within {\n            --a11y-tabs-border-color: : var(--eco-json-form-focus-color);\n          }\n          :host .tab-title {\n            position: absolute;\n            left: -99999px;\n            height: 0;\n            overflow: hidden;\n          }\n        </style>\n      </custom-style>\n      <a11y-tabs id$=\"[[schema.property]]\">\n        <template\n          is=\"dom-repeat\"\n          items=\"[[schema.properties]]\"\n          as=\"item\"\n          restamp\n        >\n          <a11y-tab\n            id$=\"item-[[index]]\"\n            icon$=\"[[item.icon]]\"\n            label$=\"[[item.label]]\"\n          >\n            <div hidden$=\"[[!item.description]]\">[[item.description]]</div>\n            <div\n              id$=\"[[item.property]]\"\n              class=\"item-fields\"\n              data-index$=\"[[index]]\"\n            ></div>\n          </a11y-tab>\n        </template>\n      </a11y-tabs>\n    `;\n  }\n  static get properties() {\n    return {\n      propertyName: {\n        type: String,\n        value: null\n      },\n      schema: {\n        type: Object,\n        value: {}\n      }\n    };\n  }\n  ready() {\n    super.ready();\n    this._schemaChanged();\n  }\n  /**\n   * updates the array fields if the schema (which includes values) changes\n   */\n  _schemaChanged() {\n    //make sure the content is there first\n    afterNextRender(this, () => {\n      this.shadowRoot.querySelectorAll(\".item-fields\").forEach(item => {\n        let index = item.getAttribute(\"data-index\"),\n          propertyName = this.propertyName,\n          tab = this.schema.properties[index],\n          prop = tab.name,\n          prefix = `${propertyName}.${prop}`;\n        this.dispatchEvent(\n          new CustomEvent(\"build-fieldset\", {\n            bubbles: false,\n            cancelable: true,\n            composed: true,\n            detail: {\n              container: item,\n              path: prefix,\n              prefix: prefix,\n              properties: tab.schema.properties,\n              type: EcoJsonSchemaTabs.tag,\n              value: tab.value || {}\n            }\n          })\n        );\n      });\n    });\n  }\n}\nwindow.customElements.define(EcoJsonSchemaTabs.tag, EcoJsonSchemaTabs);\nexport { EcoJsonSchemaTabs };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/paper-checkbox/paper-checkbox.js\";\nclass EcoJsonSchemaBoolean extends PolymerElement {\n  static get tag() {\n    return \"eco-json-schema-boolean\";\n  }\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        :host ([hidden]) {\n          display: none;\n        }\n        paper-checkbox {\n          display: block;\n          font-size: 16px;\n          white-space: normal;\n          margin: var(--eco-json-field-margin, 0 0 15px);\n          --paper-checkbox-checkmark-color: var(\n            --eco-json-form-bg,\n            var(--primary-background-color, #fff)\n          );\n          --paper-checkbox-unchecked-background-color: var(\n            --eco-json-form-bg,\n            var(--primary-background-color, #fff)\n          );\n          --paper-checkbox-checked-color: var(\n            --eco-json-form-active-color,\n            var(--primary-color, #000)\n          );\n          --paper-checkbox-unchecked-color: var(\n            --eco-json-form-active-color,\n            var(--primary-text-text-color, #222)\n          );\n          --paper-checkbox-label-color: var(\n            --eco-json-form-color,\n            var(--secondary-text-color, #888)\n          );\n        }\n        :host paper-checkbox:focus {\n          --paper-checkbox-unchecked-color: var(\n            --eco-json-form-active-color,\n            var(--primary-color, #000)\n          );\n          --paper-checkbox-label-color: var(\n            --eco-json-form-active-color,\n            var(--primary-text-text-color, #222)\n          );\n        }\n      </style>\n\n      <paper-checkbox\n        id=\"checkbox\"\n        class=\"flex\"\n        hidden$=\"[[hidden]]\"\n        checked=\"{{value}}\"\n        invalid=\"[[error]]\"\n        >[[_label]]</paper-checkbox\n      >\n    `;\n  }\n  static get properties() {\n    return {\n      schema: {\n        type: Object,\n        observer: \"_schemaChanged\"\n      },\n      value: {\n        type: Boolean,\n        notify: true,\n        value: false\n      },\n      error: {\n        type: Boolean,\n        value: false\n      },\n      _label: {\n        type: String,\n        notify: true,\n        value: \"\"\n      }\n    };\n  }\n  _schemaChanged() {\n    var schema = this.schema;\n    var inputEl = this.shadowRoot.querySelector(\"#checkbox\");\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    if (schema.title) {\n      this._label = schema.title;\n    }\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaBoolean.tag, EcoJsonSchemaBoolean);\nexport { EcoJsonSchemaBoolean };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu.js\";\nimport \"@polymer/paper-item/paper-item.js\";\nimport \"@polymer/paper-listbox/paper-listbox.js\";\nimport { IronValidatableBehavior } from \"@polymer/iron-validatable-behavior/iron-validatable-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\n\nclass EcoJsonSchemaEnum extends mixinBehaviors(\n  [IronValidatableBehavior],\n  PolymerElement\n) {\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        :host ([hidden]) {\n          display: none;\n        }\n        paper-input {\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n        }\n\n        paper-dropdown-menu {\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n          --paper-dropdown-menu-button: {\n            padding: 2px;\n          }\n        }\n      </style>\n\n      <paper-dropdown-menu\n        id=\"dropdown\"\n        class=\"layout horizontal vertical\"\n        value=\"{{value}}\"\n        required=\"\"\n      >\n        <paper-dropdown-menu class=\"dropdown-content\">\n          <paper-listbox slot=\"dropdown-content\" selected=\"0\">\n            <template is=\"dom-repeat\" items=\"[[_items]]\">\n              <paper-item class=\"flex\" label=\"[[item]]\">[[item]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </paper-dropdown-menu>\n    `;\n  }\n  static get tag() {\n    return \"eco-json-schema-enum\";\n  }\n  static get properties() {\n    return {\n      schema: {\n        type: Object,\n        observer: \"_schemaChanged\"\n      },\n      value: {\n        type: String,\n        notify: true,\n        value: null\n      },\n      error: {\n        type: String,\n        observer: \"_errorChanged\",\n        value: null\n      },\n      _items: {\n        type: Object,\n        value() {\n          return {};\n        }\n      }\n    };\n  }\n  _schemaChanged() {\n    var schema = this.schema;\n    var inputEl = this.shadowRoot.querySelector(\"#dropdown\");\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    this._items = schema.enum.filter(function(item) {\n      return item !== null;\n    });\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n  }\n  _errorChanged() {\n    if (this.error) {\n      this.shadowRoot.querySelector(\"#dropdown\").invalid = true;\n    } else {\n      this.shadowRoot.querySelector(\"#dropdown\").invalid = false;\n    }\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaEnum.tag, EcoJsonSchemaEnum);\nexport { EcoJsonSchemaEnum };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport { microTask } from \"@polymer/polymer/lib/utils/async.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\n/**\n`eco-json-schema-file` takes in a JSON schema of type number and string and\ncontains a `paper-input`, exposing a `value` property that represents the schema.\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-file\n* @demo demo/index.html\n*/\n\nclass EcoJsonSchemaFile extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-file\";\n  }\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        :host ([hidden]) {\n          display: none;\n        }\n        paper-input {\n          padding: 2px;\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n        }\n\n        :host {\n          display: inline-block;\n        }\n\n        .enabled {\n          border: 1px dashed #555;\n          @apply --file-upload-upload-border-enabled;\n        }\n\n        .hover {\n          opacity: 0.7;\n          border: 1px dashed #111;\n          @apply --file-upload-upload-border-hover;\n        }\n\n        #UploadBorder {\n          vertical-align: middle;\n          color: #555;\n          padding: 20px;\n          max-height: 300px;\n          overflow-y: auto;\n          display: inline-block;\n          @apply --file-upload-upload-border;\n        }\n\n        #dropArea {\n          text-align: center;\n          @apply --file-upload-drop-area;\n        }\n\n        paper-button#button {\n          margin-bottom: 20px;\n          @apply --file-upload-button;\n        }\n\n        .file {\n          padding: 10px 0px;\n          @apply --file-upload-file;\n        }\n\n        .commands {\n          float: right;\n          @apply --file-upload-commands;\n        }\n\n        .commands iron-icon:not([icon=\"check-circle\"]) {\n          cursor: pointer;\n          opacity: 0.9;\n          @apply --file-upload-commands-faded;\n        }\n\n        .commands iron-icon:hover {\n          opacity: 1;\n          @apply --file-upload-commands-hovered;\n        }\n\n        [hidden] {\n          display: none;\n        }\n\n        .error {\n          color: #f40303;\n          font-size: 11px;\n          margin-top: 2px;\n          @apply --file-upload-error;\n        }\n\n        .progress-bar {\n          margin-top: 2px;\n        }\n\n        paper-progress {\n          --paper-progress-active-color: #03a9f4;\n        }\n\n        paper-progress[error] {\n          --paper-progress-active-color: #f40303;\n        }\n      </style>\n\n      <div class=\"layout horizontal nowrap\">\n        <div>\n          <paper-button\n            id=\"button\"\n            on-click=\"_fileClick\"\n            alt=\"{{paperButtonAlt}}\"\n            raised=\"\"\n          >\n            <iron-icon icon=\"editor:attach-file\"></iron-icon\n            >{{paperButtonTitle}}</paper-button\n          >\n          <div id=\"UploadBorder\">\n            <div id=\"dropArea\" hidden\\$=\"{{!_shownDropText}}\">{{dropText}}</div>\n            <template is=\"dom-repeat\" items=\"{{files}}\">\n              <div class=\"file\">\n                <div class=\"name\">\n                  <span>{{item.name}}</span>\n                  <div class=\"commands\">\n                    <iron-icon\n                      icon=\"autorenew\"\n                      title=\"{{retryText}}\"\n                      on-click=\"_retryUpload\"\n                      hidden\\$=\"{{!item.error}}\"\n                    ></iron-icon>\n                    <iron-icon\n                      icon=\"cancel\"\n                      title=\"{{removeText}}\"\n                      on-click=\"_cancelUpload\"\n                      hidden\\$=\"{{item.complete}}\"\n                    ></iron-icon>\n                    <iron-icon\n                      icon=\"check-circle\"\n                      title=\"{{successText}}\"\n                      hidden\\$=\"{{!item.complete}}\"\n                    ></iron-icon>\n                  </div>\n                </div>\n                <div class=\"error\" hidden\\$=\"{{!item.error}}\">\n                  {{errorText}}\n                </div>\n              </div>\n            </template>\n          </div>\n        </div>\n        <input\n          type=\"file\"\n          id=\"fileInput\"\n          on-change=\"_fileChange\"\n          hidden=\"\"\n          multiple=\"{{multi}}\"\n          accept=\"{{accept}}\"\n        />\n      </div>\n    `;\n  }\n  static get properties() {\n    return {\n      language: {\n        value: \"en\",\n        notify: true\n      },\n      resources: {\n        value() {\n          return {};\n        },\n        notify: true\n      },\n      schema: {\n        type: Object,\n        observer: \"_schemaChanged\"\n      },\n      value: {\n        type: Object,\n        notify: true,\n        value() {\n          return {};\n        },\n        observer: \"_valueChanged\"\n      },\n      /**\n      error: {\n        type: String,\n        observer: '_errorChanged',\n        value: null\n      },\n      */\n\n      /**\n       * `target` is the target url to upload the files to.\n       * Additionally by adding '<name>' in your url, it will be replaced by\n       * the file name.\n       */\n      target: {\n        type: String,\n        value: \"\"\n      },\n\n      /**\n       * `accept` is the set of comma separated file extensions or mime types\n       * to filter as accepted.\n       */\n      accept: {\n        type: String,\n        value: \"\"\n      },\n\n      /**\n       * `droppable` indicates whether or not to allow file drop.\n       */\n      droppable: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * `dropText` is the  text to display in the file drop area.\n       */\n      dropText: {\n        type: String,\n        value: \"Drop Files Here\"\n      },\n\n      /**\n       * `multi` indicates whether or not to allow multiple files to be uploaded.\n       */\n      multi: {\n        type: Boolean,\n        value: true\n      },\n\n      /**\n       * `files` is the list of files to be uploaded\n       */\n      files: {\n        type: Array,\n        notify: true,\n        value() {\n          return [];\n        }\n      },\n\n      /**\n       * `raised` indicates whether or not the button should be raised\n       */\n      raised: {\n        type: Boolean,\n        value: true\n      },\n\n      /**\n       * `noink` indicates that the button should not have an ink effect\n       */\n      noink: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * `headers` is a key value map of header names and values\n       */\n      headers: {\n        type: Object,\n        value: {}\n      },\n\n      /**\n       * `retryText` is the text for the tooltip to retry an upload\n       */\n      retryText: {\n        type: String,\n        value: \"Retry Upload\"\n      },\n\n      /**\n       * `removeText` is the text for the tooltip to remove an upload\n       */\n      removeText: {\n        type: String,\n        value: \"Remove\"\n      },\n\n      /**\n       * `successText` is the text for the tooltip of a successful upload\n       */\n      successText: {\n        type: String,\n        value: \"Success\"\n      },\n\n      /**\n       * `errorText` is the text to display for a failed upload\n       */\n      errorText: {\n        type: String,\n        value: \"Error uploading file...\"\n      },\n\n      /**\n       * `_shownDropText` indicates whether or not the drop text should be shown\n       */\n      _shownDropText: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * `additional` object of key-pair values to send additional values along with file.\n       */\n      additional: {\n        type: Object,\n        value: {}\n      },\n\n      /**\n       * `fileDataName` is the name for the file data in the `formData` object.\n       */\n      fileDataName: {\n        type: String,\n        value: \"file\"\n      },\n\n      /**\n       * `paperButtonAlt` allows changing the alt property on the paper button\n       */\n      paperButtonAlt: {\n        type: String,\n        value: \"\"\n      },\n\n      /**\n       * `paperButtonTitle` allows changing the title property on the paper button\n       */\n      paperButtonTitle: {\n        type: String,\n        value: \"\"\n      }\n    };\n  }\n  /**\n   * Clears the list of files\n   */\n  clear() {\n    this.set(\"files\", []);\n    this.shadowRoot.querySelector(\"#fileInput\").value = \"\";\n    this._showDropText();\n  }\n\n  ready() {\n    super.ready();\n\n    if (this.raised) {\n      this.toggleAttribute(\n        \"raised\",\n        true,\n        this.shadowRoot.querySelector(\"#button\")\n      );\n    }\n    if (this.noink) {\n      this.toggleAttribute(\n        \"noink\",\n        true,\n        this.shadowRoot.querySelector(\"#button\")\n      );\n    }\n    if (this.droppable) {\n      this._showDropText();\n      this.setupDrop();\n    }\n  }\n\n  /**\n   * A function to set up a drop area for drag-and-drop file uploads\n   */\n  setupDrop() {\n    var uploadBorder = this.shadowRoot.querySelector(\"#UploadBorder\");\n    this.toggleClass(\"enabled\", true, uploadBorder);\n\n    this.ondragover = function(e) {\n      e.stopPropagation();\n      this.toggleClass(\"hover\", true, uploadBorder);\n\n      // Workaround for allowgin drop from Chome's download footer on OSX\n      // See https://bugs.chromium.org/p/chromium/issues/detail?id=234931\n      var effect = e.dataTransfer && e.dataTransfer.dropEffect;\n      var effectAllowed = e.dataTransfer && e.dataTransfer.effectAllowed;\n      if (effect === \"none\" && effectAllowed !== \"none\") {\n        e.dataTransfer.dropEffect = effectAllowed === \"move\" ? \"move\" : \"copy\";\n      }\n      // end of workaround\n\n      return false;\n    };\n\n    this.ondragleave = function() {\n      this.toggleClass(\"hover\", false, uploadBorder);\n      return false;\n    };\n\n    this.ondrop = function(event) {\n      this.toggleClass(\"hover\", false, uploadBorder);\n      event.preventDefault();\n\n      // Check if multiple upload is allowed\n      if (!this.multi && this.files.length !== 0) {\n        return;\n      }\n\n      var length = event.dataTransfer.files.length;\n      for (var i = 0; i < length; i++) {\n        var file = event.dataTransfer.files[i];\n        //if (this.value.indexOf(window.btoa(unescape(encodeURIComponent(file.name)))) >= 0 ) {\n        //  continue;\n        //}\n        // Check if filetype is accepted\n        var mimeType =\n          file.type !== \"\" ? file.type.match(/^[^\\/]*\\//)[0] : null;\n        var fileType = file.name.match(/\\.[^\\.]*$/)[0];\n        if (\n          this.accept !== \"\" &&\n          !(\n            this.accept.indexOf(mimeType) > -1 ||\n            this.accept.indexOf(fileType) > -1\n          )\n        ) {\n          continue;\n        }\n\n        file.progress = 0;\n        file.error = false;\n        file.complete = false;\n        this.push(\"files\", file);\n        this.uploadFile(file);\n      }\n    };\n  }\n\n  /**\n   * Clicks the invisible file input\n   */\n  _fileClick() {\n    var elem = this.shadowRoot.querySelector(\"#fileInput\");\n    if (elem && document.createEvent) {\n      // sanity check\n      var evt = document.createEvent(\"MouseEvents\");\n      evt.initEvent(\"click\", true, false);\n      elem.dispatchEvent(evt);\n    }\n  }\n\n  /**\n   * Called whenever the list of selected files changes\n   *\n   * @param {object} e An event object\n   */\n  _fileChange(e) {\n    var length = e.target.files.length;\n    for (var i = 0; i < length; i++) {\n      var file = e.target.files[i];\n      file.progress = 0;\n      file.error = false;\n      file.complete = false;\n      this.push(\"files\", file);\n      if (!this.multi && this.files.length !== 0) {\n        this.set(\"files\", []);\n        this.set(\"value\", {});\n      }\n      this.uploadFile(file);\n    }\n  }\n\n  /**\n   * Cancels the file upload for a specific file\n   *\n   * @param {object} file An element of the files array\n   */\n  cancel(file) {\n    if (file) {\n      if (file.xhr) {\n        file.xhr.abort();\n      }\n      this.splice(\"files\", this.files.indexOf(file), 1);\n      this._showDropText();\n    }\n  }\n\n  /**\n   * Cancels the file upload\n   *\n   * @param {object} e An event object\n   */\n  _cancelUpload(e) {\n    this.cancel(e.model.__data__.item);\n  }\n\n  /**\n   * Retries to upload the file\n   *\n   * @param {object} e An event object\n   */\n  _retryUpload(e) {\n    e.model.set(\"item.error\", false);\n    e.model.set(\"item.progress\", 0);\n    // The async helps give visual feedback of a retry occurring, even though it's less efficient.\n    var self = this;\n    microTask.run(() => {\n      self.uploadFile(e.model.__data__.item);\n    });\n  }\n\n  /**\n   * Whether or not to display the drop text\n   */\n  _showDropText() {\n    this.set(\"_shownDropText\", !this.files.length && this.droppable);\n  }\n\n  /**\n   * Uploads a file\n   *\n   * @param {object} file An element of the files array\n   */\n  uploadFile(file) {\n    if (!file) {\n      return;\n    }\n    this.dispatchEvent(\n      new CustomEvent(\"before-upload\", {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: true\n      })\n    );\n    this._showDropText();\n    var prefix = \"files.\" + this.files.indexOf(file);\n    var self = this;\n\n    var reader = new FileReader();\n\n    reader.addEventListener(\n      \"load\",\n      function() {\n        var r = reader.result;\n        //self.push('value', {\"name\": unescape(encodeURIComponent( file.name )),\"content\":r});\n        //self.value.push({\"name\": unescape(encodeURIComponent( file.name )),\"content\":r});\n        //console.log('value.'+self.files.indexOf(file));\n        self.set(\n          \"value.\" +\n            self.attributes.name.value +\n            \".\" +\n            self.files.indexOf(file),\n          r\n        );\n        //self.notifyPath('value');\n      },\n      false\n    );\n\n    if (!self.value.hasOwnProperty(self.attributes.name.value)) {\n      this.set(\"value.\" + self.attributes.name.value, {});\n    }\n    reader.readAsDataURL(file);\n  }\n  _valueChanged() {\n    console.log(\"this.value: \" + JSON.stringify(this.value));\n  }\n  _schemaChanged() {\n    var schema = this.schema;\n    /*\n    var inputEl = this.shadowRoot.querySelector('#fileInput');\n    if (schema.required) {\n      inputEl.required = true;\n    }\n    //inputEl.type = 'file';\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n    */\n\n    /*\n    inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n    */\n  }\n  /*\n  _errorChanged() {\n    if (this.error) {\n      this.shadowRoot.querySelector('#fileInput').errorMessage = this.error;\n      this.shadowRoot.querySelector('#fileInput').invalid = true;\n    } else {\n      this.shadowRoot.querySelector('#fileInput').invalid = false;\n      this.shadowRoot.querySelector('#fileInput').errorMessage = null;\n    }\n  },\n  */\n  _isSchemaValue(type) {\n    return this._isSchemaFile(type);\n  }\n  _isSchemaFile(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n  stringify(s) {\n    return JSON.stringify(s);\n  }\n}\nwindow.customElements.define(EcoJsonSchemaFile.tag, EcoJsonSchemaFile);\nexport { EcoJsonSchemaFile };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/paper-styles/typography.js\";\n/**\n`eco-json-schema-input` takes in a JSON schema of type number and string and\ncontains a `paper-input`, exposing a `value` property that represents the schema.\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-input\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaInput extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-input\";\n  }\n  static get template() {\n    return html`\n      <custom-style>\n        <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n          :host ([hidden]) {\n            display: none;\n          }\n        </style>\n      </custom-style>\n      <paper-input\n        id=\"input\"\n        class=\"flex\"\n        value=\"{{value}}\"\n        auto-validate\n      ></paper-input>\n    `;\n  }\n\n  static get properties() {\n    return {\n      language: {\n        value: \"en\"\n      },\n      resources: {\n        value() {\n          return {};\n        }\n      },\n      schema: {\n        type: Object,\n        observer: \"_schemaChanged\"\n      },\n      value: {\n        type: String,\n        notify: true,\n        value() {\n          return \"\";\n        }\n      },\n      error: {\n        type: String,\n        observer: \"_errorChanged\",\n        value: null\n      }\n    };\n  }\n  _schemaChanged() {\n    var schema = this.schema;\n    var inputEl = this.shadowRoot.querySelector(\"#input\");\n    if (schema.required) {\n      inputEl.required = true;\n    }\n    if (this._isSchemaNumber(schema.type)) {\n      inputEl.type = \"number\";\n\n      if (schema.multipleOf) {\n        inputEl.step = schema.multipleOf;\n      }\n\n      if (!isNaN(schema.maximum)) {\n        if (schema.exclusiveMaximum) {\n          inputEl.max = schema.maximum - (schema.multipleOf || 1);\n        } else {\n          inputEl.max = schema.maximum;\n        }\n      }\n\n      if (!isNaN(schema.minimum)) {\n        if (schema.exclusiveMinimum) {\n          inputEl.min = schema.minimum + (schema.multipleOf || 1);\n        } else {\n          inputEl.min = schema.minimum;\n        }\n      }\n    }\n\n    if (this._isSchemaString(schema.type)) {\n      if (schema.format === \"date-time\") {\n        inputEl.type = \"datetime-local\";\n        inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n      } else if (schema.format === \"date\") {\n        inputEl.type = \"date\";\n      } else if (schema.format === \"email\") {\n        inputEl.type = \"email\";\n      } else if (schema.format === \"hostname\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"ipv4\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"ipv6\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"uri\") {\n        inputEl.type = \"url\";\n      } else {\n        inputEl.type = \"text\";\n      }\n\n      /*\n        if (schema.maxLength || schema.minLength) {\n          inputEl.charCounter = true;\n        }\n       */\n\n      if (schema.maxLength) {\n        inputEl.maxlength = schema.maxLength;\n      }\n\n      if (schema.minLength) {\n        inputEl.minlength = schema.minLength;\n      }\n\n      if (schema.pattern) {\n        inputEl.pattern = schema.pattern;\n      }\n    }\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n  }\n  _errorChanged() {\n    if (this.error) {\n      this.shadowRoot.querySelector(\"#input\").errorMessage = this.error;\n      this.shadowRoot.querySelector(\"#input\").invalid = true;\n    } else {\n      this.shadowRoot.querySelector(\"#input\").invalid = false;\n      this.shadowRoot.querySelector(\"#input\").errorMessage = null;\n    }\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaInput.tag, EcoJsonSchemaInput);\nexport { EcoJsonSchemaInput };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/polymer/lib/elements/dom-if.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"./eco-json-schema-array.js\";\nimport \"./eco-json-schema-fieldset.js\";\nimport \"./eco-json-schema-markup.js\";\nimport \"./eco-json-schema-tabs.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-file.js\";\nimport \"./eco-json-schema-input.js\";\n/**\n`eco-json-schema-object` takes in a JSON schema of type object and builds a form,\nexposing a `value` property that represents an object described by the schema.\n\nGiven the element:\n\n```\n<eco-json-schema-object schema=\"[[schema]]\" value=\"{{value}}\"></eco-json-schema-object>\n```\n\nAnd a JSON schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\"\n    }\n  }\n}\n```\n\nA form will be generated, with the elements `value` looking something like this:\n\n```\n> this.value\n{\n  \"name\": \"Eric\"\n}\n```\n\nDeep / nested schemas are supported for type array and object:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\"\n    },\n    \"email\": {\n      \"title\": \"email\",\n      \"type\": \"string\",\n      \"format\": \"email\"\n    }\n  }\n}\n```\n\nCustomizing components for schema properties is supported by extending your JSON\nschema. For any schema sub-property (`properties` for `\"type\": \"object\"` and\n`items` for `\"type\": \"array\"`) a `component` property may be specified, with\nthe following options:\n\n- `component.name` - specifies the name of the custom component to use\n- `component.valueProperty` - specifies which property of the custom element\n  represents its value\n- `component.properties` - properties that will be set on the element\n\nExample schema using custom components (note that `\"valueProperty\": \"value\"` is\nredundant in this case, `\"valueProperty\": \"value\"` will be the default if not specified):\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"phoneNumber\": {\n      \"title\": \"Phone Number\",\n      \"type\": \"string\",\n      \"component\": {\n        \"name\": \"gold-phone-input\",\n        \"valueProperty\": \"value\",\n        \"properties\": {\n          \"countryCode\": \"1\"\n        }\n      }\n    }\n  }\n}\n```\n\nItems set in `component.properties` will override any attributes / properties set\nby `eco-json-schema-form` elements, making it possible to override JSON schema\nvalidation properties mapped to `paper-input` attributes:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    }\n  }\n}\n```\n\nPutting it all together, this schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    },\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\",\n            \"component\": {\n              \"name\": \"gold-phone-input\",\n              \"valueProperty\": \"value\",\n              \"properties\": {\n                \"countryCode\": \"1\"\n              }\n            }\n          }\n        }\n      }\n    },\n    \"emailAddresses\": {\n      \"title\": \"Emails\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"email\": {\n            \"title\": \"email\",\n            \"type\": \"string\",\n            \"format\": \"email\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nWill build a form describing an object:\n\n```\n> this.value\n{\n  \"name\": \"Eric\",\n  \"age\": 28,\n  \"postalCode\": \"H1W 2C5\",\n  \"phoneNumbers\": [\n    {\n      \"type\": \"Mobile\",\n      \"phoneNumber\": \"123-456-7890\"\n    }\n  ]\n  \"emailAddresses\": [\n    {\n      \"type\": \"Personal\",\n      \"email\": \"eric@wat.com\"\n    }\n  ]\n}\n```\n\nExternal validation is supported via the `error` property. By providing an\nobject tree with each leaf representing an error message for properties, the\nmessage will be attached to the appropriate element.\n\nExample, for the Contact schema:\n\n```\nel.error = {\n  \"name\": \"String is too short (0 chars) minimum 2\",\n  \"phoneNumbers\": [\n    {\n      \"phoneNumber\": \"String does not match required format\"\n    }\n  ]\n}\n```\n\n@group eco Elements\n@element eco-json-schema-object\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaObject extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-object\";\n  }\n\n  static get template() {\n    return html`\n      <custom-style>\n        <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n          :host {\n            --eco-json-field-margin: 0 0 15px;\n            --eco-json-form-border-radius: 2px;\n            --eco-json-form-font-family: var(\n              --paper-font-caption_-_font-family,\n              unset\n            );\n            --eco-json-form-bg: var(--primary-background-color, #fff);\n            --eco-json-form-color: var(--primary-text-color, #222);\n            --eco-json-form-faded-color: #888;\n            --eco-json-form-active-color: var(--primary-color, #000);\n            --eco-json-form-faded-bg: #f0f0f0;\n            --eco-json-form-add-color: #008811;\n            --eco-json-form-add-focus: #007700;\n            --eco-json-form-remove-focus: #cc0000;\n            --eco-json-form-remove-color: #dd0000;\n            --simple-picker-float-label-color: var(--eco-json-form-faded-color);\n            --simple-picker-float-label-active-color: var(\n              --eco-json-form-active-color\n            );\n            --simple-picker-background-color: var(--eco-json-form-bg);\n            --simple-picker-border-color: var(--eco-json-form-faded-color);\n            --simple-picker-focus-border-color: var(\n              --eco-json-form-active-color\n            );\n            --simple-picker-focus-border-width: 2px;\n            --paper-input-container: {\n              padding-top: 0;\n            }\n          }\n          div.layout {\n            height: auto;\n          }\n          #form {\n            display: block;\n            font-family: var(--eco-json-form-font-family);\n            background-color: var(--eco-json-form-bg);\n            color: var(--eco-json-form-color);\n            --paper-tooltip-background: var(--eco-json-form-active-color);\n            --paper-tooltip-text-color: var(--eco-json-form-bg);\n            @apply --eco-json-schema-object-form;\n            @apply --layout-vertical;\n            @apply --layout-wrap;\n          }\n          #form ::slotted(paper-input) {\n            margin-bottom: 15px;\n          }\n          #form ::slotted(*.has-tooltip-desc) {\n            margin-bottom: 0;\n            padding-bottom: 0;\n            --paper-input-container: {\n              margin-bottom: 0;\n              padding-bottom: 0;\n            }\n          }\n          #form ::slotted(div.tooltip-desc) {\n            font-size: 12px;\n            margin: var(--eco-json-field-margin);\n            color: var(--eco-json-form-faded-color);\n          }\n          #form ::slotted(paper-input),\n          #form ::slotted(div.tooltip-desc) {\n            font-family: var(--eco-json-form-font-family);\n          }\n          #form ::slotted(div.desc-for-paper-textarea) {\n            margin-top: -18px;\n            margin-right: 35px;\n          }\n          #form ::slotted(code-editor) {\n            margin: 8px 0;\n            padding: 0;\n            --code-editor-float-label-color: var(--eco-json-form-faded-color);\n            --code-editor-float-label-active-color: var(\n              --eco-json-form-active-color\n            );\n            --code-pen-button-color: var(--eco-json-form-faded-color);\n            --code-editor-code: {\n              border: 1px solid var(--eco-json-form-faded-color);\n              border-radius: 2px;\n            }\n            --code-editor-focus-code: {\n              border: 2px solid var(--eco-json-form-active-color);\n            }\n          }\n        </style>\n      </custom-style>\n\n      <template is=\"dom-if\" if=\"{{!wizard}}\">\n        <div class=\"header\" hidden\\$=\"[[!label]]\">[[label]]</div>\n      </template>\n      <div class=\"layout vertical flex start-justified\">\n        <div\n          id=\"form\"\n          class=\"layout horizontal flex start-justified\"\n          aria-live=\"polite\"\n        >\n          <slot></slot>\n        </div>\n      </div>\n    `;\n  }\n  static get properties() {\n    return {\n      language: {\n        value: \"en\"\n      },\n      resources: {\n        value() {\n          return {};\n        }\n      },\n      schema: {\n        type: Object,\n        notify: true,\n        observer: \"_schemaChanged\"\n      },\n      label: {\n        type: String\n      },\n      value: {\n        type: Object,\n        notify: true,\n        value() {\n          return {};\n        }\n      },\n      error: {\n        type: Object,\n        observer: \"_errorChanged\"\n      },\n      wizard: {\n        type: Boolean,\n        notify: true\n      },\n      /**\n       * the name of the code-editor theme\n       */\n      codeTheme: {\n        type: String,\n        value: \"vs-light-2\"\n      },\n      /**\n       * automatically set focus on the first field if that field has autofocus\n       */\n      autofocus: {\n        type: Boolean,\n        value: false\n      }\n    };\n  }\n  disconnectedCallback() {\n    this._clearForm();\n    super.disconnectedCallback();\n  }\n  /**\n   * returns an array of properties for a given schema object\n   * @param {object} thisSchema the source schema\n   * @returns {array} an array\n   */\n  _buildSchemaProperties(thisSchema = this.schema) {\n    var ctx = this;\n    return Object.keys(thisSchema.properties || []).map(key => {\n      var schema = thisSchema.properties[key];\n      var property = {\n        name: key,\n        schema: schema,\n        label: schema.title || key,\n        description: schema.description,\n        component: schema.component || {}\n      };\n      if (!property.component.valueProperty) {\n        property.component.valueProperty = \"value\";\n      }\n      if (!property.component.slot) {\n        property.component.slot = \"\";\n      }\n      if (ctx._isSchemaEnum(schema)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-enum\";\n        if (typeof schema.value === typeof undefined) {\n          schema.value = \"\";\n        }\n        property.value = schema.value;\n      } else if (ctx._isSchemaBoolean(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-boolean\";\n        if (typeof schema.value === typeof undefined) {\n          schema.value = false;\n        }\n        property.value = schema.value;\n      } else if (ctx._isSchemaFile(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-file\";\n        if (typeof schema.value === typeof undefined) {\n          schema.value = {};\n        }\n        property.value = schema.value;\n      } else if (ctx._isSchemaValue(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-input\";\n        if (typeof schema.value === typeof undefined) {\n          schema.value = \"\";\n        }\n        property.value = schema.value;\n      } else if (ctx._isSchemaObject(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-object\";\n        if (typeof schema.value === typeof undefined) {\n          schema.value = {};\n        }\n        property.value = schema.value;\n      } else if (ctx._isSchemaArray(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-array\";\n        this._buildNestedSchemaProperties(property, schema);\n      } else if (ctx._isSchemaFieldset(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-fieldset\";\n        this._buildNestedSchemaProperties(property, schema);\n      } else if (ctx._isSchemaTabs(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-tabs\";\n        this._buildNestedSchemaProperties(property, schema);\n      } else if (ctx._isSchemaMarkup(schema.type)) {\n        property.component.name =\n          property.component.name || \"eco-json-schema-markup\";\n        if (typeof schema.value === typeof undefined) {\n          schema.value = \"\";\n        }\n        property.value = schema.value;\n      } else {\n        return console.error(\"Unknown property type %s\", schema.type);\n      }\n      return property;\n    });\n  }\n  /**\n   * adds array of nested sub-properties to a given property based on a given schema\n   * @param {object} property the property that will have nested subproperties\n   * @param {object} schema the schema that has nested subschemas\n   */\n  _buildNestedSchemaProperties(property, schema) {\n    if (typeof schema.value === typeof undefined)\n      schema.value = schema.type !== \"array\" ? {} : [];\n    property.value = schema.value;\n    for (let key in schema.items.properties) {\n      schema.items.properties[key].value = schema.value[key];\n    }\n    property.schema.properties = this._buildSchemaProperties(\n      schema.items,\n      property.property + \".\"\n    );\n  }\n  /**\n   * updates the value when a schema property (or subproperty) changes\n   * @param {event} event the\n   * @param {object} detail the event details\n   */\n  _schemaPropertyChanged(event, detail) {\n    if (detail) {\n      if (detail.path && /\\.length$/.test(detail.path)) {\n        return;\n      }\n      var ctx = this;\n      var property = event.target.schemaProperty;\n\n      var path = [\"value\"].concat(\n        `${event.target.propertyPrefix}${event.target.propertyName}`.split(\".\")\n      );\n      var prop = property.property || event.target.propertyName;\n      var val = detail && detail.value ? this._deepClone(detail.value) : null;\n      if (detail.path && /\\.splices$/.test(detail.path)) {\n        var parts = detail.path.split(\".\").slice(1, -1);\n        while (parts.length) {\n          path.push(parts.shift());\n          if (property.keyMap && property.keyMap[path.join(\".\")]) {\n            path = property.keyMap[path.join(\".\")].split(\".\");\n          }\n        }\n\n        if (detail.value.keySplices) {\n          if (property.keyMap) {\n            detail.value.keySplices.forEach(splice => {\n              splice.removed.forEach(k => {\n                delete property.keyMap[path.concat([k]).join(\".\")];\n              });\n            });\n          }\n        }\n\n        if (detail.value) {\n          detail.value.indexSplices.forEach(splice => {\n            var args = [path.join(\".\"), splice.index, splice.removed.length];\n            if (splice.addedCount) {\n              for (var i = 0, ii = splice.addedCount; i < ii; i++) {\n                if (splice.addedKeys && splice.addedKeys[i]) {\n                  property.keyMap = property.keyMap || {};\n                  property.keyMap[\n                    path.concat([splice.addedKeys[i]]).join(\".\")\n                  ] = path.concat([i + splice.index]).join(\".\");\n                }\n                args.push(ctx._deepClone(splice.object[i + splice.index]));\n              }\n            }\n            ctx.splice.apply(ctx, args);\n          });\n        }\n      } else if (detail.path) {\n        var parts = detail.path.split(\".\").slice(1);\n        var v = this.value;\n        if (!v.hasOwnProperty(property.property)) {\n          this.set(\"value.\" + property.property, {});\n          this.notifyPath(\"value.\" + property.property);\n        }\n        while (parts.length) {\n          var k = parts.shift();\n          path.push(k);\n          if (property.keyMap && property.keyMap[path.join(\".\")]) {\n            path = property.keyMap[path.join(\".\")].split(\".\");\n          }\n        }\n        this.set(path.join(\".\"), this._deepClone(detail.value));\n        this.notifyPath(path.join(\".\"));\n      } else {\n        //most of our fields will just set the value this way\n        this.set(path.join(\".\"), this._deepClone(detail.value));\n        this.notifyPath(\"value\");\n      }\n      //fire an event to let array listeners handle changed fields\n      event.target.dispatchEvent(\n        new CustomEvent(\"form-field-changed\", {\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: event.target\n        })\n      );\n      this.dispatchEvent(\n        new CustomEvent(\"value-changed\", {\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: this\n        })\n      );\n    }\n  }\n  /**\n   * sets the value based on a the schema properties (or a subproperties and a path)\n   * @param {array} props the schema properties (default) or subproperties\n   * @param {string} path the string that indicates the path for subproperties\n   */\n  _setValue(props = this._schemaProperties, path = \"\") {\n    let setter = path.replace(/\\[(\\d+)\\]/g, \".$1\");\n    if (setter != \"\") setter = `.${setter}`;\n    if (props.length > 0) {\n      props.forEach(property => {\n        if (typeof property.value !== typeof undefined) {\n          this.set(\n            `value${setter}.${property.property}`,\n            this._deepClone(property.value),\n            JSON.stringify(property.value)\n          );\n        }\n      });\n      this.notifyPath(\"value.*\");\n    }\n  }\n  /**\n   * builds form fields and appends them to an element\n   * @param {array} props the schema properties (default) or subproperties\n   * @param {object} container optional container element the for the form fields (for subproperties)\n   * @param {string} prefix optional field name prefix (for subproperties)\n   */\n  _buildForm(props = this._schemaProperties, container = this, prefix = \"\") {\n    let autofocus = this.autofocus;\n    props.forEach(property => {\n      if (property.component.name === \"code-editor\") {\n        // special case, can't come up with a better way to do this but monoco is very special case\n        property.schema.component.properties.editorValue =\n          property.schema.value;\n        property.schema.component.properties.theme = this.codeTheme;\n      }\n      let propertyPrefix = prefix !== \"\" ? `${prefix}.` : ``,\n        propertyName = property.property || property.name;\n      var el = this.create(property.component.name, {\n        label: property.label,\n        schema: property.schema,\n        schemaProperty: property,\n        propertyPrefix: propertyPrefix,\n        propertyName: propertyName,\n        language: this.language,\n        resources: this.resources\n      });\n      if (property.component.name === \"paper-input\") {\n        el.style[\"background-color\"] = \"transparent\";\n        el.style[\"width\"] = \"100%\";\n      }\n      el.setAttribute(\"name\", `${propertyPrefix}${propertyName}`);\n      if (property.schema.hidden && property.schema.hidden !== undefined) {\n        el.setAttribute(\"hidden\", property.schema.hidden);\n      }\n\n      //allows the first form fields to be focused on autopmatically\n      if (autofocus) el.setAttribute(\"autofocus\", autofocus);\n      //turns of focus on subsequent form fields\n      autofocus = false;\n      el.className = \"flex start-justified\";\n      // set the element's default value to be what was passed into the schema\n      el[property.component.valueProperty] = property.value;\n      // support component attribute overrides\n      for (var attr in property.component.attributes) {\n        el.setAttribute(attr, property.component.attributes[attr]);\n      }\n      // support component property overrides\n      for (var prop in property.component.properties) {\n        el[prop] = property.component.properties[prop];\n      }\n      this.listen(\n        el,\n        property.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n      this.listen(el, \"build-fieldset\", \"_onBuildFieldset\");\n\n      if (typeof this.$ !== typeof undefined) {\n        container.appendChild(el);\n        if (property.description) {\n          var id = \"tip-\" + property.property,\n            tip = document.createElement(\"div\");\n          el.setAttribute(\"aria-describedby\", id);\n          el.setAttribute(\"class\", \"has-tooltip-desc\");\n          tip.setAttribute(\"id\", id);\n          tip.setAttribute(\n            \"class\",\n            \"tooltip-desc desc-for-\" + property.component.name\n          );\n          if (property.schema.hidden === true)\n            tip.setAttribute(\"hidden\", \"hidden\");\n          tip.setAttribute(\"role\", \"tooltip\");\n          tip.innerHTML = property.description;\n          container.appendChild(tip);\n        }\n      }\n      // support for slot injection too!\n      if (property.component.slot != \"\") {\n        let temp = document.createElement(\"div\");\n        temp.innerHTML = property.component.slot;\n        let cloneDiv = temp.cloneNode(true);\n        while (cloneDiv.firstChild !== null) {\n          el.appendChild(cloneDiv.firstChild);\n        }\n      }\n      this.dispatchEvent(\n        new CustomEvent(\"form-changed\", {\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: this\n        })\n      );\n    });\n  }\n  /**\n   * handles fieldset requests from containers like fieldsets, tabs, or arrays\n   * @param {event} event the \"build-fieldset\" event\n   * @param {object} detail the details of the event, as in:```\n{\n  prefix: the prefix for the fields \n  properties: []     //an array of schema properties,\n  container: <div/>  //the container element,\n}\n  ```\n   */\n  _onBuildFieldset(event, detail) {\n    if (typeof this.get(`value.${detail.prefix}`) === typeof undefined)\n      this.set(`value.${detail.path}`, this._deepClone(detail.value));\n    this._clearForm(detail.container);\n    this._buildForm(detail.properties, detail.container, detail.prefix);\n  }\n  /**\n   * removes a field element\n   * @param {object} el the element to remove\n   * @param {*} parent the container where the field element exists\n   */\n  _removePropertyEl(el, parent = this) {\n    if (typeof el.schemaProperty !== typeof undefined) {\n      this.unlisten(\n        el,\n        el.schemaProperty.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n    }\n    el.schemaProperty = null;\n    parent.removeChild(el);\n  }\n  /**\n   * clears a form or a fieldset container within a form\n   * @param {object} el the element to remove\n   * @param {*} parent the container where the field element exists\n   */\n  _clearForm(container = this) {\n    if (typeof this.$ !== typeof undefined) {\n      var formEl = container;\n      while (formEl.firstChild) {\n        this._removePropertyEl(formEl.firstChild, container);\n      }\n    }\n  }\n  /**\n   * updates the form when the schema changes\n   * @param {object} newValue the new value for the schema\n   * @param {object} oldValue the old value for the schema\n   */\n  _schemaChanged(newValue, oldValue) {\n    if (newValue && newValue !== oldValue) {\n      this._clearForm();\n      this._schemaProperties = this._buildSchemaProperties();\n      this._buildForm();\n      this._setValue();\n    }\n  }\n  /**\n   * handles errors\n   * @todo how do we want to handle errors for nested fields?\n   */\n  _errorChanged() {\n    /*\n    console.log(\n      \"_errorChanged\",\n      this,\n      this.querySelectorAll(\"[name]\"),\n      this.error\n    );*/\n    this.childNodes.forEach(el => {\n      var name = el.getAttribute(\"name\");\n      if (this.error && this.error[name]) {\n        el.error = this.error[name];\n      } else {\n        el.error = null;\n      }\n    });\n  }\n  /**\n   * clones an object and all its subproperties\n   * @param {object} o the object to clone\n   * @returns {object} the cloned object\n   */\n  _deepClone(o) {\n    return JSON.parse(JSON.stringify(o));\n  }\n\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  }\n  _isSchemaFile(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaEnum(schema) {\n    return !!schema.enum;\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n  _isSchemaFieldset(type) {\n    return type === \"fieldset\";\n  }\n  _isSchemaTabs(type) {\n    return type === \"tabs\";\n  }\n  _isSchemaMarkup(type) {\n    return type === \"markup\";\n  }\n  focus() {\n    //console.log(this);\n  }\n}\nwindow.customElements.define(EcoJsonSchemaObject.tag, EcoJsonSchemaObject);\nexport { EcoJsonSchemaObject };\n","import { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/iron-icons/image-icons.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/iron-pages/iron-pages.js\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar.js\";\nimport \"@polymer/paper-menu-button/paper-menu-button.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/paper-ripple/paper-ripple.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport { mixinBehaviors } from \"@polymer/polymer/lib/legacy/class.js\";\nimport \"./eco-json-schema-object.js\";\nimport \"./eco-json-schema-array.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-file.js\";\nimport \"./eco-json-schema-input.js\";\n\n/**\n`eco-json-schema-wizard` takes in a JSON schema of type object and builds a form,\nexposing a `value` property that represents an object described by the schema.\n\nGiven the element:\n\n```\n<eco-json-schema-wizard schema=\"[[schema]]\" value=\"{{value}}\"></eco-json-schema-wizard>\n```\n\nAnd a JSON schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\"\n    }\n  }\n}\n```\n\nA form will be generated, with the elements `value` looking something like this:\n\n```\n> this.value\n{\n  \"name\": \"Eric\"\n}\n```\n\nDeep / nested schemas are supported for type array and object:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\"\n    },\n    \"email\": {\n      \"title\": \"email\",\n      \"type\": \"string\",\n      \"format\": \"email\"\n    }\n  }\n}\n```\n\nCustomizing components for schema properties is supported by extending your JSON\nschema. For any schema sub-property (`properties` for `\"type\": \"object\"` and\n`items` for `\"type\": \"array\"`) a `component` property may be specified, with\nthe following options:\n\n- `component.name` - specifies the name of the custom component to use\n- `component.valueProperty` - specifies which property of the custom element\n  represents its value\n- `component.properties` - properties that will be set on the element\n\nExample schema using custom components (note that `\"valueProperty\": \"value\"` is\nredundant in this case, `\"valueProperty\": \"value\"` will be the default if not specified):\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"phoneNumber\": {\n      \"title\": \"Phone Number\",\n      \"type\": \"string\",\n      \"component\": {\n        \"name\": \"gold-phone-input\",\n        \"valueProperty\": \"value\",\n        \"properties\": {\n          \"countryCode\": \"1\"\n        }\n      }\n    }\n  }\n}\n```\n\nItems set in `component.properties` will override any attributes / properties set\nby `eco-json-schema-form` elements, making it possible to override JSON schema\nvalidation properties mapped to `paper-input` attributes:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    }\n  }\n}\n```\n\nPutting it all together, this schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    },\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\",\n            \"component\": {\n              \"name\": \"gold-phone-input\",\n              \"valueProperty\": \"value\",\n              \"properties\": {\n                \"countryCode\": \"1\"\n              }\n            }\n          }\n        }\n      }\n    },\n    \"emailAddresses\": {\n      \"title\": \"Emails\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"email\": {\n            \"title\": \"email\",\n            \"type\": \"string\",\n            \"format\": \"email\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nWill build a form describing an object:\n\n```\n> this.value\n{\n  \"name\": \"Eric\",\n  \"age\": 28,\n  \"postalCode\": \"H1W 2C5\",\n  \"phoneNumbers\": [\n    {\n      \"type\": \"Mobile\",\n      \"phoneNumber\": \"123-456-7890\"\n    }\n  ]\n  \"emailAddresses\": [\n    {\n      \"type\": \"Personal\",\n      \"email\": \"eric@wat.com\"\n    }\n  ]\n}\n```\n\nExternal validation is supported via the `error` property. By providing an\nobject tree with each leaf representing an error message for properties, the\nmessage will be attached to the appropriate element.\n\nExample, for the Contact schema:\n\n```\nel.error = {\n  \"name\": \"String is too short (0 chars) minimum 2\",\n  \"phoneNumbers\": [\n    {\n      \"phoneNumber\": \"String does not match required format\"\n    }\n  ]\n}\n```\n\n@group eco Elements\n@element eco-json-schema-wizard\n* @demo demo/index.html\n*/\nclass EcoJsonSchemaWizard extends mixinBehaviors(\n  [AppLocalizeBehavior],\n  PolymerElement\n) {\n  static get tag() {\n    return \"eco-json-schema-wizard\";\n  }\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        :host {\n          display: block;\n          @apply --layout-vertical;\n        }\n\n        paper-input {\n          padding: 2px;\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #fff;\n          }\n        }\n\n        .box,\n        #form {\n          display: -webkit-box;\n          display: -webkit-flex;\n          display: -moz-box;\n          display: -ms-flexbox;\n          display: flex;\n          -webkit-flex-align: center;\n          -ms-flex-align: center;\n          -webkit-align-items: center;\n          align-items: center;\n        }\n\n        .fullbleed {\n          z-index: 1;\n        }\n\n        app-toolbar.bottom {\n          --app-toolbar-color: var(--app-primary-color);\n          --app-toolbar-background: var(--dark-theme-text-color);\n        }\n\n        app-toolbar.bottom paper-icon-button {\n          --app-toolbar-color: var(--dark-theme-text-color);\n          --app-toolbar-background: var(--app-primary-color);\n        }\n      </style>\n      <div class=\"vertical flex layout fullbleed\">\n        <!--\n        paper-icon-button id=\"camButton\" icon=\"editor:insert-photo\" raised>add photo</paper-icon-button\n      -->\n        <app-toolbar>\n          <paper-icon-button\n            id=\"prevButton\"\n            icon=\"arrow-back\"\n            hidden\\$=\"{{!hasPrev}}\"\n            on-click=\"prev\"\n            raised=\"\"\n            >{{localize('prev')}}</paper-icon-button\n          ><span\n            class=\"title layout horizontal flex\"\n            style=\"white-space: normal\"\n            >[[title]]</span\n          >\n          <paper-icon-button\n            id=\"nextButton\"\n            icon=\"arrow-forward\"\n            hidden\\$=\"{{!hasNext}}\"\n            on-click=\"next\"\n            raised=\"\"\n            >{{localize('next')}}</paper-icon-button\n          >\n          <paper-icon-button\n            id=\"submitButton\"\n            icon=\"cloud-upload\"\n            on-click=\"submit\"\n            raised=\"\"\n            >{{localize('submit')}}</paper-icon-button\n          >\n        </app-toolbar>\n        <iron-pages\n          id=\"form\"\n          class=\"layout horizontal flex start-justified\"\n          role=\"main\"\n          selected=\"[[page]]\"\n          attr-for-selected=\"name\"\n        ></iron-pages>\n        <app-toolbar class=\"bottom\">\n          <div hidden\\$=\"{{!hasPrev}}\" on-click=\"prev\">\n            <paper-icon-button id=\"prevButton\" icon=\"arrow-back\" raised=\"\"\n              >{{localize('prev')}}</paper-icon-button\n            >\n            <span class=\"title layout\" style=\"white-space: normal\"\n              >{{localize('prev')}}</span\n            >\n          </div>\n          <span\n            class=\"title layout horizontal flex\"\n            style=\"white-space: normal\"\n          ></span>\n          <div hidden\\$=\"{{!hasNext}}\" on-click=\"next\">\n            <span class=\"title layout\" style=\"white-space: normal\"\n              >{{localize('next')}}</span\n            >\n            <paper-icon-button id=\"nextButton\" icon=\"arrow-forward\" raised=\"\"\n              >{{localize('next')}}</paper-icon-button\n            >\n          </div>\n        </app-toolbar>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      language: {\n        type: String,\n        notify: true\n      },\n      resources: {\n        type: Object,\n        notify: true\n      },\n      schema: {\n        type: Object,\n        notify: true,\n        observer: \"_schemaChanged\"\n      },\n      label: {\n        type: String\n      },\n      value: {\n        type: Object,\n        notify: true,\n        value() {\n          return {};\n        }\n      },\n      page: {\n        type: String,\n        notify: true,\n        observer: \"_pageChanged\"\n      },\n      pages: {\n        type: Array,\n        notify: true,\n        value: []\n      },\n      error: {\n        type: Object,\n        observer: \"_errorChanged\"\n      },\n      isReview: {\n        type: Boolean,\n        value: false,\n        notify: true\n      },\n      canSubmit: {\n        type: Boolean,\n        notify: true\n      },\n      hasNext: {\n        type: Boolean,\n        notify: true\n      },\n      hasPrev: {\n        type: Boolean,\n        notify: true\n      },\n      titles: {\n        type: Array,\n        notify: true,\n        value: []\n      },\n      title: {\n        type: String,\n        value: \"\",\n        notify: true\n      }\n    };\n  }\n  disconnectedCallback() {\n    this._clearForm();\n    super.disconnectedCallback();\n  }\n  _buildSchemaProperties() {\n    var ctx = this;\n\n    this._schemaProperties = Object.keys(this.schema.properties || []).map(\n      function(key) {\n        var schema = ctx.schema.properties[key];\n        var property = {\n          property: key,\n          label: schema.title || key,\n          schema: schema,\n          component: schema.component || {}\n        };\n\n        if (!property.component.valueProperty) {\n          property.component.valueProperty = \"value\";\n        }\n\n        if (ctx._isSchemaEnum(schema)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-enum\";\n          property.value = \"\";\n        } else if (ctx._isSchemaBoolean(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-boolean\";\n          property.value = false;\n        } else if (ctx._isSchemaFile(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-file\";\n          property.value = \"\";\n        } else if (ctx._isSchemaValue(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-input\";\n          property.value = \"\";\n        } else if (ctx._isSchemaObject(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-object\";\n          property.component.wizard = true;\n          property.value = {};\n        } else if (ctx._isSchemaArray(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-array\";\n          property.value = [];\n        } else {\n          return console.error(\"Unknown property type %s\", schema.type);\n        }\n        ctx.push(\"pages\", key);\n        ctx.push(\"titles\", schema.title);\n\n        return property;\n      }\n    );\n  }\n  _schemaPropertyChanged(event, detail) {\n    if (detail.path && /\\.length$/.test(detail.path)) {\n      return;\n    }\n\n    var ctx = this;\n    var property = event.target.schemaProperty;\n    var path = [\"value\", property.property];\n\n    if (detail.path && /\\.splices$/.test(detail.path)) {\n      var parts = detail.path.split(\".\").slice(1, -1);\n      while (parts.length) {\n        path.push(parts.shift());\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n\n      if (detail.value.keySplices) {\n        if (property.keyMap) {\n          detail.value.keySplices.forEach(function(splice) {\n            splice.removed.forEach(function(k) {\n              delete property.keyMap[path.concat([k]).join(\".\")];\n            });\n          });\n        }\n      }\n\n      detail.value.indexSplices.forEach(function(splice) {\n        var args = [path.join(\".\"), splice.index, splice.removed.length];\n        if (splice.addedCount) {\n          for (var i = 0, ii = splice.addedCount; i < ii; i++) {\n            if (splice.addedKeys && splice.addedKeys[i]) {\n              property.keyMap = property.keyMap || {};\n              property.keyMap[\n                path.concat([splice.addedKeys[i]]).join(\".\")\n              ] = path.concat([i + splice.index]).join(\".\");\n            }\n            args.push(ctx._deepClone(splice.object[i + splice.index]));\n          }\n        }\n        ctx.splice.apply(ctx, args);\n      });\n    } else if (detail.path) {\n      var parts = detail.path.split(\".\").slice(1);\n      var v = this.value;\n      if (!v.hasOwnProperty(property.property)) {\n        this.set(\"value.\" + property.property, {});\n      }\n      while (parts.length) {\n        var k = parts.shift();\n        path.push(k);\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n      this.set(path.join(\".\"), this._deepClone(detail.value));\n\n      console.log(\"value: \" + JSON.stringify(this.value));\n    }\n  }\n  _setValue() {\n    var ctx = this;\n    var value = {};\n    this._schemaProperties.forEach(function(property) {\n      value[property.property] = ctx._deepClone(property.value);\n    });\n    this.value = value;\n  }\n  _buildForm() {\n    var ctx = this;\n    this._schemaProperties.forEach(property => {\n      var el = ctx.create(property.component.name, {\n        label: property.label,\n        schema: property.schema,\n        schemaProperty: property,\n        language: this.language,\n        resources: this.resources\n      });\n\n      el.setAttribute(\"name\", property.property);\n      el.className = \"flex start-justified\";\n\n      property.value = el[property.component.valueProperty];\n      ctx.listen(\n        el,\n        property.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n      ctx.shadowRoot.querySelector(\"#form\").appendChild(el);\n    });\n  }\n  _removePropertyEl(el) {\n    if (typeof el.schemaProperty !== typeof undefined) {\n      this.unlisten(\n        el,\n        el.schemaProperty.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n    }\n    el.schemaProperty = null;\n    this.shadowRoot.querySelector(\"#form\").removeChild(el);\n  }\n  _clearForm() {\n    var formEl = this.shadowRoot.querySelector(\"#form\");\n    while (formEl.firstChild) {\n      this._removePropertyEl(formEl.firstChild);\n    }\n  }\n  _schemaChanged() {\n    this._clearForm();\n    this._buildSchemaProperties();\n    this._buildForm();\n    this._setValue();\n    if (this.pages.length > 0) {\n      this.set(\"page\", this.pages[0]);\n    }\n    this.set(\"title\", this.titles[0]);\n  }\n  next() {\n    var current = this.pages.indexOf(this.page);\n    var next = current;\n    if (current !== -1) {\n      if (current < this.pages.length - 1) {\n        next = current + 1;\n      }\n      this.set(\"page\", this.pages[next]);\n      this.set(\"title\", this.titles[next]);\n    } else {\n      console.log(\"Invalid current page in wizard\");\n    }\n  }\n  prev() {\n    var current = this.pages.indexOf(this.page);\n    var prev = current;\n    if (current !== -1) {\n      if (current > 0) {\n        prev = current - 1;\n      }\n      this.set(\"page\", this.pages[prev]);\n      this.set(\"title\", this.titles[prev]);\n    } else {\n      console.log(\"Invalid current page in wizard\");\n    }\n  }\n  submit() {\n    this.dispatchEvent(\n      new CustomEvent(\"submit\", {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: true\n      })\n    );\n  }\n  _pageChanged() {\n    var current = this.pages.indexOf(this.page);\n    if (current === 0) {\n      this.set(\"hasPrev\", false);\n    } else {\n      this.set(\"hasPrev\", true);\n    }\n    if (current === this.pages.length - 1) {\n      this.set(\"hasNext\", false);\n    } else {\n      this.set(\"hasNext\", true);\n    }\n  }\n  _errorChanged() {\n    var ctx = this;\n    this.shadowRoot.querySelector(\"#form\").childNodes.forEach(function(el) {\n      var name = el.getAttribute(\"name\");\n      if (ctx.error && ctx.error[name]) {\n        el.error = ctx.error[name];\n      } else {\n        el.error = null;\n      }\n    });\n  }\n  _deepClone(o) {\n    return JSON.parse(JSON.stringify(o));\n  }\n  _isSchemaValue(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  }\n  _isSchemaFile(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  }\n  _isSchemaBoolean(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  }\n  _isSchemaEnum(schema) {\n    return !!schema.enum;\n  }\n  _isSchemaNumber(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  }\n  _isSchemaString(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  }\n  _isSchemaObject(type) {\n    return type === \"object\";\n  }\n  _isSchemaArray(type) {\n    return type === \"array\";\n  }\n}\nwindow.customElements.define(EcoJsonSchemaWizard.tag, EcoJsonSchemaWizard);\nexport { EcoJsonSchemaWizard };\n"],"names":["EcoJsonSchemaArray","mixinBehaviors","AppLocalizeBehavior","PolymerElement","__headings","_schemaChanged","addEventListener","e","_this2","_updateHeadings","removeEventListener","_this3","afterNextRender","this","itemLabel","_this4","schema","items","value","forEach","val","push","shadowRoot","querySelectorAll","item","index","getAttribute","propertyName","propertyPrefix","prefix","dispatchEvent","CustomEvent","bubbles","cancelable","composed","detail","container","path","properties","map","prop","newprop","JSON","parse","stringify","name","type","tag","notifyPath","target","controls","replace","splice","propname","pathArr","split","length","update","set","headings","label","trim","html","globalOptions","Object","icon","tooltip","notify","String","observer","Array","window","customElements","define","EcoJsonSchemaFieldset","_this","EcoJsonSchemaMarkup","newValue","wipeSlot","encapScript","frag","document","createRange","createContextualFragment","appendChild","EcoJsonSchemaTabs","tab","EcoJsonSchemaBoolean","inputEl","querySelector","component","keys","title","_label","_isSchemaBoolean","_isSchemaNumber","_isSchemaString","isArray","indexOf","Boolean","error","EcoJsonSchemaEnum","IronValidatableBehavior","_items","enum","filter","invalid","EcoJsonSchemaFile","_showDropText","raised","toggleAttribute","noink","droppable","setupDrop","uploadBorder","toggleClass","ondragover","stopPropagation","effect","dataTransfer","dropEffect","effectAllowed","ondragleave","ondrop","event","preventDefault","multi","files","i","file","mimeType","match","fileType","accept","progress","complete","uploadFile","elem","createEvent","evt","initEvent","xhr","abort","cancel","model","__data__","self","microTask","run","reader","FileReader","r","result","attributes","hasOwnProperty","readAsDataURL","console","log","_isSchemaFile","s","language","resources","dropText","headers","retryText","removeText","successText","errorText","_shownDropText","additional","fileDataName","paperButtonAlt","paperButtonTitle","EcoJsonSchemaInput","required","multipleOf","step","isNaN","maximum","exclusiveMaximum","max","minimum","exclusiveMinimum","min","format","alwaysFloatLabel","maxLength","maxlength","minLength","minlength","pattern","errorMessage","EcoJsonSchemaObject","_clearForm","thisSchema","ctx","key","property","description","valueProperty","slot","_isSchemaEnum","_typeof","_isSchemaValue","_isSchemaObject","_isSchemaArray","_buildNestedSchemaProperties","_isSchemaFieldset","_isSchemaTabs","_isSchemaMarkup","_buildSchemaProperties","test","schemaProperty","concat","_deepClone","parts","slice","shift","keyMap","join","keySplices","removed","k","indexSplices","args","addedCount","ii","addedKeys","object","apply","props","_schemaProperties","setter","autofocus","editorValue","theme","codeTheme","el","create","attr","style","setAttribute","hidden","undefined","className","listen","toLowerCase","$","id","tip","createElement","innerHTML","temp","cloneDiv","cloneNode","firstChild","get","_buildForm","parent","unlisten","removeChild","formEl","_removePropertyEl","oldValue","_setValue","childNodes","o","wizard","EcoJsonSchemaWizard","pages","titles","current","page","next","prev","isReview","canSubmit","hasNext","hasPrev"],"mappings":"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"}